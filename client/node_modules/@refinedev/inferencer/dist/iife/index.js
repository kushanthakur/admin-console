(()=>{var qo=Object.create;var aa=Object.defineProperty;var Ao=Object.getOwnPropertyDescriptor;var $o=Object.getOwnPropertyNames;var Do=Object.getPrototypeOf,Mo=Object.prototype.hasOwnProperty;var E=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Fo=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ro=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of $o(t))!Mo.call(e,n)&&n!==r&&aa(e,n,{get:()=>t[n],enumerable:!(a=Ao(t,n))||a.enumerable});return e};var J=(e,t,r)=>(r=e!=null?qo(Do(e)):{},Ro(t||!e||!e.__esModule?aa(r,"default",{value:e,enumerable:!0}):r,e));var ct=Fo((Bs,Qn)=>{var Oo=Object.create,Qt=Object.defineProperty,To=Object.getOwnPropertyDescriptor,Uo=Object.getOwnPropertyNames,Qo=Object.getPrototypeOf,Wo=Object.prototype.hasOwnProperty,zo=(e,t)=>{for(var r in t)Qt(e,r,{get:t[r],enumerable:!0})},Ba=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Uo(t))!Wo.call(e,n)&&n!==r&&Qt(e,n,{get:()=>t[n],enumerable:!(a=To(t,n))||a.enumerable});return e},N=(e,t,r)=>(r=e!=null?Oo(Qo(e)):{},Ba(t||!e||!e.__esModule?Qt(r,"default",{value:e,enumerable:!0}):r,e)),Bo=e=>Ba(Qt({},"__esModule",{value:!0}),e),ja={};zo(ja,{AuthPage:()=>ns,Authenticated:()=>hs,CanAccess:()=>Ps,ErrorComponent:()=>Xl,GitHubBanner:()=>Es,LayoutWrapper:()=>vs,LoginPage:()=>Rn,ReadyPage:()=>On,Refine:()=>fs,ResourceContext:()=>wt,RouteChangeHandler:()=>Un,UndoableQueue:()=>Tn,WelcomePage:()=>os,createTreeView:()=>vi,file2Base64:()=>li,getDefaultFilter:()=>ii,getDefaultSortOrder:()=>oi,getNextPageParam:()=>sn,getPreviousPageParam:()=>un,handleUseParams:()=>si,importCSVMapper:()=>Ja,legacyResourceTransform:()=>cn,matchResourceFromRoute:()=>fi,parseTableParams:()=>Cr,parseTableParamsFromQuery:()=>ni,pickNotDeprecated:()=>I,routeGenerator:()=>nn,setInitialFilters:()=>fr,setInitialSorters:()=>vr,stringifyTableParams:()=>mr,unionFilters:()=>Pt,unionSorters:()=>pr,useActiveAuthProvider:()=>ee,useApiUrl:()=>Mi,useAuthenticated:()=>Jo,useBack:()=>An,useBreadcrumb:()=>Zl,useCan:()=>Mn,useCanWithoutCache:()=>Rl,useCancelNotification:()=>lt,useCheckError:()=>Xo,useCreate:()=>Ir,useCreateMany:()=>vn,useCustom:()=>Ri,useCustomMutation:()=>Ti,useDataProvider:()=>ae,useDelete:()=>Si,useDeleteMany:()=>Di,useExport:()=>hl,useForgotPassword:()=>Ya,useForm:()=>bl,useGetIdentity:()=>_a,useGetLocale:()=>ul,useGetToPath:()=>Ar,useGo:()=>Pe,useHandleNotification:()=>fe,useImport:()=>xl,useInfiniteList:()=>zi,useInvalidate:()=>Ge,useIsAuthenticated:()=>br,useIsExistAuthentication:()=>Ga,useLink:()=>Bt,useList:()=>xr,useLiveMode:()=>hn,useLog:()=>Ze,useLogList:()=>Kl,useLogin:()=>hr,useLogout:()=>dr,useMany:()=>mn,useMenu:()=>Jl,useModal:()=>Ll,useMutationMode:()=>ut,useNavigation:()=>Ce,useNotification:()=>Qe,useOnError:()=>pe,useOne:()=>Lr,useParse:()=>Ln,useParsed:()=>be,usePermissions:()=>Ho,usePublish:()=>Ye,useRedirectionAfterSubmission:()=>qn,useRefineContext:()=>qr,useRegister:()=>Va,useResource:()=>W,useResourceSubscription:()=>Et,useResourceWithRoute:()=>zt,useRouterContext:()=>ne,useRouterType:()=>Y,useSelect:()=>Ul,useSetLocale:()=>sl,useShow:()=>Cl,useSubscription:()=>Hi,useSyncWithLocation:()=>Nn,useTable:()=>Wl,useTitle:()=>fl,useToPath:()=>kl,useTranslate:()=>j,useUpdate:()=>fn,useUpdateMany:()=>Ai,useUpdatePassword:()=>Za,useWarnAboutChange:()=>Nr,userFriendlyResourceName:()=>Er});Qn.exports=Bo(ja);var He=N(E("react")),it=N(E("react")),Ka=it.default.createContext({}),jo=({children:e,isProvided:t,...r})=>{let{replace:a}=Ce(),n=async c=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,c))}catch(p){return Promise.reject(p)}},i=async c=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,c))}catch(p){return Promise.reject(p)}},o=async c=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,c))}catch(p){return Promise.reject(p)}},u=async c=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,c)),Promise.resolve()}catch(p){return p!=null&&p.redirectPath&&a(p.redirectPath),Promise.reject(p)}};return it.default.createElement(Ka.Provider,{value:{...r,login:n,logout:o,checkAuth:u,register:i,isProvided:t}},e)},Ha=it.default.createContext({}),Ko=({children:e,isProvided:t,...r})=>{let a=async d=>{var p;try{return await((p=r.login)==null?void 0:p.call(r,d))}catch(f){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",f),Promise.reject(f)}},n=async d=>{var p;try{return await((p=r.register)==null?void 0:p.call(r,d))}catch(f){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",f),Promise.reject(f)}},i=async d=>{var p;try{return await((p=r.logout)==null?void 0:p.call(r,d))}catch(f){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",f),Promise.reject(f)}},o=async d=>{var p;try{let f=await((p=r.check)==null?void 0:p.call(r,d));return Promise.resolve(f)}catch(f){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",f),Promise.reject(f)}},u=async d=>{var p;try{let f=await((p=r.forgotPassword)==null?void 0:p.call(r,d));return Promise.resolve(f)}catch(f){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",f),Promise.reject(f)}},c=async d=>{var p;try{let f=await((p=r.updatePassword)==null?void 0:p.call(r,d));return Promise.resolve(f)}catch(f){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",f),Promise.reject(f)}};return it.default.createElement(Ha.Provider,{value:{...r,login:a,logout:i,check:o,register:n,forgotPassword:u,updatePassword:c,isProvided:t}},e)},ye=()=>it.default.useContext(Ka),Le=()=>it.default.useContext(Ha),na=E("@tanstack/react-query");function Ho({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=ye(),{getPermissions:a}=Le(),n=(0,na.useQuery)(["usePermissions"],a!=null?a:()=>Promise.resolve(void 0),{enabled:!e&&!!a,...e?{}:t}),i=(0,na.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?i:n}var oa=E("@tanstack/react-query");function _a({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=ye(),{getIdentity:a}=Le(),n=(0,oa.useQuery)(["getUserIdentity"],a!=null?a:()=>Promise.resolve({}),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t}),i=(0,oa.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?i:n}var ia=E("@tanstack/react-query"),_o=E("@tanstack/react-query"),yr=()=>{let e=(0,_o.useQueryClient)();return()=>{e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])}};function dr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=yr(),a=Y(),n=Pe(),{push:i}=Ce(),{open:o,close:u}=Qe(),{logout:c}=ye(),{logout:d}=Le(),p=(0,ia.useMutation)(["useLogout"],d,{onSuccess:(y,m)=>{let{success:v,error:l,redirectTo:s}=y,{redirectPath:h}=m!=null?m:{},P=h!=null?h:s;v&&(u==null||u("useLogout-error")),(l||!v)&&(o==null||o(Xt(l))),P!==!1&&(a==="legacy"?i(P!=null?P:"/login"):P&&n({to:P})),r()},onError:y=>{o==null||o(Xt(y))},...e===!0?{}:t}),f=(0,ia.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],c,{onSuccess:(y,m)=>{var v;let l=(v=m==null?void 0:m.redirectPath)!=null?v:y;if(l!==!1){if(l){a==="legacy"?i(l):n({to:l});return}a==="legacy"?i("/login"):n({to:"/login"}),r()}},onError:y=>{o==null||o(Xt(y))},...e?t:{}});return e?f:p}var Xt=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),la=E("@tanstack/react-query"),Vo=N(E("qs")),Yo=N(E("react"));function hr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=yr(),a=Y(),n=Pe(),{replace:i}=Ce(),o=be(),{useLocation:u}=ne(),{search:c}=u(),{close:d,open:p}=Qe(),{login:f}=ye(),{login:y}=Le(),m=Yo.default.useMemo(()=>{var s;return a==="legacy"?Vo.default.parse(c,{ignoreQueryPrefix:!0}).to:(s=o.params)==null?void 0:s.to},[a,o.params,c]),v=(0,la.useMutation)(["useLogin"],y,{onSuccess:({success:s,redirectTo:h,error:P})=>{s&&(d==null||d("login-error")),(P||!s)&&(p==null||p(er(P))),m&&s?a==="legacy"?i(m):n({to:m,type:"replace"}):h?a==="legacy"?i(h):n({to:h,type:"replace"}):a==="legacy"&&i("/"),setTimeout(()=>{r()})},onError:s=>{p==null||p(er(s))},...e===!0?{}:t}),l=(0,la.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],f,{onSuccess:s=>{m&&i(m),s!==!1&&!m&&(typeof s=="string"?a==="legacy"?i(s):n({to:s,type:"replace"}):a==="legacy"?i("/"):n({to:"/",type:"replace"})),d==null||d("login-error"),setTimeout(()=>{r()})},onError:s=>{p==null||p(er(s))},...e?t:{}});return e?l:v}var er=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),sa=E("@tanstack/react-query");function Va({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=yr(),a=Y(),n=Pe(),{replace:i}=Ce(),{register:o}=ye(),{register:u}=Le(),{close:c,open:d}=Qe(),p=(0,sa.useMutation)(["useRegister"],u,{onSuccess:({success:y,redirectTo:m,error:v})=>{y&&(c==null||c("register-error")),(v||!y)&&(d==null||d(tr(v))),m?a==="legacy"?i(m):n({to:m,type:"replace"}):a==="legacy"&&i("/"),r()},onError:y=>{d==null||d(tr(y))},...e===!0?{}:t}),f=(0,sa.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],o,{onSuccess:y=>{y!==!1&&(y?a==="legacy"?i(y):n({to:y,type:"replace"}):a==="legacy"?i("/"):n({to:"/",type:"replace"}),c==null||c("register-error")),r()},onError:y=>{d==null||d(tr(y))},...e?t:{}});return e?f:p}var tr=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),ua=E("@tanstack/react-query");function Ya({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Y(),a=Pe(),{replace:n}=Ce(),{forgotPassword:i}=ye(),{forgotPassword:o}=Le(),{close:u,open:c}=Qe(),d=(0,ua.useMutation)(["useForgotPassword"],o,{onSuccess:({success:f,redirectTo:y,error:m})=>{f&&(u==null||u("forgot-password-error")),(m||!f)&&(c==null||c(rr(m))),y&&(r==="legacy"?n(y):a({to:y,type:"replace"}))},onError:f=>{c==null||c(rr(f))},...e===!0?{}:t}),p=(0,ua.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],i,{onSuccess:f=>{f!==!1&&f&&(r==="legacy"?n(f):a({to:f,type:"replace"})),u==null||u("forgot-password-error")},onError:f=>{c==null||c(rr(f))},...e?t:{}});return e?p:d}var rr=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),Zo=N(E("react")),ca=E("@tanstack/react-query"),Go=N(E("qs"));function Za({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Y(),a=Pe(),{replace:n}=Ce(),{updatePassword:i}=ye(),{updatePassword:o}=Le(),{close:u,open:c}=Qe(),d=be(),{useLocation:p}=ne(),{search:f}=p(),y=Zo.default.useMemo(()=>{var l;if(r==="legacy"){let s=Go.default.parse(f,{ignoreQueryPrefix:!0});return s!=null?s:{}}else return(l=d.params)!=null?l:{}},[f,d,r]),m=(0,ca.useMutation)(["useUpdatePassword"],async l=>o==null?void 0:o({...y,...l}),{onSuccess:({success:l,redirectTo:s,error:h})=>{l&&(u==null||u("update-password-error")),(h||!l)&&(c==null||c(ar(h))),s&&(r==="legacy"?n(s):a({to:s,type:"replace"}))},onError:l=>{c==null||c(ar(l))},...e===!0?{}:t}),v=(0,ca.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async l=>i==null?void 0:i({...y,...l}),{onSuccess:l=>{l!==!1&&l&&(r==="legacy"?n(l):a({to:l,type:"replace"})),u==null||u("update-password-error")},onError:l=>{c==null||c(ar(l))},...e?t:{}});return e?v:m}var ar=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),da=E("@tanstack/react-query");function br({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=ye(),{check:a}=Le(),n=(0,da.useQuery)(["useAuthenticated",t],async()=>{var o;return(o=await(a==null?void 0:a(t)))!=null?o:{}},{retry:!1,enabled:!e}),i=(0,da.useQuery)(["useAuthenticated","v3LegacyAuthProviderCompatible",t],async()=>{var o;return(o=await(r==null?void 0:r(t)))!=null?o:{}},{retry:!1,enabled:e});return e?i:n}var Jo=br,ma=E("@tanstack/react-query");function pe({v3LegacyAuthProviderCompatible:e=!1}={}){let t=Y(),r=Pe(),{replace:a}=Ce(),{checkError:n}=ye(),{onError:i}=Le(),{mutate:o}=dr({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:u}=dr({v3LegacyAuthProviderCompatible:Boolean(e)}),c=(0,ma.useMutation)(["useCheckError"],i,{onSuccess:({logout:p,redirectTo:f})=>{if(p){u({redirectPath:f});return}if(f){t==="legacy"?a(f):r({to:f,type:"replace"});return}}}),d=(0,ma.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],n,{onError:p=>{o({redirectPath:p})}});return e?d:c}var Xo=pe,Ga=()=>{let{isProvided:e}=ye(),{isProvided:t}=Le();return Boolean(t||e)},ei=E("@tanstack/react-query"),nr=e=>e/1e3,ti=N(E("lodash/zip")),ri=N(E("lodash/fromPairs")),Ja=(e,t=r=>r)=>{let[r,...a]=e;return a.map(n=>(0,ri.default)((0,ti.default)(r,n))).map((n,i,o)=>t.call(void 0,n,i,o))},pa=N(E("pluralize")),Pr=N(E("qs")),Xa=N(E("lodash/unionWith")),en=N(E("lodash/differenceWith")),ai=N(E("warn-once")),Cr=e=>{var t;let{current:r,pageSize:a,sorter:n,sorters:i,filters:o}=Pr.default.parse(e.substring(1));return{parsedCurrent:r&&Number(r),parsedPageSize:a&&Number(a),parsedSorter:(t=I(i,n))!=null?t:[],parsedFilters:o!=null?o:[]}},ni=e=>{let t=Pr.default.stringify(e);return Cr(`/${t}`)},mr=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:n,filters:i,...o}=e;return Pr.default.stringify({...o,...r||{},sorters:I(n,a),filters:i},t)},tn=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,rn=(e,t)=>e.field==t.field,Pt=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,ai.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,Xa.default)(e,t,r,tn).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),pr=(e,t)=>(0,Xa.default)(e,t,rn).filter(r=>r.order!==void 0&&r.order!==null),fr=(e,t)=>[...(0,en.default)(t,e,tn),...e],vr=(e,t)=>[...(0,en.default)(t,e,rn),...e],oi=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},ii=(e,t,r="eq")=>{let a=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:i,field:o}=n;return o===e&&i===r}});if(a)return a.value||[]},li=e=>new Promise((t,r)=>{let a=new FileReader,n=()=>{a.result&&(a.removeEventListener("load",n,!1),t(a.result))};a.addEventListener("load",n,!1),a.readAsDataURL(e.originFileObj),a.onerror=i=>(a.removeEventListener("load",n,!1),r(i))}),Er=(e="",t)=>{let r=Rt(e);return t==="singular"?pa.default.singular(r):pa.default.plural(r)},si=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,I=(...e)=>e.find(t=>typeof t<"u"),he=(e,t,r,a)=>{let n=t||"default",i={all:[n],resourceAll:[n,e||""],list:o=>[...i.resourceAll,"list",{...o,...I(r,a)||{}}],many:o=>[...i.resourceAll,"getMany",o&&o.map(String),{...I(r,a)||{}}].filter(u=>u!==void 0),detail:o=>[...i.resourceAll,"detail",o==null?void 0:o.toString(),{...I(r,a)||{}}],logList:o=>["logList",e,o,a].filter(u=>u!==void 0)};return i},ui=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),wr=e=>e.startsWith(":"),ot=e=>e.split("/").filter(t=>t!==""),ci=(e,t)=>{let r=ot(e),a=ot(t);return r.length===a.length},Me=e=>e.replace(/^\/|\/$/g,""),di=(e,t)=>{let r=Me(e),a=Me(t);if(!ci(r,a))return!1;let n=ot(r);return ot(a).every((i,o)=>wr(i)||i===n[o])},mi=(e,t,r)=>{let a=Me(r||""),n=`${a}${a?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`},Te=(e,t)=>{var r,a;let n=I((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!n)return;let i=t.find(o=>{var u;return((u=o.identifier)!=null?u:o.name)===n});return i!=null?i:{name:n}},an=(e,t,r)=>{let a=[],n=Te(e,t);for(;n;)a.push(n),n=Te(n,t);if(a.length!==0)return`/${a.reverse().map(i=>{var o,u;let c=r&&(u=(o=i.options)==null?void 0:o.route)!=null?u:i.name;return Me(c)}).join("/")}`},me=(e,t,r)=>{let a=[],n=["list","show","edit","create","clone"],i=an(e,t,r);return n.forEach(o=>{var u,c,d,p;let f=r&&o==="clone"?e.create:e[o],y;typeof f=="function"||r?y=mi(r&&(p=(d=(u=e.meta)==null?void 0:u.route)!=null?d:(c=e.options)==null?void 0:c.route)!=null?p:e.name,o,r?i:void 0):typeof f=="string"?y=f:typeof f=="object"&&(y=f.path),y&&a.push({action:o,resource:e,route:`/${y.replace(/^\//,"")}`})}),a},pi=e=>{var t,r;if(e.length===0)return;if(e.length===1)return e[0];let a=e.map(o=>({...o,splitted:ot(Me(o.route))})),n=(r=(t=a[0])==null?void 0:t.splitted.length)!=null?r:0,i=[...a];for(let o=0;o<n;o++){let u=i.filter(c=>!wr(c.splitted[o]));if(u.length!==0){if(u.length===1){i=u;break}i=u}}return i[0]},fi=(e,t)=>{let r=t.flatMap(n=>me(n,t)).filter(n=>di(e,n.route)),a=pi(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},nn=(e,t)=>{var r,a,n;let i,o=an(e,t,!0);if(o){let u=I(e.meta,e.options);i=`${o}/${(r=u==null?void 0:u.route)!=null?r:e.name}`}else i=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;return`/${i.replace(/^\//,"")}`},vi=e=>{var t,r,a;let n=[],i={},o={},u,c;for(let d=0;d<e.length;d++){u=e[d];let p=(a=(r=u.route)!=null?r:(t=I(u==null?void 0:u.meta,u.options))==null?void 0:t.route)!=null?a:"";i[p]=u,i[p].children=[],o[u.name]=u,o[u.name].children=[]}for(let d in i)i.hasOwnProperty(d)&&(c=i[d],c.parentName&&o[c.parentName]?o[c.parentName].children.push(c):n.push(c));return n},Rt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),on=N(E("react")),gi=N(E("react")),ln=({children:e})=>gi.default.createElement("div",null,e),$e={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Ue=on.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:ln,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:$e}),yi=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:n,children:i,DashboardPage:o,Title:u,Layout:c=ln,Header:d,Sider:p,Footer:f,OffLayoutArea:y,LoginPage:m=Rn,catchAll:v,liveMode:l="off",onLiveEvent:s,options:h})=>on.default.createElement(Ue.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:u,undoableTimeout:n,Layout:c,Header:d,Sider:p,Footer:f,OffLayoutArea:y,DashboardPage:o,LoginPage:m,catchAll:v,liveMode:l,onLiveEvent:s,options:h}},i),hi=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:n,reactQueryDevtoolConfig:i,syncWithLocation:o,undoableTimeout:u,warnWhenUnsavedChanges:c}={})=>{var d,p,f,y,m,v,l,s,h,P,g,w,b,C,L,x,k,S,A,O,M,$,F,q;let D={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(p=(d=e==null?void 0:e.mutationMode)!=null?d:a)!=null?p:$e.mutationMode,undoableTimeout:(y=(f=e==null?void 0:e.undoableTimeout)!=null?f:u)!=null?y:$e.undoableTimeout,syncWithLocation:(v=(m=e==null?void 0:e.syncWithLocation)!=null?m:o)!=null?v:$e.syncWithLocation,warnWhenUnsavedChanges:(s=(l=e==null?void 0:e.warnWhenUnsavedChanges)!=null?l:c)!=null?s:$e.warnWhenUnsavedChanges,liveMode:(P=(h=e==null?void 0:e.liveMode)!=null?h:r)!=null?P:$e.liveMode,redirect:{afterCreate:(w=(g=e==null?void 0:e.redirect)==null?void 0:g.afterCreate)!=null?w:$e.redirect.afterCreate,afterClone:(C=(b=e==null?void 0:e.redirect)==null?void 0:b.afterClone)!=null?C:$e.redirect.afterClone,afterEdit:(x=(L=e==null?void 0:e.redirect)==null?void 0:L.afterEdit)!=null?x:$e.redirect.afterEdit}},R=(S=(k=e==null?void 0:e.disableTelemetry)!=null?k:t)!=null?S:!1,K={clientConfig:(M=(O=(A=e==null?void 0:e.reactQuery)==null?void 0:A.clientConfig)!=null?O:n)!=null?M:{},devtoolConfig:(q=(F=($=e==null?void 0:e.reactQuery)==null?void 0:$.devtoolConfig)!=null?F:i)!=null?q:{}};return{optionsWithDefaults:D,disableTelemetryWithDefault:R,reactQueryWithDefaults:K}},bi=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},fa=async(e,t,r)=>{let a=[];for(let[n,i]of e.entries())try{let o=await i();a.push(t(o,n))}catch(o){a.push(r(o,n))}return a},V=(e,t=[],r=!1)=>{if(!!e)return r?t.find(n=>{var i;return Me((i=n.route)!=null?i:"")===Me(e)})||t.find(n=>n.name===e):t.find(a=>{var n;return((n=a.identifier)!=null?n:a.name)===e})},T=(e,t,r)=>{if(t)return t;let a=V(e,r),n=I(a==null?void 0:a.meta,a==null?void 0:a.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"},Wt=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),sn=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,i=Math.ceil((e.total||0)/n);return a<i?Number(a)+1:void 0},un=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},cn=e=>{let t=[];return e==null||e.forEach(r=>{var a,n,i;t.push({...r,label:(i=(a=r.meta)==null?void 0:a.label)!=null?i:(n=r.options)==null?void 0:n.label,route:nn(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},Pi=e=>ot(Me(e)).flatMap(t=>wr(t)?[t.slice(1)]:[]),Ci=(e,t={},r={})=>e.reduce((a,n)=>{var i;let o=r[n]||((i=t.params)==null?void 0:i[n])||(n==="id"?t.id:void 0)||(n==="action"?t.action:void 0)||(n==="resource"?t.resource:void 0);return typeof o<"u"&&(a[n]=o),a},{}),ge=(e,t={},r={})=>{let a=Pi(e),n=Ci(a,t,r);return e.replace(/:([^\/]+)/g,(i,o)=>{let u=n[o];return typeof u<"u"?`${u}`:i})},ee=()=>{let e=ye(),t=Le();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},dn=({hasPagination:e,pagination:t,configPagination:r}={})=>{var a,n,i;let o=e===!1?"off":"server",u=(a=t==null?void 0:t.mode)!=null?a:o,c=(n=I(t==null?void 0:t.current,r==null?void 0:r.current))!=null?n:1,d=(i=I(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?i:10;return{current:c,pageSize:d,mode:u}},xr=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:i,queryOptions:o,successNotification:u,errorNotification:c,meta:d,metaData:p,liveMode:f,onLiveEvent:y,liveParams:m,dataProviderName:v})=>{let{resources:l}=W(),s=ae(),h=j(),P=ee(),{mutate:g}=pe({v3LegacyAuthProviderCompatible:Boolean(P==null?void 0:P.isLegacy)}),w=fe(),b=T(e,v,l),C=I(d,p),L=I(r,t==null?void 0:t.filters),x=I(i,t==null?void 0:t.sort),k=I(a,t==null?void 0:t.hasPagination),S=dn({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:k}),A=S.mode==="server",O={meta:C,metaData:C,filters:L,hasPagination:A,pagination:S,sorters:x,config:{...t,sort:x}},M=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,$=he(e,b,C,C),{getList:F}=s(b);return Et({resource:e,types:["*"],params:{meta:C,metaData:C,pagination:S,hasPagination:A,sort:x,sorters:x,filters:L,subscriptionType:"useList",...m},channel:`resources/${e}`,enabled:M,liveMode:f,onLiveEvent:y}),(0,ei.useQuery)($.list({filters:L,hasPagination:A,...A&&{pagination:S},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:q,pageParam:D,signal:R})=>F({resource:e,pagination:S,hasPagination:A,filters:L,sort:x,sorters:x,meta:{...C||{},queryContext:{queryKey:q,pageParam:D,signal:R}},metaData:{...C||{},queryContext:{queryKey:q,pageParam:D,signal:R}}}),{...o,enabled:typeof(o==null?void 0:o.enabled)<"u"?o==null?void 0:o.enabled:!!e,select:q=>{var D;let R=q,{current:K,mode:re,pageSize:Z}=S;return re==="client"&&(R={...R,data:R.data.slice((K-1)*Z,K*Z),total:R.total}),o!=null&&o.select?(D=o==null?void 0:o.select)==null?void 0:D.call(o,R):R},onSuccess:q=>{var D;(D=o==null?void 0:o.onSuccess)==null||D.call(o,q);let R=typeof u=="function"?u(q,O,e):u;w(R)},onError:q=>{var D;g(q),(D=o==null?void 0:o.onError)==null||D.call(o,q);let R=typeof c=="function"?c(q,O,e):c;w(R,{key:`${e}-useList-notification`,message:h("notifications.error",{statusCode:q.statusCode},`Error (status code: ${q.statusCode})`),description:q.message,type:"error"})}})},Ei=E("@tanstack/react-query"),Lr=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:n,meta:i,metaData:o,liveMode:u,onLiveEvent:c,liveParams:d,dataProviderName:p})=>{let{resources:f}=W(),y=ae(),m=he(e,T(e,p,f),I(i,o),I(i,o)),{getOne:v}=y(T(e,p,f)),l=j(),s=ee(),{mutate:h}=pe({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy)}),P=fe();return Et({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:I(i,o),metaData:I(i,o),subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:u,onLiveEvent:c}),(0,Ei.useQuery)(m.detail(t),({queryKey:g,pageParam:w,signal:b})=>v({resource:e,id:t,meta:{...I(i,o)||{},queryContext:{queryKey:g,pageParam:w,signal:b}},metaData:{...I(i,o)||{},queryContext:{queryKey:g,pageParam:w,signal:b}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:g=>{var w;(w=r==null?void 0:r.onSuccess)==null||w.call(r,g);let b=typeof a=="function"?a(g,{id:t,...I(i,o)||{}},e):a;P(b)},onError:g=>{var w;h(g),(w=r==null?void 0:r.onError)==null||w.call(r,g);let b=typeof n=="function"?n(g,{id:t,...I(i,o)||{}},e):n;P(b,{key:`${t}-${e}-getOne-notification`,message:l("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})},wi=E("@tanstack/react-query"),mn=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:n,meta:i,metaData:o,liveMode:u,onLiveEvent:c,liveParams:d,dataProviderName:p})=>{let{resources:f}=W(),y=ae(),m=he(e,T(e,p,f),I(i,o),I(i,o)),{getMany:v,getOne:l}=y(T(e,p,f)),s=j(),h=ee(),{mutate:P}=pe({v3LegacyAuthProviderCompatible:Boolean(h==null?void 0:h.isLegacy)}),g=fe(),w=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Et({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:I(i,o),metaData:I(i,o),subscriptionType:"useMany",...d},channel:`resources/${e}`,enabled:w,liveMode:u,onLiveEvent:c}),(0,wi.useQuery)(m.many(t),({queryKey:b,pageParam:C,signal:L})=>v?v({resource:e,ids:t,metaData:{...I(i,o)||{},queryContext:{queryKey:b,pageParam:C,signal:L}}}):Wt(t.map(x=>l({resource:e,id:x,metaData:{...I(i,o)||{},queryContext:{queryKey:b,pageParam:C,signal:L}}}))),{...r,onSuccess:b=>{var C;(C=r==null?void 0:r.onSuccess)==null||C.call(r,b);let L=typeof a=="function"?a(b,t,e):a;g(L)},onError:b=>{var C;P(b),(C=r==null?void 0:r.onError)==null||C.call(r,b);let L=typeof n=="function"?n(b,t,e):n;g(L,{key:`${t[0]}-${e}-getMany-notification`,message:s("notifications.error",{statusCode:b.statusCode},`Error (status code: ${b.statusCode})`),description:b.message,type:"error"})}})},va=E("@tanstack/react-query"),Ot=N(E("react")),or=N(E("lodash/isEqual")),pn=Ot.default.createContext({notifications:[],notificationDispatch:()=>!1}),xi=[],Li=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,or.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,or.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,or.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},Ii=({children:e})=>{let[t,r]=(0,Ot.useReducer)(Li,xi),a={notifications:t,notificationDispatch:r};return Ot.default.createElement(pn.Provider,{value:a},e,typeof window<"u"&&t.map(n=>Ot.default.createElement(Tn,{key:`${n.id}-${n.resource}-queue`,notification:n})))},ga=N(E("pluralize")),fn=({mutationOptions:e}={})=>{let{resources:t}=W(),r=(0,va.useQueryClient)(),a=ae(),{mutationMode:n,undoableTimeout:i}=ut(),o=j(),u=ee(),{mutate:c}=pe({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),d=Ye(),{log:p}=Ze(),{notificationDispatch:f}=lt(),y=fe(),m=Ge();return(0,va.useMutation)(({id:v,values:l,resource:s,mutationMode:h,undoableTimeout:P,onCancel:g,meta:w,metaData:b,dataProviderName:C})=>{let L=h!=null?h:n,x=P!=null?P:i;return L!=="undoable"?a(T(s,C,t)).update({resource:s,id:v,variables:l,meta:I(w,b),metaData:I(w,b)}):new Promise((k,S)=>{let A=()=>{a(T(s,C,t)).update({resource:s,id:v,variables:l,meta:I(w,b),metaData:I(w,b)}).then(M=>k(M)).catch(M=>S(M))},O=()=>{S({message:"mutationCancelled"})};g&&g(O),f({type:"ADD",payload:{id:v,resource:s,cancelMutation:O,doMutation:A,seconds:x,isSilent:!!g}})})},{onMutate:async({resource:v,id:l,mutationMode:s,values:h,dataProviderName:P})=>{let g=he(v,T(v,P,t)),w=r.getQueriesData(g.resourceAll),b=s!=null?s:n;return await r.cancelQueries(g.resourceAll,void 0,{silent:!0}),b!=="pessimistic"&&(r.setQueriesData(g.list(),C=>{if(!C)return null;let L=C.data.map(x=>{var k;return((k=x.id)==null?void 0:k.toString())===(l==null?void 0:l.toString())?{id:l,...x,...h}:x});return{...C,data:L}}),r.setQueriesData(g.many(),C=>{if(!C)return null;let L=C.data.map(x=>{var k;return((k=x.id)==null?void 0:k.toString())===(l==null?void 0:l.toString())&&(x={id:l,...x,...h}),x});return{...C,data:L}}),r.setQueriesData(g.detail(l),C=>C?{...C,data:{...C.data,...h}}:null)),{previousQueries:w,queryKey:g}},onSettled:(v,l,{id:s,resource:h,dataProviderName:P,invalidates:g=["list","many","detail"]})=>{m({resource:h,dataProviderName:T(h,P,t),invalidates:g,id:s}),f({type:"REMOVE",payload:{id:s,resource:h}})},onSuccess:(v,{id:l,resource:s,successNotification:h,dataProviderName:P,values:g,meta:w,metaData:b},C)=>{var L;let x=ga.default.singular(s),k=typeof h=="function"?h(v,{id:l,values:g},s):h;y(k,{key:`${l}-${s}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${s}.${s}`,x)},`Successfully updated ${x}`),type:"success"}),d==null||d({channel:`resources/${s}`,type:"updated",payload:{ids:(L=v.data)!=null&&L.id?[v.data.id]:void 0},date:new Date});let S;if(C){let F=r.getQueryData(C.queryKey.detail(l));S=Object.keys(g||{}).reduce((q,D)=>{var R;return q[D]=(R=F==null?void 0:F.data)==null?void 0:R[D],q},{})}let{fields:A,operation:O,variables:M,...$}=I(w,b)||{};p==null||p.mutate({action:"update",resource:s,data:g,previousData:S,meta:{id:l,dataProviderName:T(s,P,t),...$}})},onError:(v,{id:l,resource:s,errorNotification:h,values:P},g)=>{if(g)for(let w of g.previousQueries)r.setQueryData(w[0],w[1]);if(v.message!=="mutationCancelled"){c==null||c(v);let w=ga.default.singular(s),b=typeof h=="function"?h(v,{id:l,values:P},s):h;y(b,{key:`${l}-${s}-notification`,message:o("notifications.editError",{resource:o(`${s}.${s}`,w),statusCode:v.statusCode},`Error when updating ${w} (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},ki=E("@tanstack/react-query"),ya=N(E("pluralize")),Ir=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=pe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ae(),n=Ge(),{resources:i}=W(),o=j(),u=Ye(),{log:c}=Ze(),d=fe();return(0,ki.useMutation)(({resource:p,values:f,meta:y,metaData:m,dataProviderName:v})=>a(T(p,v,i)).create({resource:p,variables:f,meta:I(y,m),metaData:I(y,m)}),{onSuccess:(p,{resource:f,successNotification:y,dataProviderName:m,invalidates:v=["list","many"],values:l,meta:s,metaData:h})=>{var P,g,w;let b=ya.default.singular(f),C=typeof y=="function"?y(p,l,f):y;d(C,{key:`create-${f}-notification`,message:o("notifications.createSuccess",{resource:o(`${f}.${f}`,b)},`Successfully created ${b}`),description:o("notifications.success","Success"),type:"success"}),n({resource:f,dataProviderName:T(f,m,i),invalidates:v}),u==null||u({channel:`resources/${f}`,type:"created",payload:{ids:(P=p==null?void 0:p.data)!=null&&P.id?[p.data.id]:void 0},date:new Date});let{fields:L,operation:x,variables:k,...S}=I(s,h)||{};c==null||c.mutate({action:"create",resource:f,data:l,meta:{dataProviderName:T(f,m,i),id:(w=(g=p==null?void 0:p.data)==null?void 0:g.id)!=null?w:void 0,...S}})},onError:(p,{resource:f,errorNotification:y,values:m})=>{r(p);let v=ya.default.singular(f),l=typeof y=="function"?y(p,m,f):y;d(l,{key:`create-${f}-notification`,description:p.message,message:o("notifications.createError",{resource:o(`${f}.${f}`,v),statusCode:p.statusCode},`There was an error creating ${v} (status code: ${p.statusCode})`),type:"error"})},...e})},ha=E("@tanstack/react-query"),ba=N(E("pluralize")),Si=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=pe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ae(),{resources:n}=W(),i=(0,ha.useQueryClient)(),{mutationMode:o,undoableTimeout:u}=ut(),{notificationDispatch:c}=lt(),d=j(),p=Ye(),{log:f}=Ze(),y=fe(),m=Ge();return(0,ha.useMutation)(({id:v,mutationMode:l,undoableTimeout:s,resource:h,onCancel:P,meta:g,metaData:w,dataProviderName:b,values:C})=>{let L=l!=null?l:o,x=s!=null?s:u;return L!=="undoable"?a(T(h,b,n)).deleteOne({resource:h,id:v,meta:I(g,w),metaData:I(g,w),variables:C}):new Promise((k,S)=>{let A=()=>{a(T(h,b,n)).deleteOne({resource:h,id:v,meta:I(g,w),variables:C}).then(M=>k(M)).catch(M=>S(M))},O=()=>{S({message:"mutationCancelled"})};P&&P(O),c({type:"ADD",payload:{id:v,resource:h,cancelMutation:O,doMutation:A,seconds:x,isSilent:!!P}})})},{onMutate:async({id:v,resource:l,mutationMode:s,dataProviderName:h})=>{let P=he(l,T(l,h,n)),g=s!=null?s:o;await i.cancelQueries(P.resourceAll,void 0,{silent:!0});let w=i.getQueriesData(P.resourceAll);return g!=="pessimistic"&&(i.setQueriesData(P.list(),b=>b?{data:b.data.filter(C=>{var L;return((L=C.id)==null?void 0:L.toString())!==v.toString()}),total:b.total-1}:null),i.setQueriesData(P.many(),b=>{if(!b)return null;let C=b.data.filter(L=>{var x;return((x=L.id)==null?void 0:x.toString())!==(v==null?void 0:v.toString())});return{...b,data:C}})),{previousQueries:w,queryKey:P}},onSettled:(v,l,{id:s,resource:h,dataProviderName:P,invalidates:g=["list","many"]})=>{m({resource:h,dataProviderName:T(h,P,n),invalidates:g}),c({type:"REMOVE",payload:{id:s,resource:h}})},onSuccess:(v,{id:l,resource:s,successNotification:h,dataProviderName:P,meta:g,metaData:w},b)=>{let C=ba.default.singular(s!=null?s:"");i.removeQueries(b==null?void 0:b.queryKey.detail(l));let L=typeof h=="function"?h(v,l,s):h;y(L,{key:`${l}-${s}-notification`,description:d("notifications.success","Success"),message:d("notifications.deleteSuccess",{resource:d(`${s}.${s}`,C)},`Successfully deleted a ${C}`),type:"success"}),p==null||p({channel:`resources/${s}`,type:"deleted",payload:{ids:l?[l]:[]},date:new Date});let{fields:x,operation:k,variables:S,...A}=I(g,w)||{};f==null||f.mutate({action:"delete",resource:s,meta:{id:l,dataProviderName:T(s,P,n),...A}}),i.removeQueries(b==null?void 0:b.queryKey.detail(l))},onError:(v,{id:l,resource:s,errorNotification:h},P)=>{if(P)for(let g of P.previousQueries)i.setQueryData(g[0],g[1]);if(v.message!=="mutationCancelled"){r(v);let g=ba.default.singular(s!=null?s:""),w=typeof h=="function"?h(v,l,s):h;y(w,{key:`${l}-${s}-notification`,message:d("notifications.deleteError",{resource:g,statusCode:v.statusCode},`Error (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},Ni=E("@tanstack/react-query"),qi=N(E("pluralize")),vn=({mutationOptions:e}={})=>{let t=ae(),{resources:r}=W(),a=j(),n=Ye(),i=fe(),o=Ge(),{log:u}=Ze();return(0,Ni.useMutation)(({resource:c,values:d,meta:p,metaData:f,dataProviderName:y})=>{let m=t(T(c,y,r));return m.createMany?m.createMany({resource:c,variables:d,meta:I(p,f),metaData:I(p,f)}):Wt(d.map(v=>m.create({resource:c,variables:v,meta:I(p,f),metaData:I(p,f)})))},{onSuccess:(c,{resource:d,successNotification:p,dataProviderName:f,invalidates:y=["list","many"],values:m,meta:v,metaData:l})=>{let s=qi.default.plural(d),h=typeof p=="function"?p(c,m,d):p;i(h,{key:`createMany-${d}-notification`,message:a("notifications.createSuccess",{resource:a(`${d}.${d}`,d)},`Successfully created ${s}`),description:a("notifications.success","Success"),type:"success"}),o({resource:d,dataProviderName:T(d,f,r),invalidates:y});let P=c==null?void 0:c.data.filter(L=>(L==null?void 0:L.id)!==void 0).map(L=>L.id);n==null||n({channel:`resources/${d}`,type:"created",payload:{ids:P},date:new Date});let{fields:g,operation:w,variables:b,...C}=I(v,l)||{};u==null||u.mutate({action:"createMany",resource:d,data:m,meta:{dataProviderName:T(d,f,r),ids:P,...C}})},onError:(c,{resource:d,errorNotification:p,values:f})=>{let y=typeof p=="function"?p(c,f,d):p;i(y,{key:`createMany-${d}-notification`,description:c.message,message:a("notifications.createError",{resource:a(`${d}.${d}`,d),statusCode:c.statusCode},`There was an error creating ${d} (status code: ${c.statusCode}`),type:"error"})},...e})},Pa=E("@tanstack/react-query"),Ca=N(E("pluralize")),Ai=({mutationOptions:e}={})=>{let{resources:t}=W(),r=(0,Pa.useQueryClient)(),a=ae(),n=j(),{mutationMode:i,undoableTimeout:o}=ut(),u=ee(),{mutate:c}=pe({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),{notificationDispatch:d}=lt(),p=Ye(),f=fe(),y=Ge(),{log:m}=Ze();return(0,Pa.useMutation)(({ids:v,values:l,resource:s,onCancel:h,mutationMode:P,undoableTimeout:g,meta:w,metaData:b,dataProviderName:C})=>{let L=P!=null?P:i,x=g!=null?g:o,k=a(T(s,C,t)),S=()=>k.updateMany?k.updateMany({resource:s,ids:v,variables:l,meta:I(w,b),metaData:I(w,b)}):Wt(v.map(A=>k.update({resource:s,id:A,variables:l,meta:I(w,b),metaData:I(w,b)})));return L!=="undoable"?S():new Promise((A,O)=>{let M=()=>{S().then(F=>A(F)).catch(F=>O(F))},$=()=>{O({message:"mutationCancelled"})};h&&h($),d({type:"ADD",payload:{id:v,resource:s,cancelMutation:$,doMutation:M,seconds:x,isSilent:!!h}})})},{onMutate:async({resource:v,ids:l,values:s,mutationMode:h,dataProviderName:P,meta:g,metaData:w})=>{let b=he(v,T(v,P,t),I(g,w),I(g,w)),C=h!=null?h:i;await r.cancelQueries(b.resourceAll,void 0,{silent:!0});let L=r.getQueriesData(b.resourceAll);if(C!=="pessimistic"){r.setQueriesData(b.list(),x=>{if(!x)return null;let k=x.data.map(S=>S.id!==void 0&&l.filter(A=>A!==void 0).map(String).includes(S.id.toString())?{...S,...s}:S);return{...x,data:k}}),r.setQueriesData(b.many(),x=>{if(!x)return null;let k=x.data.map(S=>S.id!==void 0&&l.filter(A=>A!==void 0).map(String).includes(S.id.toString())?{...S,...s}:S);return{...x,data:k}});for(let x of l)r.setQueriesData(b.detail(x),k=>{if(!k)return null;let S={...k.data,...s};return{...k,data:S}})}return{previousQueries:L,queryKey:b}},onSettled:(v,l,{ids:s,resource:h,dataProviderName:P})=>{y({resource:h,invalidates:["list","many"],dataProviderName:T(h,P,t)}),s.forEach(g=>y({resource:h,invalidates:["detail"],dataProviderName:T(h,P,t),id:g})),d({type:"REMOVE",payload:{id:s,resource:h}})},onSuccess:(v,{ids:l,resource:s,meta:h,metaData:P,dataProviderName:g,successNotification:w,values:b},C)=>{let L=Ca.default.singular(s),x=typeof w=="function"?w(v,{ids:l,values:b},s):w;f(x,{key:`${l}-${s}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${s}.${s}`,s)},`Successfully updated ${L}`),type:"success"}),p==null||p({channel:`resources/${s}`,type:"updated",payload:{ids:l.map(String)},date:new Date});let k=[];C&&l.forEach($=>{let F=r.getQueryData(C.queryKey.detail($));k.push(Object.keys(b||{}).reduce((q,D)=>{var R;return q[D]=(R=F==null?void 0:F.data)==null?void 0:R[D],q},{}))});let{fields:S,operation:A,variables:O,...M}=I(h,P)||{};m==null||m.mutate({action:"updateMany",resource:s,data:b,previousData:k,meta:{ids:l,dataProviderName:T(s,g,t),...M}})},onError:(v,{ids:l,resource:s,errorNotification:h,values:P},g)=>{if(g)for(let w of g.previousQueries)r.setQueryData(w[0],w[1]);if(v.message!=="mutationCancelled"){c==null||c(v);let w=Ca.default.singular(s),b=typeof h=="function"?h(v,{ids:l,values:P},s):h;f(b,{key:`${l}-${s}-updateMany-error-notification`,message:n("notifications.editError",{resource:w,statusCode:v.statusCode},`Error when updating ${w} (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},Ea=E("@tanstack/react-query"),$i=N(E("pluralize")),Di=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=pe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:a,undoableTimeout:n}=ut(),i=ae(),{notificationDispatch:o}=lt(),u=j(),c=Ye(),d=fe(),p=Ge(),{log:f}=Ze(),{resources:y}=W(),m=(0,Ea.useQueryClient)();return(0,Ea.useMutation)(({resource:v,ids:l,mutationMode:s,undoableTimeout:h,onCancel:P,meta:g,metaData:w,dataProviderName:b,values:C})=>{let L=s!=null?s:a,x=h!=null?h:n,k=i(T(v,b,y)),S=()=>k.deleteMany?k.deleteMany({resource:v,ids:l,meta:I(g,w),metaData:I(g,w),variables:C}):Wt(l.map(A=>k.deleteOne({resource:v,id:A,meta:I(g,w),metaData:I(g,w),variables:C})));return L!=="undoable"?S():new Promise((A,O)=>{let M=()=>{S().then(F=>A(F)).catch(F=>O(F))},$=()=>{O({message:"mutationCancelled"})};P&&P($),o({type:"ADD",payload:{id:l,resource:v,cancelMutation:$,doMutation:M,seconds:x,isSilent:!!P}})})},{onMutate:async({ids:v,resource:l,mutationMode:s,dataProviderName:h})=>{let P=he(l,T(l,h,y)),g=s!=null?s:a;await m.cancelQueries(P.resourceAll,void 0,{silent:!0});let w=m.getQueriesData(P.resourceAll);if(g!=="pessimistic"){m.setQueriesData(P.list(),b=>b?{data:b.data.filter(C=>C.id&&!v.map(String).includes(C.id.toString())),total:b.total-1}:null),m.setQueriesData(P.many(),b=>{if(!b)return null;let C=b.data.filter(L=>L.id?!v.map(String).includes(L.id.toString()):!1);return{...b,data:C}});for(let b of v)m.setQueriesData(P.detail(b),C=>!C||C.data.id==b?null:{...C})}return{previousQueries:w,queryKey:P}},onSettled:(v,l,{resource:s,ids:h,dataProviderName:P,invalidates:g=["list","many"]})=>{p({resource:s,dataProviderName:T(s,P,y),invalidates:g}),o({type:"REMOVE",payload:{id:h,resource:s}})},onSuccess:(v,{ids:l,resource:s,meta:h,metaData:P,dataProviderName:g,successNotification:w},b)=>{l.forEach(A=>m.removeQueries(b==null?void 0:b.queryKey.detail(A)));let C=typeof w=="function"?w(v,l,s):w;d(C,{key:`${l}-${s}-notification`,description:u("notifications.success","Success"),message:u("notifications.deleteSuccess",{resource:u(`${s}.${s}`,s)},`Successfully deleted ${s}`),type:"success"}),c==null||c({channel:`resources/${s}`,type:"deleted",payload:{ids:l},date:new Date});let{fields:L,operation:x,variables:k,...S}=I(h,P)||{};f==null||f.mutate({action:"deleteMany",resource:s,meta:{ids:l,dataProviderName:T(s,g,y),...S}}),l.forEach(A=>m.removeQueries(b==null?void 0:b.queryKey.detail(A)))},onError:(v,{ids:l,resource:s,errorNotification:h},P)=>{if(P)for(let g of P.previousQueries)m.setQueryData(g[0],g[1]);if(v.message!=="mutationCancelled"){r(v);let g=$i.default.singular(s),w=typeof h=="function"?h(v,l,s):h;d(w,{key:`${l}-${s}-notification`,message:u("notifications.deleteError",{resource:g,statusCode:v.statusCode},`Error (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},Mi=e=>{let t=ae(),{getApiUrl:r}=t(e);return r()},Fi=E("@tanstack/react-query"),Ri=({url:e,method:t,config:r,queryOptions:a,successNotification:n,errorNotification:i,meta:o,metaData:u,dataProviderName:c})=>{let d=ae(),{custom:p}=d(c),f=ee(),{mutate:y}=pe({v3LegacyAuthProviderCompatible:Boolean(f==null?void 0:f.isLegacy)}),m=j(),v=fe();if(p)return(0,Fi.useQuery)([c,"custom",t,e,{...r,...I(o,u)||{}}],({queryKey:l,pageParam:s,signal:h})=>p({url:e,method:t,...r,metaData:{...I(o,u)||{},queryContext:{queryKey:l,pageParam:s,signal:h}}}),{...a,onSuccess:l=>{var s;(s=a==null?void 0:a.onSuccess)==null||s.call(a,l);let h=typeof n=="function"?n(l,{...r,...I(o,u)||{}}):n;v(h)},onError:l=>{var s;y(l),(s=a==null?void 0:a.onError)==null||s.call(a,l);let h=typeof i=="function"?i(l,{...r,...I(o,u)||{}}):i;v(h,{key:`${t}-notification`,message:m("notifications.error",{statusCode:l.statusCode},`Error (status code: ${l.statusCode})`),description:l.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},Oi=E("@tanstack/react-query"),Ti=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=pe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=fe(),n=ae(),i=j();return(0,Oi.useMutation)(({url:o,method:u,values:c,meta:d,metaData:p,dataProviderName:f,config:y})=>{let{custom:m}=n(f);if(m)return m({url:o,method:u,payload:c,meta:I(d,p),metaData:I(d,p),headers:{...y==null?void 0:y.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(o,{successNotification:u,config:c,meta:d,metaData:p})=>{let f=typeof u=="function"?u(o,{...c,...I(d,p)||{}}):u;a(f)},onError:(o,{errorNotification:u,method:c,config:d,meta:p,metaData:f})=>{r(o);let y=typeof u=="function"?u(o,{...d,...I(p,f)||{}}):u;a(y,{key:`${c}-notification`,message:i("notifications.error",{statusCode:o.statusCode},`Error (status code: ${o.statusCode})`),description:o.message,type:"error"})},...e})},wa=E("react"),gn=N(E("react")),Ui=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),kr=gn.default.createContext(Ui()),Qi=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},gn.default.createElement(kr.Provider,{value:r},e)},ae=()=>{let e=(0,wa.useContext)(kr);return(0,wa.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},Wi=E("@tanstack/react-query"),zi=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:i,queryOptions:o,successNotification:u,errorNotification:c,meta:d,metaData:p,liveMode:f,onLiveEvent:y,liveParams:m,dataProviderName:v})=>{let{resources:l}=W(),s=ae(),h=j(),P=ee(),{mutate:g}=pe({v3LegacyAuthProviderCompatible:Boolean(P==null?void 0:P.isLegacy)}),w=fe(),b=T(e,v,l),C=I(d,p),L=I(r,t==null?void 0:t.filters),x=I(i,t==null?void 0:t.sort),k=I(a,t==null?void 0:t.hasPagination),S=dn({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:k}),A=S.mode==="server",O={meta:C,metaData:C,filters:L,hasPagination:A,pagination:S,sorters:x,config:{...t,sort:x}},M=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,$=he(e,b,C,C),{getList:F}=s(b);return Et({resource:e,types:["*"],params:{meta:C,metaData:C,pagination:S,hasPagination:A,sort:x,sorters:x,filters:L,subscriptionType:"useList",...m},channel:`resources/${e}`,enabled:M,liveMode:f,onLiveEvent:y}),(0,Wi.useInfiniteQuery)($.list({filters:L,hasPagination:A,...A&&{pagination:S},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:q,pageParam:D,signal:R})=>{let K={...S,current:D};return F({resource:e,pagination:K,hasPagination:A,filters:L,sort:x,sorters:x,meta:{...C||{},queryContext:{queryKey:q,pageParam:D,signal:R}},metaData:{...C||{},queryContext:{queryKey:q,pageParam:D,signal:R}}}).then(({data:re,total:Z,...z})=>({data:re,total:Z,pagination:K,...z}))},{getNextPageParam:q=>sn(q),getPreviousPageParam:q=>un(q),...o,onSuccess:q=>{var D;(D=o==null?void 0:o.onSuccess)==null||D.call(o,q);let R=typeof u=="function"?u(q,O,e):u;w(R)},onError:q=>{var D;g(q),(D=o==null?void 0:o.onError)==null||D.call(o,q);let R=typeof c=="function"?c(q,O,e):c;w(R,{key:`${e}-useInfiniteList-notification`,message:h("notifications.error",{statusCode:q.statusCode},`Error (status code: ${q.statusCode})`),description:q.message,type:"error"})}})},ir=E("react"),Bi=E("@tanstack/react-query"),yn=N(E("react")),Ct=yn.default.createContext(void 0),ji=({liveProvider:e,children:t})=>yn.default.createElement(Ct.Provider,{value:e},t),Et=({resource:e,params:t,channel:r,types:a,enabled:n=!0,liveMode:i,onLiveEvent:o})=>{let u=(0,Bi.useQueryClient)(),c=he(e),d=(0,ir.useContext)(Ct),{liveMode:p,onLiveEvent:f}=(0,ir.useContext)(Ue),y=i!=null?i:p;(0,ir.useEffect)(()=>{let m;return y&&y!=="off"&&n&&(m=d==null?void 0:d.subscribe({channel:r,params:{resource:e,...t},types:a,callback:v=>{y==="auto"&&u.invalidateQueries(c.resourceAll),o==null||o(v),f==null||f(v)}})),()=>{m&&(d==null||d.unsubscribe(m))}},[n])},Ki=E("react"),hn=e=>{let{liveMode:t}=(0,Ki.useContext)(Ue);return e!=null?e:t},xa=E("react"),Hi=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:n})=>{let i=(0,xa.useContext)(Ct);(0,xa.useEffect)(()=>{let o;return a&&(o=i==null?void 0:i.subscribe({channel:t,params:e,types:r,callback:n})),()=>{o&&(i==null||i.unsubscribe(o))}},[a])},_i=E("react"),Ye=()=>{let e=(0,_i.useContext)(Ct);return e==null?void 0:e.publish},Vi=E("react"),bn=N(E("react")),Yi=E("react"),Zi=E("react"),Gi=N(E("lodash/isEqual")),Ji=e=>{let t=(0,Zi.useRef)(e);return(0,Gi.default)(t.current,e)||(t.current=e),t.current},Pn=(e,t)=>{let r=Ji(t);return(0,Yi.useMemo)(e,r)},wt=bn.default.createContext({resources:[]}),Xi=({resources:e,children:t})=>{let r=Pn(()=>cn(e!=null?e:[]),[e]);return bn.default.createElement(wt.Provider,{value:{resources:r}},t)},Cn=N(E("react")),En=Cn.default.createContext("new"),el=En.Provider,Y=()=>Cn.default.useContext(En),tl=N(E("react")),wn=N(E("react")),xn={},xt=(0,wn.createContext)(xn),rl=({children:e,router:t})=>wn.default.createElement(xt.Provider,{value:t!=null?t:xn},e),La=N(E("react")),Ln=()=>{let e=(0,La.useContext)(xt);return La.default.useMemo(()=>{var t;return(t=e==null?void 0:e.parse)!=null?t:()=>()=>({})},[e==null?void 0:e.parse])()},be=()=>{let e=Ln();return tl.default.useMemo(()=>e(),[e])};function W(e){var t,r;let{resources:a}=(0,Vi.useContext)(wt),n=Y(),i=be(),o={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},u=zt(),{useParams:c}=ne(),d=c();if(n==="legacy"){let y=o.resourceNameOrRouteName?o.resourceNameOrRouteName:d.resource,m=y?u(y):void 0,v=(t=o==null?void 0:o.recordItemId)!=null?t:d.id,l=d.action,s=(r=o==null?void 0:o.resourceName)!=null?r:m==null?void 0:m.name;return{resources:a,resource:m,resourceName:s,id:v,action:l}}let p,f=typeof e=="string"?e:o==null?void 0:o.resourceNameOrRouteName;if(f){let y=V(f,a);y?p=y:p={name:f}}else i!=null&&i.resource&&(p=i.resource);return{resources:a,resource:p,resourceName:p==null?void 0:p.name,id:i.id,action:i.action}}var Ia=E("react"),zt=()=>{let{resources:e}=(0,Ia.useContext)(wt);return(0,Ia.useCallback)(t=>V(t,e,!0)||{name:t,route:t},[e])},al=E("react"),lt=()=>{let{notifications:e,notificationDispatch:t}=(0,al.useContext)(pn);return{notifications:e,notificationDispatch:t}},nl=E("react"),In=N(E("react")),Sr=(0,In.createContext)({}),ol=({open:e,close:t,children:r})=>In.default.createElement(Sr.Provider,{value:{open:e,close:t}},r),Qe=()=>{let{open:e,close:t}=(0,nl.useContext)(Sr);return{open:e,close:t}},il=E("react"),fe=()=>{let{open:e}=Qe();return(0,il.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},ka=E("react"),kn=N(E("react")),st=kn.default.createContext({}),ll=({children:e,i18nProvider:t})=>kn.default.createElement(st.Provider,{value:{i18nProvider:t}},e),sl=()=>{let{i18nProvider:e}=(0,ka.useContext)(st);return(0,ka.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},Sa=E("react"),j=()=>{let{i18nProvider:e}=(0,Sa.useContext)(st);return(0,Sa.useMemo)(()=>{function t(r,a,n){var i,o;return(o=(i=e==null?void 0:e.translate(r,a,n))!=null?i:n)!=null?o:typeof a=="string"&&typeof n>"u"?a:r}return t},[e])},Na=E("react"),ul=()=>{let{i18nProvider:e}=(0,Na.useContext)(st);return(0,Na.useCallback)(()=>e==null?void 0:e.getLocale(),[])},cl=E("react"),ut=()=>{let{mutationMode:e,undoableTimeout:t}=(0,cl.useContext)(Ue);return{mutationMode:e,undoableTimeout:t}},qa=E("react"),gr=N(E("react")),Sn=gr.default.createContext({}),dl=({children:e})=>{let[t,r]=(0,gr.useState)(!1);return gr.default.createElement(Sn.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},Nr=()=>{let{warnWhenUnsavedChanges:e}=(0,qa.useContext)(Ue),{warnWhen:t,setWarnWhen:r}=(0,qa.useContext)(Sn);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},ml=E("react"),Nn=()=>{let{syncWithLocation:e}=(0,ml.useContext)(Ue);return{syncWithLocation:e}},pl=E("react"),fl=()=>{let{Title:e}=(0,pl.useContext)(Ue);return e},vl=E("react"),qr=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:i,hasDashboard:o,mutationMode:u,syncWithLocation:c,undoableTimeout:d,warnWhenUnsavedChanges:p,DashboardPage:f,LoginPage:y,catchAll:m,options:v}=(0,vl.useContext)(Ue);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:i,hasDashboard:o,mutationMode:u,syncWithLocation:c,undoableTimeout:d,warnWhenUnsavedChanges:p,DashboardPage:f,LoginPage:y,catchAll:m,options:v}},gl=E("react"),yl=E("export-to-csv-fix-source-map"),hl=({resourceName:e,resource:t,sorter:r,sorters:a,filters:n,maxItemCount:i,pageSize:o=20,mapData:u=m=>m,exportOptions:c,meta:d,metaData:p,dataProviderName:f,onError:y}={})=>{var m;let[v,l]=(0,gl.useState)(!1),s=ae(),{resource:h,resources:P}=W(),g=`${Er(h==null?void 0:h.name,"plural")}-${new Date().toLocaleString()}`,{getList:w}=s(T((m=h==null?void 0:h.identifier)!=null?m:h==null?void 0:h.name,f,P));return{isLoading:v,triggerExport:async()=>{var b;l(!0);let C=[],L=1,x=!0;for(;x;)try{let{data:k,total:S}=await w({resource:(b=h==null?void 0:h.name)!=null?b:"",filters:n,sort:I(a,r),sorters:I(a,r),pagination:{current:L,pageSize:o,mode:"server"},meta:I(d,p),metaData:I(d,p)});L++,C.push(...k),i&&C.length>=i&&(C=C.slice(0,i),x=!1),S===C.length&&(x=!1)}catch(k){l(!1),x=!1,y==null||y(k);return}new yl.ExportToCsv({filename:g,useKeysAsHeaders:!0,...c}).generateCsv(C.map(u)),l(!1)}}},Aa=N(E("react")),bl=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:n,redirect:i,successNotification:o,errorNotification:u,meta:c,metaData:d,mutationMode:p,liveMode:f,onLiveEvent:y,liveParams:m,undoableTimeout:v,dataProviderName:l,invalidates:s,queryOptions:h,createMutationOptions:P,updateMutationOptions:g}={})=>{let{options:w}=qr(),{resources:b}=W(),C=Y(),{resource:L,id:x,action:k}=be(),{useParams:S}=ne(),{resource:A,action:O,id:M}=S(),$=typeof L=="string"?L:L==null?void 0:L.name,F=!e||e===(C==="legacy"?A:$)?r!=null?r:C==="legacy"?M:x:r,[q,D]=Aa.default.useState(F);Aa.default.useEffect(()=>{F!==q&&D(r)},[r]);let R=e!=null?e:C==="legacy"?A:$,K=C==="legacy"?O:k,re=t!=null?t:K==="edit"||K==="clone"?K:"create",Z=zt(),z;if(C==="legacy")R&&(z=Z(R));else if(e){let B=V(e,b);B?z=B:z={name:e,route:e}}else if(typeof L=="string"){let B=V(L,b);B?z=B:z={name:L,route:L}}else z=L;let{mutationMode:oe}=ut(),ke=p!=null?p:oe,We=re==="create",G=re==="edit",te=re==="clone",ft=bi({redirectFromProps:i,action:re,redirectOptions:w.redirect}),Gt=q!==void 0&&(G||te),It=Lr({resource:z==null?void 0:z.name,id:q!=null?q:"",queryOptions:{enabled:Gt,...h},liveMode:f,onLiveEvent:y,liveParams:m,meta:I(c,d),metaData:I(c,d),dataProviderName:l}),{isFetching:vt}=It,gt=Ir({mutationOptions:P}),{mutate:kt,isLoading:Se}=gt,yt=fn({mutationOptions:g}),{mutate:Fe,isLoading:Jt}=yt,{setWarnWhen:ze}=Nr(),Re=qn();return{...We||te?{formLoading:vt||Se,mutationResult:gt,onFinish:async B=>{ze(!1);let ie=Ne=>{Re({redirect:ft,resource:z,id:Ne,meta:d})};return ke!=="pessimistic"&&setTimeout(()=>{ie()}),new Promise((Ne,Be)=>{if(ke!=="pessimistic"&&Ne(),!!z)return kt({values:B,resource:z.name,successNotification:o,errorNotification:u,meta:I(c,d),metaData:I(c,d),dataProviderName:l,invalidates:s},{onSuccess:(we,qe,le)=>{var Ae;a&&a(we,B,le);let je=(Ae=we==null?void 0:we.data)==null?void 0:Ae.id;ie(je),Ne(we)},onError:(we,qe,le)=>{if(n)return n(we,B,le);Be()}})})}}:{formLoading:vt||Jt,mutationResult:yt,onFinish:async B=>{if(ze(!1),!z)return;let ie={id:q!=null?q:"",values:B,resource:z.name,mutationMode:ke,undoableTimeout:v,successNotification:o,errorNotification:u,meta:I(c,d),metaData:I(c,d),dataProviderName:l,invalidates:s},Ne=()=>{D(F),Re({redirect:ft,resource:z,id:q,meta:d})};return ke!=="pessimistic"&&setTimeout(()=>{Ne()}),new Promise((Be,we)=>(ke!=="pessimistic"&&Be(),setTimeout(()=>{Fe(ie,{onSuccess:(qe,le,Ae)=>{a&&a(qe,B,Ae),ke==="pessimistic"&&Ne(),Be(qe)},onError:(qe,le,Ae)=>{if(n)return n(qe,B,Ae);we()}})})))}},queryResult:It,id:q,setId:D,redirect:(B,ie)=>{Re({redirect:B!==void 0?B:G?"list":"edit",resource:z,id:ie!=null?ie:q,meta:d})}}},Pl=E("react"),qn=()=>{let{show:e,edit:t,list:r,create:a}=Ce();return(0,Pl.useCallback)(({redirect:n,resource:i,id:o,meta:u={}})=>{if(n&&i)return!!i.show&&n==="show"&&o?e(i,o,void 0,u):!!i.edit&&n==="edit"&&o?t(i,o,void 0,u):!!i.create&&n==="create"?a(i,void 0,u):r(i,"push",u)},[])},$a=N(E("react")),Pe=()=>{let e=(0,$a.useContext)(xt);return $a.default.useMemo(()=>{var t;return(t=e==null?void 0:e.go)!=null?t:()=>()=>{}},[e==null?void 0:e.go])()},Da=N(E("react")),An=()=>{let e=(0,Da.useContext)(xt);return Da.default.useMemo(()=>{var t;return(t=e==null?void 0:e.back)!=null?t:()=>()=>{}},[e==null?void 0:e.back])()},Ce=()=>{let{resources:e}=W(),t=Y(),{useHistory:r}=ne(),a=r(),n=be(),i=Pe(),o=An(),u=(m,v="push")=>{t==="legacy"?a[v](m):i({to:m,type:v})},c=(m,v={})=>{var l,s,h;if(t==="legacy"){let P=typeof m=="string"?(l=V(m,e,!0))!=null?l:{name:m,route:m}:m,g=me(P,e,!0).find(w=>w.action==="create");return g?ge(g.route,n,v):""}else{let P=typeof m=="string"?(s=V(m,e))!=null?s:{name:m}:m,g=(h=me(P,e).find(w=>w.action==="create"))==null?void 0:h.route;return g?i({to:ge(g,n,v),type:"path"}):""}},d=(m,v,l={})=>{var s,h,P;let g=encodeURIComponent(v);if(t==="legacy"){let w=typeof m=="string"?(s=V(m,e,!0))!=null?s:{name:m,route:m}:m,b=me(w,e,!0).find(C=>C.action==="edit");return b?ge(b.route,n,{...l,id:g}):""}else{let w=typeof m=="string"?(h=V(m,e))!=null?h:{name:m}:m,b=(P=me(w,e).find(C=>C.action==="edit"))==null?void 0:P.route;return b?i({to:ge(b,n,{...l,id:g}),type:"path"}):""}},p=(m,v,l={})=>{var s,h,P;let g=encodeURIComponent(v);if(t==="legacy"){let w=typeof m=="string"?(s=V(m,e,!0))!=null?s:{name:m,route:m}:m,b=me(w,e,!0).find(C=>C.action==="clone");return b?ge(b.route,n,{...l,id:g}):""}else{let w=typeof m=="string"?(h=V(m,e))!=null?h:{name:m}:m,b=(P=me(w,e).find(C=>C.action==="clone"))==null?void 0:P.route;return b?i({to:ge(b,n,{...l,id:g}),type:"path"}):""}},f=(m,v,l={})=>{var s,h,P;let g=encodeURIComponent(v);if(t==="legacy"){let w=typeof m=="string"?(s=V(m,e,!0))!=null?s:{name:m,route:m}:m,b=me(w,e,!0).find(C=>C.action==="show");return b?ge(b.route,n,{...l,id:g}):""}else{let w=typeof m=="string"?(h=V(m,e))!=null?h:{name:m}:m,b=(P=me(w,e).find(C=>C.action==="show"))==null?void 0:P.route;return b?i({to:ge(b,n,{...l,id:g}),type:"path"}):""}},y=(m,v={})=>{var l,s,h;if(t==="legacy"){let P=typeof m=="string"?(l=V(m,e,!0))!=null?l:{name:m,route:m}:m,g=me(P,e,!0).find(w=>w.action==="list");return g?ge(g.route,n,v):""}else{let P=typeof m=="string"?(s=V(m,e))!=null?s:{name:m}:m,g=(h=me(P,e).find(w=>w.action==="list"))==null?void 0:h.route;return g?i({to:ge(g,n,v),type:"path"}):""}};return{create:(m,v="push",l={})=>{u(c(m,l),v)},createUrl:c,edit:(m,v,l="push",s={})=>{u(d(m,v,s),l)},editUrl:d,clone:(m,v,l="push",s={})=>{u(p(m,v,s),l)},cloneUrl:p,show:(m,v,l="push",s={})=>{u(f(m,v,s),l)},showUrl:f,list:(m,v="push",l={})=>{u(y(m,l),v)},listUrl:y,push:(m,...v)=>{t==="legacy"?a.push(m,...v):i({to:m,type:"push"})},replace:(m,...v)=>{t==="legacy"?a.replace(m,...v):i({to:m,type:"replace"})},goBack:()=>{t==="legacy"?a.goBack():o()}}},Ma=N(E("react")),Cl=({resource:e,id:t,successNotification:r,errorNotification:a,meta:n,metaData:i,liveMode:o,onLiveEvent:u,dataProviderName:c,queryOptions:d}={})=>{let p=Y(),{resources:f}=W(),{useParams:y}=ne(),{resource:m,id:v}=be(),{resource:l,id:s}=y(),h=m==null?void 0:m.name,P=!e||e===(p==="legacy"?l:h)?t!=null?t:p==="legacy"?s:v:t,[g,w]=(0,Ma.useState)(P);Ma.default.useEffect(()=>{P!==g&&w(P)},[P]);let b=e!=null?e:p==="legacy"?l:h,C,L=zt();if(p==="legacy")b&&(C=L(b));else if(e){let x=V(e,f);x?C=x:C={name:e,route:e}}else if(typeof m=="string"){let x=V(m,f);x?C=x:C={name:m,route:m}}else C=m;return{queryResult:Lr({resource:C==null?void 0:C.name,id:g!=null?g:"",queryOptions:{enabled:g!==void 0,...d},successNotification:r,errorNotification:a,meta:I(n,i),metaData:I(n,i),liveMode:o,onLiveEvent:u,dataProviderName:c}),showId:g,setShowId:w}},$t=E("react"),El=E("papaparse"),wl=N(E("lodash/chunk")),xl=({resourceName:e,resource:t,mapData:r=p=>p,paparseOptions:a,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:i,meta:o,metaData:u,onProgress:c,dataProviderName:d}={})=>{let[p,f]=(0,$t.useState)(0),[y,m]=(0,$t.useState)(0),[v,l]=(0,$t.useState)(!1),{resource:s}=W(t!=null?t:e),h=vn(),P=Ir(),g;n===1?g=P:g=h;let w=()=>{m(0),f(0),l(!1)},b=L=>{let x={succeeded:L.filter(k=>k.type==="success"),errored:L.filter(k=>k.type==="error")};i==null||i(x),l(!1)};(0,$t.useEffect)(()=>{c==null||c({totalAmount:y,processedAmount:p})},[y,p]);let C=({file:L})=>(w(),new Promise(x=>{l(!0),(0,El.parse)(L,{complete:async({data:k})=>{let S=Ja(k,r);if(m(S.length),n===1){let A=S.map(M=>async()=>{var $;return{response:await P.mutateAsync({resource:($=s==null?void 0:s.name)!=null?$:"",values:M,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:I(o,u),metaData:I(o,u)}),value:M}}),O=await fa(A,({response:M,value:$})=>(f(F=>F+1),{response:[M.data],type:"success",request:[$]}),(M,$)=>({response:[M],type:"error",request:[S[$]]}));x(O)}else{let A=(0,wl.default)(S,n),O=A.map($=>async()=>{var F;return{response:await h.mutateAsync({resource:(F=s==null?void 0:s.name)!=null?F:"",values:$,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:I(o,u),metaData:I(o,u)}),value:$,currentBatchLength:$.length}}),M=await fa(O,({response:$,currentBatchLength:F,value:q})=>(f(D=>D+F),{response:$.data,type:"success",request:q}),($,F)=>({response:[$],type:"error",request:A[F]}));x(M)}},...a})}).then(x=>(b(x),x)));return{inputProps:{type:"file",accept:".csv",onChange:L=>{L.target.files&&L.target.files.length>0&&C({file:L.target.files[0]})}},mutationResult:g,isLoading:v,handleChange:C}},lr=E("react"),Ll=({defaultVisible:e=!1}={})=>{let[t,r]=(0,lr.useState)(e),a=(0,lr.useCallback)(()=>r(!0),[t]),n=(0,lr.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:n}},Il=N(E("react")),Ar=()=>{let e=Y(),{resource:t,resources:r}=W(),a=be();return Il.default.useCallback(({resource:n,action:i,meta:o})=>{var u;let c=n||t;if(!c)return;let d=(u=me(c,r,e==="legacy").find(p=>p.action===i))==null?void 0:u.route;return d?ge(d,a,o):void 0},[r,t,a])},kl=({resource:e,action:t,meta:r,legacy:a})=>Ar()({resource:e,action:t,meta:r,legacy:a}),Fa=N(E("react")),Bt=()=>{let e=(0,Fa.useContext)(xt);return e!=null&&e.Link?e.Link:({to:t,...r})=>Fa.default.createElement("a",{href:t,...r})},Sl=E("react"),$n=N(E("react")),Oe={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Nl=$n.default.createContext(Oe),$r=Nl,ql=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:i,routes:o})=>$n.default.createElement($r.Provider,{value:{useHistory:t!=null?t:Oe.useHistory,useLocation:r!=null?r:Oe.useLocation,useParams:a!=null?a:Oe.useParams,Prompt:n!=null?n:Oe.Prompt,Link:i!=null?i:Oe.Link,routes:o!=null?o:Oe.routes}},e),ne=()=>{let e=(0,Sl.useContext)($r),{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:i,routes:o}=e!=null?e:Oe;return{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:i,routes:o}},Al=E("react"),$l=E("@tanstack/react-query"),Dn=N(E("react")),jt=Dn.default.createContext({}),Dl=({can:e,children:t})=>Dn.default.createElement(jt.Provider,{value:{can:e}},t),Ml=e=>{let{icon:t,list:r,edit:a,create:n,show:i,clone:o,children:u,meta:c,options:d,...p}=e,{icon:f,...y}=c!=null?c:{},{icon:m,...v}=d!=null?d:{};return{...p,...c?{meta:y}:{},...d?{options:v}:{}}},Mn=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:n}=(0,Al.useContext)(jt),{resource:i,...o}=r!=null?r:{},u=Ml(i!=null?i:{}),c=(0,$l.useQuery)(["useCan",{action:e,resource:t,params:{...o,resource:u},enabled:a==null?void 0:a.enabled}],()=>{var d;return(d=n==null?void 0:n({action:e,resource:t,params:r}))!=null?d:Promise.resolve({can:!0})},{enabled:typeof n<"u",...a,retry:!1});return typeof n>"u"?{data:{can:!0}}:c},Fl=E("react"),Rl=()=>{let{can:e}=(0,Fl.useContext)(jt);return{can:e}},tt=E("react"),Ol=N(E("lodash/uniqBy")),Tl=N(E("lodash/debounce")),Dt=N(E("lodash/get")),Ul=e=>{var t,r,a;let[n,i]=(0,tt.useState)([]),[o,u]=(0,tt.useState)([]),[c,d]=(0,tt.useState)([]),{resource:p,sort:f,sorters:y,filters:m=[],optionLabel:v="title",optionValue:l="id",debounce:s=300,successNotification:h,errorNotification:P,defaultValueQueryOptions:g,queryOptions:w,fetchSize:b,pagination:C,hasPagination:L=!1,liveMode:x,defaultValue:k=[],onLiveEvent:S,onSearch:A,liveParams:O,meta:M,metaData:$,dataProviderName:F}=e,{resources:q}=W(),D=V(p,q),R=(t=D==null?void 0:D.name)!=null?t:p,K=Array.isArray(k)?k:[k],re=(0,tt.useCallback)(G=>{d(G.data.map(te=>({label:(0,Dt.default)(te,v),value:(0,Dt.default)(te,l)})))},[v,l]),Z=g!=null?g:w,z=mn({resource:R,ids:K,queryOptions:{...Z,enabled:K.length>0&&((r=g==null?void 0:g.enabled)!=null?r:!0),onSuccess:G=>{var te;re(G),(te=Z==null?void 0:Z.onSuccess)==null||te.call(Z,G)}},meta:I(M,$),metaData:I(M,$),liveMode:"off",dataProviderName:F}),oe=(0,tt.useCallback)(G=>{u(G.data.map(te=>({label:(0,Dt.default)(te,v),value:(0,Dt.default)(te,l)})))},[v,l]),ke=xr({resource:R,sorters:I(y,f),filters:m.concat(n),pagination:{current:C==null?void 0:C.current,pageSize:(a=C==null?void 0:C.pageSize)!=null?a:b,mode:C==null?void 0:C.mode},hasPagination:L,queryOptions:{...w,onSuccess:G=>{var te;oe(G),(te=w==null?void 0:w.onSuccess)==null||te.call(w,G)}},successNotification:h,errorNotification:P,meta:I(M,$),metaData:I(M,$),liveMode:x,liveParams:O,onLiveEvent:S,dataProviderName:F}),We=G=>{if(A){i(A(G));return}if(G)i([{field:v,operator:"contains",value:G}]);else{i([]);return}};return{queryResult:ke,defaultValueQueryResult:z,options:(0,tt.useMemo)(()=>(0,Ol.default)([...o,...c],"value"),[o,c]),onSearch:(0,Tl.default)(We,s)}},_e=N(E("react")),Ra=N(E("qs")),Mt=N(E("lodash/differenceWith")),Ft=N(E("lodash/isEqual")),Ql=N(E("warn-once")),Oa=[],Ta=[];function Wl({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:n,permanentSorter:i=Ta,defaultSetFilterBehavior:o,initialFilter:u,permanentFilter:c=Oa,filters:d,sorters:p,syncWithLocation:f,resource:y,successNotification:m,errorNotification:v,queryOptions:l,liveMode:s,onLiveEvent:h,liveParams:P,meta:g,metaData:w,dataProviderName:b}={}){var C,L,x,k,S,A,O,M,$,F;let{syncWithLocation:q}=Nn(),D=f!=null?f:q,R=hn(s),K=Y(),{useLocation:re}=ne(),{search:Z,pathname:z}=re(),oe=be(),ke=r===!1?"off":"server",We=((C=a==null?void 0:a.mode)!=null?C:ke)!=="off",G=I(a==null?void 0:a.current,e),te=I(a==null?void 0:a.pageSize,t),ft=I(g,w),{parsedCurrent:Gt,parsedPageSize:It,parsedSorter:vt,parsedFilters:gt}=Cr(Z!=null?Z:"?"),kt=I(d==null?void 0:d.initial,u),Se=(L=I(d==null?void 0:d.permanent,c))!=null?L:Oa,yt=I(p==null?void 0:p.initial,n),Fe=(x=I(p==null?void 0:p.permanent,i))!=null?x:Ta,Jt=(k=I(d==null?void 0:d.defaultBehavior,o))!=null?k:"merge",ze,Re,B,ie;D?(ze=((S=oe==null?void 0:oe.params)==null?void 0:S.current)||Gt||G||1,Re=((A=oe==null?void 0:oe.params)==null?void 0:A.pageSize)||It||te||10,B=((O=oe==null?void 0:oe.params)==null?void 0:O.sorters)||(vt.length?vt:yt),ie=((M=oe==null?void 0:oe.params)==null?void 0:M.filters)||(gt.length?gt:kt)):(ze=G||1,Re=te||10,B=yt,ie=kt);let{replace:Ne}=Ce(),Be=Pe(),{resource:we}=W(y),qe=we==null?void 0:we.name;_e.default.useEffect(()=>{(0,Ql.default)(typeof qe>"u","useTable: `resource` is not defined.")},[qe]);let[le,Ae]=(0,_e.useState)(vr(Fe,B!=null?B:[])),[je,St]=(0,_e.useState)(fr(Se,ie!=null?ie:[])),[ht,Gr]=(0,_e.useState)(ze),[Ke,Jr]=(0,_e.useState)(Re),Lo=({pagination:{current:H,pageSize:ve},sorter:Nt,filters:qt})=>{var At;if(K==="new")return(At=Be({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...We?{current:H,pageSize:ve}:{},sorters:Nt,filters:qt,...Xr()}}))!=null?At:"";{let bt=Ra.default.parse(Z==null?void 0:Z.substring(1)),ra=mr({pagination:{pageSize:ve,current:H},sorters:le!=null?le:Nt,filters:qt,...bt});return`${z!=null?z:""}?${ra!=null?ra:""}`}};(0,_e.useEffect)(()=>{Z===""&&(Gr(ze),Jr(Re),Ae(vr(Fe,B!=null?B:[])),St(fr(Se,ie!=null?ie:[])))},[Z]);let Xr=()=>{var H;if(K==="new"){let{sorters:ve,filters:Nt,pageSize:qt,current:At,...bt}=(H=oe==null?void 0:oe.params)!=null?H:{};return bt}else{let{sorter:ve,filters:Nt,pageSize:qt,current:At,...bt}=Ra.default.parse(Z,{ignoreQueryPrefix:!0});return bt}};(0,_e.useEffect)(()=>{if(D){let H=Xr();if(K==="new")Be({type:"replace",options:{keepQuery:!0},query:{...We?{pageSize:Ke,current:ht}:{},sorters:(0,Mt.default)(le,Fe,Ft.default),filters:(0,Mt.default)(je,Se,Ft.default)}});else{let ve=mr({...We?{pagination:{pageSize:Ke,current:ht}}:{},sorters:(0,Mt.default)(le,Fe,Ft.default),filters:(0,Mt.default)(je,Se,Ft.default),...H});return Ne==null?void 0:Ne(`${z}?${ve}`,void 0,{shallow:!0})}}},[D,ht,Ke,le,je]);let ea=xr({resource:qe,hasPagination:r,pagination:{current:ht,pageSize:Ke,mode:a==null?void 0:a.mode},filters:Pt(Se,je),sorters:pr(Fe,le),queryOptions:l,successNotification:m,errorNotification:v,meta:ft,metaData:ft,liveMode:R,liveParams:P,onLiveEvent:h,dataProviderName:b}),Io=H=>{St(ve=>Pt(Se,H,ve))},ko=H=>{St(Pt(Se,H))},So=H=>{St(ve=>Pt(Se,H(ve)))},No=(H,ve=Jt)=>{typeof H=="function"?So(H):ve==="replace"?ko(H):Io(H)},ta=H=>{Ae(()=>pr(Fe,H))};return{tableQueryResult:ea,sorters:le,setSorters:ta,sorter:le,setSorter:ta,filters:je,setFilters:No,current:ht,setCurrent:Gr,pageSize:Ke,setPageSize:Jr,pageCount:Ke?Math.ceil(((F=($=ea.data)==null?void 0:$.total)!=null?F:0)/Ke):1,createLinkForSyncWithLocation:Lo}}var Ua=E("react"),sr=E("@tanstack/react-query"),Fn=N(E("react")),Kt=Fn.default.createContext({}),zl=({create:e,get:t,update:r,children:a})=>Fn.default.createElement(Kt.Provider,{value:{create:e,get:t,update:r}},a),Ze=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,sr.useQueryClient)(),a=(0,Ua.useContext)(Kt),n=ee(),{resources:i}=(0,Ua.useContext)(wt),{data:o,refetch:u,isLoading:c}=_a({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy),queryOptions:{enabled:!!a}}),d=(0,sr.useMutation)(async f=>{var y,m,v,l,s;let h=V(f.resource,i),P=I((y=h==null?void 0:h.meta)==null?void 0:y.audit,(m=h==null?void 0:h.options)==null?void 0:m.audit,(l=(v=h==null?void 0:h.options)==null?void 0:v.auditLog)==null?void 0:l.permissions);if(P&&!ui(P,f.action))return;let g;return c&&(g=await u()),await((s=a.create)==null?void 0:s.call(a,{...f,author:o!=null?o:g==null?void 0:g.data}))},e),p=(0,sr.useMutation)(async f=>{var y;return await((y=a.update)==null?void 0:y.call(a,f))},{onSuccess:f=>{if(f!=null&&f.resource){let y=he(f==null?void 0:f.resource);r.invalidateQueries(y.logList())}},...t});return{log:d,rename:p}},Bl=E("react"),jl=E("@tanstack/react-query"),Kl=({resource:e,action:t,meta:r,author:a,metaData:n,queryOptions:i})=>{let{get:o}=(0,Bl.useContext)(Kt),u=he(e,void 0,n);return(0,jl.useQuery)(u.logList(r),()=>{var c;return(c=o==null?void 0:o({resource:e,action:t,author:a,meta:r,metaData:n}))!=null?c:Promise.resolve([])},{enabled:typeof o<"u",...i,retry:!1})},Hl=E("react"),_l=E("@tanstack/react-query"),Ge=()=>{let{resources:e}=W(),t=(0,_l.useQueryClient)();return(0,Hl.useCallback)(({resource:r,dataProviderName:a,invalidates:n,id:i})=>{if(n===!1)return;let o=he(r,T(r,a,e));n.forEach(u=>{switch(u){case"all":t.invalidateQueries(o.all);break;case"list":t.invalidateQueries(o.list());break;case"many":t.invalidateQueries(o.many());break;case"resourceAll":t.invalidateQueries(o.resourceAll);break;case"detail":t.invalidateQueries(o.detail(i||""));break;default:break}})},[])},Vl=E("react"),Yl=N(E("warn-once")),Zl=({meta:e={}}={})=>{let t=Y(),{i18nProvider:r}=(0,Vl.useContext)(st),a=be(),n=j(),{resources:i,resource:o,action:u}=W(),c=[];if(!(o!=null&&o.name))return{breadcrumbs:c};let d=p=>{var f,y,m,v,l,s,h,P;let g=typeof p=="string"?(f=V(p,i,t==="legacy"))!=null?f:{name:p}:p;if(g){let w=I((y=g==null?void 0:g.meta)==null?void 0:y.parent,g==null?void 0:g.parentName);w&&d(w);let b=me(g,i,t==="legacy").find(x=>x.action==="list"),C=(m=b==null?void 0:b.resource)!=null&&m.list?b==null?void 0:b.route:void 0,L=C?t==="legacy"?C:ge(C,a,e):void 0;c.push({label:(s=I((v=g.meta)==null?void 0:v.label,(l=g.options)==null?void 0:l.label))!=null?s:n(`${g.name}.${g.name}`,Rt(g.name)),href:L,icon:I((h=g.meta)==null?void 0:h.icon,(P=g.options)==null?void 0:P.icon,g.icon)})}};if(d(o),u&&u!=="list"){let p=`actions.${u}`,f=n(p);typeof r<"u"&&f===p?((0,Yl.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${u}" action. Please add "actions.${u}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),c.push({label:n(`buttons.${u}`,Rt(u))})):c.push({label:n(p,Rt(u))})}return{breadcrumbs:c}},ur=N(E("react")),Tt=(e,t,r=!1)=>{let a=[],n=Te(e,t);for(;n;)a.push(n),n=Te(n,t);return a.reverse(),`/${[...a,e].map(i=>{var o,u;return Me((u=(o=r?i.route:void 0)!=null?o:i.identifier)!=null?u:i.name)}).join("/").replace(/^\//,"")}`},Gl=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{var i,o;let u=[],c=Te(n,e);for(;c;)u.push(c),c=Te(c,e);u.reverse();let d=r;u.forEach(f=>{var y,m;let v=(m=(y=t?f.route:void 0)!=null?y:f.identifier)!=null?m:f.name;d.children[v]||(d.children[v]={item:f,children:{}}),d=d.children[v]});let p=(o=(i=t?n.route:void 0)!=null?i:n.identifier)!=null?o:n.name;d.children[p]||(d.children[p]={item:n,children:{}})});let a=n=>{let i=[];return Object.keys(n.children).forEach(o=>{let u=Tt(n.children[o].item,e,t),c={...n.children[o].item,key:u,children:a(n.children[o])};i.push(c)}),i};return a(r)},Qa=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),Jl=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=j(),a=Ar(),n=Y(),{resource:i,resources:o}=W(),{pathname:u}=be(),{useLocation:c}=ne(),{pathname:d}=c(),p=n==="legacy"?Qa(d):u?Qa(u):void 0,f=`/${(p!=null?p:"").replace(/^\//,"")}`,y=i?Tt(i,o,n==="legacy"):f!=null?f:"",m=ur.default.useMemo(()=>{if(!i)return[];let s=Te(i,o),h=[Tt(i,o)];for(;s;)h.push(Tt(s,o)),s=Te(s,o);return h},[]),v=ur.default.useCallback(s=>{var h,P,g,w,b,C,L,x;if(((g=(h=s==null?void 0:s.meta)==null?void 0:h.hide)!=null?g:(P=s==null?void 0:s.options)==null?void 0:P.hide)||!(s!=null&&s.list)&&s.children.length===0)return;let k=s.list?a({resource:s,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&k&&k.match(/(\/|^):(.+?)(\/|$){1}/)))return{...s,route:k,icon:I((w=s.meta)==null?void 0:w.icon,(b=s.options)==null?void 0:b.icon,s.icon),label:(x=I((C=s==null?void 0:s.meta)==null?void 0:C.label,(L=s==null?void 0:s.options)==null?void 0:L.label))!=null?x:r(`${s.name}.${s.name}`,Er(s.name,"plural"))}},[n,e,r,t]),l=ur.default.useMemo(()=>{let s=Gl(o,n==="legacy"),h=P=>P.flatMap(g=>{let w=h(g.children),b=v({...g,children:w});return b?[b]:[]});return h(s)},[o,n,v]);return{defaultOpenKeys:m,selectedKey:y,menuItems:l}},Xl=()=>{let[e,t]=(0,He.useState)(),r=j(),{push:a}=Ce(),n=Pe(),i=Y(),{resource:o,action:u}=W();return(0,He.useEffect)(()=>{o&&u&&t(r("pages.error.info",{action:u,resource:o==null?void 0:o.name},`You may have forgotten to add the "${u}" component to "${o==null?void 0:o.name}" resource.`))},[o,u]),He.default.createElement(He.default.Fragment,null,He.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&He.default.createElement("p",null,e),He.default.createElement("button",{onClick:()=>{i==="legacy"?a("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},X=N(E("react")),Rn=()=>{let[e,t]=(0,X.useState)(""),[r,a]=(0,X.useState)(""),n=j(),i=ee(),{mutate:o}=hr({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)});return X.default.createElement(X.default.Fragment,null,X.default.createElement("h1",null,n("pages.login.title","Sign in your account")),X.default.createElement("form",{onSubmit:u=>{u.preventDefault(),o({username:e,password:r})}},X.default.createElement("table",null,X.default.createElement("tbody",null,X.default.createElement("tr",null,X.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:u=>t(u.target.value)}))),X.default.createElement("tr",null,X.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:u=>a(u.target.value)}))))),X.default.createElement("br",null),X.default.createElement("input",{type:"submit",value:"login"})))},rt=N(E("react")),U=N(E("react")),es=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:n,wrapperProps:i,renderContent:o,formProps:u})=>{let c=Y(),d=Bt(),{Link:p}=ne(),f=c==="legacy"?p:d,[y,m]=(0,U.useState)(""),[v,l]=(0,U.useState)(""),[s,h]=(0,U.useState)(!1),P=j(),g=ee(),{mutate:w}=hr({v3LegacyAuthProviderCompatible:Boolean(g==null?void 0:g.isLegacy)}),b=(x,k)=>x?typeof x=="string"?U.default.createElement(f,{to:x},k):x:null,C=()=>e?e.map(x=>{var k;return U.default.createElement("div",{key:x.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},U.default.createElement("button",{onClick:()=>w({providerName:x.name}),style:{display:"flex",alignItems:"center"}},x==null?void 0:x.icon,(k=x.label)!=null?k:U.default.createElement("label",null,x.label)))}):null,L=U.default.createElement("div",{...n},U.default.createElement("h1",{style:{textAlign:"center"}},P("pages.login.title","Sign in to your account")),C(),U.default.createElement("hr",null),U.default.createElement("form",{onSubmit:x=>{x.preventDefault(),w({email:y,password:v,remember:s})},...u},U.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},U.default.createElement("label",null,P("pages.login.fields.email","Email")),U.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:y,onChange:x=>m(x.target.value)}),U.default.createElement("label",null,P("pages.login.fields.password","Password")),U.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:v,onChange:x=>l(x.target.value)}),a!=null?a:U.default.createElement(U.default.Fragment,null,U.default.createElement("label",null,P("pages.login.buttons.rememberMe","Remember me"),U.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:s,value:s.toString(),onChange:()=>{h(!s)}}))),U.default.createElement("br",null),r!=null?r:b("/forgot-password",P("pages.login.buttons.forgotPassword","Forgot password?")),U.default.createElement("input",{type:"submit",value:P("pages.login.signin","Sign in")}),t!=null?t:U.default.createElement("span",null,P("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",b("/register",P("pages.login.register","Sign up"))))));return U.default.createElement("div",{...i},o?o(L):L)},_=N(E("react")),ts=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:n,formProps:i})=>{let o=Y(),u=Bt(),{Link:c}=ne(),d=o==="legacy"?c:u,[p,f]=(0,_.useState)(""),[y,m]=(0,_.useState)(""),v=j(),l=ee(),{mutate:s,isLoading:h}=Va({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)}),P=(b,C)=>b?typeof b=="string"?_.default.createElement(d,{to:b},C):b:null,g=()=>e?e.map(b=>{var C;return _.default.createElement("div",{key:b.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},_.default.createElement("button",{onClick:()=>s({providerName:b.name}),style:{display:"flex",alignItems:"center"}},b==null?void 0:b.icon,(C=b.label)!=null?C:_.default.createElement("label",null,b.label)))}):null,w=_.default.createElement("div",{...a},_.default.createElement("h1",{style:{textAlign:"center"}},v("pages.register.title","Sign up for your account")),g(),_.default.createElement("hr",null),_.default.createElement("form",{onSubmit:b=>{b.preventDefault(),s({email:p,password:y})},...i},_.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},_.default.createElement("label",null,v("pages.register.fields.email","Email")),_.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:p,onChange:b=>f(b.target.value)}),_.default.createElement("label",null,v("pages.register.fields.password","Password")),_.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:y,onChange:b=>m(b.target.value)}),_.default.createElement("input",{type:"submit",value:v("pages.register.buttons.submit","Sign up"),disabled:h}),t!=null?t:_.default.createElement(_.default.Fragment,null,_.default.createElement("span",null,v("pages.login.buttons.haveAccount","Have an account?")," ",P("/login",v("pages.login.signin","Sign in")))))));return _.default.createElement("div",{...r},n?n(w):w)},ce=N(E("react")),rs=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:n})=>{let i=j(),o=Y(),u=Bt(),{Link:c}=ne(),d=o==="legacy"?c:u,[p,f]=(0,ce.useState)(""),{mutate:y,isLoading:m}=Ya(),v=(s,h)=>s?typeof s=="string"?ce.default.createElement(d,{to:s},h):s:null,l=ce.default.createElement("div",{...r},ce.default.createElement("h1",{style:{textAlign:"center"}},i("pages.forgotPassword.title","Forgot your password?")),ce.default.createElement("hr",null),ce.default.createElement("form",{onSubmit:s=>{s.preventDefault(),y({email:p})},...n},ce.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ce.default.createElement("label",null,i("pages.forgotPassword.fields.email","Email")),ce.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:p,onChange:s=>f(s.target.value)}),ce.default.createElement("input",{type:"submit",disabled:m,value:i("pages.forgotPassword.buttons.submit","Send reset instructions")}),ce.default.createElement("br",null),e!=null?e:ce.default.createElement("span",null,i("pages.register.buttons.haveAccount","Have an account? ")," ",v("/login",i("pages.login.signin","Sign in"))))));return ce.default.createElement("div",{...t},a?a(l):l)},de=N(E("react")),as=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let n=j(),i=ee(),{mutate:o,isLoading:u}=Za({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),[c,d]=(0,de.useState)(""),[p,f]=(0,de.useState)(""),y=de.default.createElement("div",{...t},de.default.createElement("h1",{style:{textAlign:"center"}},n("pages.updatePassword.title","Update Password")),de.default.createElement("hr",null),de.default.createElement("form",{onSubmit:m=>{m.preventDefault(),o({password:c,confirmPassword:p})},...a},de.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},de.default.createElement("label",null,n("pages.updatePassword.fields.password","New Password")),de.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:c,onChange:m=>d(m.target.value)}),de.default.createElement("label",null,n("pages.updatePassword.fields.confirmPassword","Confirm New Password")),de.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:p,onChange:m=>f(m.target.value)}),de.default.createElement("input",{type:"submit",disabled:u,value:n("pages.updatePassword.buttons.submit","Update")}))));return de.default.createElement("div",{...e},r?r(y):y)},ns=e=>{let{type:t}=e;return rt.default.createElement(rt.default.Fragment,null,(()=>{switch(t){case"register":return rt.default.createElement(ts,{...e});case"forgotPassword":return rt.default.createElement(rs,{...e});case"updatePassword":return rt.default.createElement(as,{...e});default:return rt.default.createElement(es,{...e})}})())},se=N(E("react")),On=()=>se.default.createElement(se.default.Fragment,null,se.default.createElement("h1",null,"Welcome on board"),se.default.createElement("p",null,"Your configuration is completed."),se.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",se.default.createElement("code",null,"`resources`")," property of ",se.default.createElement("code",null,"`<Refine>`")),se.default.createElement("div",{style:{display:"flex",gap:8}},se.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Documentation")),se.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Examples")),se.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Community")))),xe=N(E("react")),os=()=>xe.default.createElement(xe.default.Fragment,null,xe.default.createElement("h1",null,"Welcome on board"),xe.default.createElement("p",null,"Your configuration is completed."),xe.default.createElement("div",{style:{display:"flex",gap:8}},xe.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Documentation")),xe.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Examples")),xe.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Community")))),Q=N(E("react")),cr=E("@tanstack/react-query"),is=E("@tanstack/react-query-devtools"),ls=E("react"),Ve=E("react"),ss="4.1.2",us=()=>{let e=Ga(),t=(0,Ve.useContext)(Kt),r=(0,Ve.useContext)(Ct),a=(0,Ve.useContext)($r),n=(0,Ve.useContext)(kr),{i18nProvider:i}=(0,Ve.useContext)(st),o=(0,Ve.useContext)(Sr),u=(0,Ve.useContext)(jt),{resources:c}=W(),d=!!t.create||!!t.get||!!t.update,p=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),f=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,y=!!n,m=!!(i!=null&&i.changeLocale)||!!(i!=null&&i.getLocale)||!!(i!=null&&i.translate),v=!!o.close||!!o.open,l=!!u.can;return{providers:{auth:e,auditLog:d,live:p,router:f,data:y,i18n:m,notification:v,accessControl:l},version:ss,resourceCount:c.length}},cs=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},ds=()=>{let e=us();return(0,ls.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${cs(e)}`},[]),null},ms=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},Wa=N(E("react")),ps=e=>{let t=Wa.default.useRef(!1);Wa.default.useEffect(()=>{t.current===!1&&e&&ms(e)&&(t.current=!0)},[e])},fs=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:n,notificationProvider:i,accessControlProvider:o,auditLogProvider:u,resources:c,DashboardPage:d,ReadyPage:p,LoginPage:f,catchAll:y,children:m,liveProvider:v,i18nProvider:l,Title:s,Layout:h,Sider:P,Header:g,Footer:w,OffLayoutArea:b,onLiveEvent:C,options:L})=>{let{optionsWithDefaults:x,disableTelemetryWithDefault:k,reactQueryWithDefaults:S}=hi({options:L}),A=Pn(()=>{var $;return S.clientConfig instanceof cr.QueryClient?S.clientConfig:new cr.QueryClient({...S.clientConfig,defaultOptions:{...S.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...($=S.clientConfig.defaultOptions)==null?void 0:$.queries}}})},[S.clientConfig]),O=Q.default.useMemo(()=>typeof i=="function"?i:()=>i!=null?i:{},[i])();if(ps(n),a&&!n&&(c!=null?c:[]).length===0)return p?Q.default.createElement(p,null):Q.default.createElement(On,null);let{RouterComponent:M=Q.default.Fragment}=n?{}:a!=null?a:{};return Q.default.createElement(cr.QueryClientProvider,{client:A},Q.default.createElement(ol,{...O},Q.default.createElement(jo,{...e!=null?e:{},isProvided:Boolean(e)},Q.default.createElement(Ko,{...t!=null?t:{},isProvided:Boolean(t)},Q.default.createElement(Qi,{...r},Q.default.createElement(ji,{liveProvider:v},Q.default.createElement(el,{value:a&&!n?"legacy":"new"},Q.default.createElement(rl,{router:n},Q.default.createElement(ql,{...a},Q.default.createElement(Xi,{resources:c!=null?c:[]},Q.default.createElement(ll,{i18nProvider:l},Q.default.createElement(Dl,{...o!=null?o:{}},Q.default.createElement(zl,{...u!=null?u:{}},Q.default.createElement(Ii,null,Q.default.createElement(yi,{mutationMode:x.mutationMode,warnWhenUnsavedChanges:x.warnWhenUnsavedChanges,syncWithLocation:x.syncWithLocation,Title:s,undoableTimeout:x.undoableTimeout,catchAll:y,DashboardPage:d,LoginPage:f,Layout:h,Sider:P,Footer:w,Header:g,OffLayoutArea:b,hasDashboard:!!d,liveMode:x.liveMode,onLiveEvent:C,options:x},Q.default.createElement(dl,null,Q.default.createElement(M,null,m,!k&&Q.default.createElement(ds,null),Q.default.createElement(Un,null))))))))))))))))),S.devtoolConfig===!1?null:Q.default.createElement(is.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...S.devtoolConfig}))},za=E("react"),Tn=({notification:e})=>{let t=j(),{notificationDispatch:r}=lt(),{open:a}=Qe(),[n,i]=(0,za.useState)(),o=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:nr(e.seconds)},`You have ${nr(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:nr(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);i(u)}};return(0,za.useEffect)(()=>{o()},[e]),null},Ut=N(E("react")),vs=({children:e,Layout:t,Sider:r,Header:a,Title:n,Footer:i,OffLayoutArea:o})=>{let{Layout:u,Footer:c,Header:d,Sider:p,Title:f,OffLayoutArea:y}=qr(),m=t!=null?t:u;return Ut.default.createElement(m,{Sider:r!=null?r:p,Header:a!=null?a:d,Footer:i!=null?i:c,Title:n!=null?n:f,OffLayoutArea:o!=null?o:y},e,Ut.default.createElement(gs,null))},gs=()=>{let{Prompt:e}=ne(),t=j(),{warnWhen:r,setWarnWhen:a}=Nr(),n=i=>(i.preventDefault(),i.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),i.returnValue);return(0,Ut.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),Ut.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},De=N(E("react")),ys=()=>{let e=Pe(),[t,r]=De.default.useState(void 0);return De.default.useEffect(()=>{t&&e(t)},[t]),De.default.useCallback(a=>{t||r(a)},[t])};function hs({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:n}){var i,o,u,c,d;let p=ee(),f=Boolean(p==null?void 0:p.isLegacy),y=br({v3LegacyAuthProviderCompatible:Boolean(p==null?void 0:p.isLegacy)}),m=Y(),v=be(),l=Pe(),s=ys(),{replace:h}=Ce(),{useLocation:P}=ne(),{pathname:g,search:w}=P(),b=y.isLoading,C=p!=null&&p.isProvided?f?y.isSuccess:(i=y.data)==null?void 0:i.authenticated:!0,L=f?typeof e=="string"?e:"/login":typeof e=="string"?e:(o=y.data)==null?void 0:o.redirectTo;if(b)return n?De.default.createElement(De.default.Fragment,null,n):null;if(C)return De.default.createElement(De.default.Fragment,null,r!=null?r:null);if(typeof a>"u"){if(m==="legacy"){let x=t&&g?`?to=${encodeURIComponent(`${g}${w!=null?w:""}`)}`:"",k=g==null?void 0:g.split(/[?#]/)[0];!(k!=null&&k.includes("/login"))&&k!==e&&h(`/${(L!=null?L:"/login").replace(/^\//,"")}${x}`)}else{if(((u=v.pathname)==null?void 0:u.split(/[?#]/)[0])===L)return null;let x=(c=v.params)!=null&&c.to?(d=v.params)==null?void 0:d.to:l({to:v.pathname||"/",options:{keepQuery:!0},type:"path"});L&&s({to:`/${L.replace(/^\//,"")}`,query:x&&typeof x=="string"&&x.length>1?{to:x}:{}})}return null}return De.default.createElement(De.default.Fragment,null,a)}var bs=E("react"),Un=()=>{let{useLocation:e}=ne(),{checkAuth:t}=ye(),r=e();return(0,bs.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},at=N(E("react")),Ps=({resource:e,action:t,params:r,fallback:a,children:n,...i})=>{let{data:o}=Mn({resource:e,action:t,params:r});return o!=null&&o.can?at.default.isValidElement(n)?at.default.cloneElement(n,i):at.default.createElement(at.default.Fragment,null,n):(o==null?void 0:o.can)===!1?at.default.createElement(at.default.Fragment,null,a!=null?a:null):null},nt=N(E("react")),Cs=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],Es=()=>((0,nt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),Cs.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),nt.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},nt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},nt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},nt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),nt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var Ie=J(E("react")),Zr=J(ct());var ws=/(image|photo|avatar|url|logo|cover|thumbnail|icon)/i,Ht=(e,t)=>{let r=["name","label","title","count","content","username","nickname","login","firstName","lastName","url"];ws.test(e)&&r.unshift("url");let a=r.find(n=>n in t&&!!t[n]);if(a)return a==="firstName"&&"lastName"in t?["firstName","lastName"]:a};var Wn=J(ct());function Dr(e,t,r){if(t)return t;let a=r==null?void 0:r.find(i=>i.name===e),n=(0,Wn.pickNotDeprecated)(a==null?void 0:a.meta,a==null?void 0:a.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"}var dt=e=>{var t;return(t=e==null?void 0:e.options)==null?void 0:t.dataProviderName};var Mr=e=>{let t=[...e].filter(Boolean).sort((r,a)=>(a.priority||0)-(r.priority||0))[0];return t||null};var xs=J(E("prettier/standalone")),Ls=J(E("prettier/parser-typescript"));var Fr=e=>e.replace(/ {2,}/g," ").replace(/\n{2,}/g,`
`);var Rr=/(-id|-ids|_id|_ids|Id|Ids|ID|IDs)(\[\])?$/,zn=(e,t)=>{let r=Rr.test(e),a=typeof t=="string"||typeof t=="number",n=Array.isArray(t)&&t.every(i=>typeof i=="string"||typeof i=="number");return r&&a||r&&n?{key:e,relation:!0,multiple:!!n,type:"relation",priority:1}:!1};var ue=e=>e.replace(Rr,"");var mt=e=>ue(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/-/g," ").split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ");var Or=e=>e.replace(/export\s+(const|let|var|type|interface|function|class)\s+(\w+)\s*(=|:)\s*/g,"$1 $2 = ").split(`
`).filter(n=>!n.trim().startsWith("export default")).join(`
`);var Bn=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Is=/import[ \n\t](?:['"])([^'"\n]+)(?:['"])(?:;?)/g,ks=/((?:\w|\s|_)*)( as )((?:\w|\s|_)*)( |,)?/g,Tr=(e,t={})=>{let r=e.matchAll(Bn),a=new Set;for(let n of r){let[,i,o,u,c]=n;if(c in t){let d=t[c];if(c==="react")continue;i&&a.add(`const { default: ${i} } = ${d};`),o&&a.add(`const${o.replace(ks,"$1: $3$4")} = ${d};`),u&&a.add(`const ${u} = ${d};`)}}return Fr(`
    ${Array.from(a).join(`
`)}
    ${e.replace(Bn,"").replace(Is,"")}
    `)};var Lt=J(E("pluralize"));var Ur=(e,t)=>e?t.find(a=>{let n=ue(e.key);return a.name===n||a.name===(Lt.default.isPlural(n)?n:Lt.default.plural(n))||a.name===(Lt.default.isSingular(n)?n:Lt.default.singular(n))}):void 0;var jn=J(E("pluralize"));var _t=(e,t,r="Inferred")=>{let a=e.replace(/[^a-zA-Z0-9]/g," "),n=jn.default.singular(a),o=mt(n).replace(/ /g,"")||r,u=t.charAt(0).toUpperCase()+t.slice(1);return/^[a-zA-Z]/.test(o)?`${o}${u}`:`${u}${o}`};var Ss=e=>e?Array.isArray(e)?e.join(""):typeof e=="string"?e:typeof e=="object"||typeof e=="function"?e.toString():typeof e=="number"?String(e):typeof e=="boolean"&&e?"true":e:"",Kn=(e,...t)=>e.reduce((a,n,i)=>`${a}${n}${Ss(t[i])}`,"").trim();var Qr=(e,t)=>`
    ${e!=null?e:""}
    
    render(typeof ${t} !== "undefined" ? <${t} /> : <></>);
    `;var Wr=e=>e==null?void 0:e.replace(/(\/\* hidden-start \*\/)(.|\n)*?(\/\* hidden-end \*\/)/g,"");var Ns=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Vt=e=>Ns.test(e);function zr(e,t,r){let a=`${e}`;return t&&(a+="?.",Vt(t)?a+=t:a+=`['${t}']`),r&&(a+="?.",Vt(r)?a+=r:a+=`['${r}']`),a}function qs(e,t,r){return(r!=null?r:[]).map(n=>zr(e,t,n))}var Hn=(e,t,r,a=' + " " + ')=>Array.isArray(r)?a?qs(e,t,r).join(a):zr(e,t,r[0]):zr(e,t,r),Br=(e,t,r)=>{let a=e;return t&&(a+=`.${t}`),r&&(Array.isArray(r)?a+=`.${r[0]}`:a+=`.${r}`),a},_n=e=>Array.isArray(e.accessor)||e.multiple?`accessorKey: "${e.key}"`:e.accessor?`accessorKey: "${Br(e.key,void 0,e.accessor)}"`:`accessorKey: "${e.key}"`;var Vn=e=>{let t=e.reduce((a,[n,i,o])=>(a[i]||(a[i]=[]),a[i].includes(n)||(o?a[i].push([n,!0]):a[i].push(n)),a),{});return Object.entries(t).map(([a,n])=>{let i=n.find(d=>Array.isArray(d)&&d[1]),o=n.filter(d=>typeof d=="string"),u=i?`${i[0]}`:"",c=o.length?`{ ${o.join(", ")} }`:"";return`import ${u}${u&&c?", ":""}${c} from "${a}";`})};var jr=J(E("pluralize")),Je=(e="")=>jr.default.isSingular(e)?e:jr.default.singular(e);var Kr=J(E("pluralize")),Xe=(e="")=>Kr.default.isPlural(e)?e:Kr.default.plural(e);var As=/^id$/i,Yn=e=>As.test(e);var Zn=e=>e.relationInfer&&e.relationInfer.accessor?Array.isArray(e.relationInfer.accessor)?`optionLabel: "${e.relationInfer.accessor[0]}",`:e.relationInfer.accessor!=="title"?`optionLabel: "${e.relationInfer.accessor}",`:"":"";var Gn=e=>{};var Jn=(e,t="")=>{if(Number.isInteger(Number(e)))return t.charAt(0).toLowerCase()+t.slice(1)+e;let a=e.replace(/^\d+/,"").replace(/[^a-zA-Z0-9]/g,"-"),n=mt(a).replace(/ /g,"");return`${n.charAt(0).toLowerCase()+n.slice(1)}${t.charAt(0).toUpperCase()+t.slice(1)}`};var Xn=e=>{let t=(r,a,n,i=t)=>{let o=e.map(c=>c(r,a,n,i));return Mr(o)};return t};var eo=e=>(r,a,n,i,o)=>e.reduce((u,c)=>c(u,a,n,i,o),r);var to=(e,t,r,a)=>{let n=Array.isArray(t),i=Array.isArray(t)&&t.every(o=>typeof o=="string"||typeof o=="number");if(n){if(!i){let u=a(e,t[0],r,a);return u?{...u,key:e,multiple:!0,priority:1}:!1}let o=a(e,t[0],r,a)||{type:"string"};return{key:e,multiple:!0,priority:1,type:o==null?void 0:o.type}}return!1};var ro=(e,t)=>typeof t=="boolean"?{key:e,type:"boolean"}:!1;var Hr=J(E("dayjs")),$s=/(_at|_on|At|On|AT|ON)(\[\])?$/,Ds=["/",":","-","."],ao=(e,t)=>{let r=$s.test(e)&&(0,Hr.default)(t).isValid(),a=typeof t=="string"&&(0,Hr.default)(t).isValid();return typeof t=="string"&&Ds.some(i=>t.includes(i))&&(r||a)?{key:e,type:"date",priority:1}:!1};var Ms=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,no=(e,t)=>typeof t=="string"&&Ms.test(t)?{key:e,type:"email",priority:1}:!1;var Fs=/\.(gif|jpe?g|tiff?|png|webp|bmp|svg)$/i,oo=(e,t)=>typeof t=="string"&&Fs.test(t)?{key:e,type:"image",priority:2}:!1;var io=(e,t)=>typeof t>"u"||t===null?null:!1;var lo=(e,t)=>{let r=typeof t=="string"&&t.length>0,a=!isNaN(t);return r&&a||typeof t=="number"?{key:e,type:"number"}:!1};var Rs=/id$/i,so=(e,t,r,a)=>{let n=t!==null,i=!Array.isArray(t);if(n&&i&&typeof t=="object"){if(Object.keys(t).length===1&&Rs.test(Object.keys(t)[0]))return{key:e,type:"relation",relation:!0,accessor:"id",priority:1};let c=Ht(e,t);if((c?c.length>0:!1)&&c){let p=c&&Array.isArray(c)?c[0]:c,f=a(p,t[p],t,a);if(f){let y=Array.isArray(c)?c.map(m=>f.accessor?`${m}.${Array.isArray(f.accessor)?f.accessor[0]:f.accessor}`:m):f.accessor?Array.isArray(f.accessor)?`${c}.${f.accessor[0]}`:`${c}.${f.accessor}`:c;return{...f,fieldable:!0,key:e,accessor:y,priority:1}}}return{key:e,fieldable:!1,type:"object",priority:1}}return!1};var uo=(e,t)=>typeof t=="string"&&t.length>100?{key:e,type:"richtext",priority:1}:!1;var co=(e,t)=>typeof t=="string"?{key:e,type:"text"}:!1;var Os=/^(https?|ftp):\/\/(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i,mo=(e,t)=>typeof t=="string"&&Os.test(t)?{key:e,type:"url",priority:1}:!1;var po=[to,ro,ao,no,oo,io,lo,so,zn,uo,co,mo];var fo=(e,t,r,a)=>e.map(i=>{if(!i.relation&&(i.type==="text"||i.type==="richtext"||i.type==="number")&&!i.canRelation){let o=/^[a-z0-9-]+$/,u=y=>o.test(`${y}`),c=i.key.toLowerCase()!=="id";return!(!i.accessor||typeof i.accessor=="string")||!c?i:(i.multiple?a[i.key]:[a[i.key]]).every(y=>u(i.accessor?y[i.accessor]:y))?{...i,canRelation:!0}:i}return i});var Ts=/(image|photo|avatar|cover|thumbnail|icon)/i,vo=e=>e.map(r=>r.type==="url"&&Ts.test(r.key)?{...r,type:"image"}:r);var go=(e,t)=>e.map(a=>{let n=Ur(a,t);return n?{...a,relation:!0,type:"relation",resource:n}:a});var yo=(e,t,r,a,n)=>e.map(o=>{if(o.relation&&o.type==="relation"&&!o.resource){let u=o.accessor?a[o.key][o.accessor]:a[o.key],c=n(o.key,u,a,n);if(c&&c.type!=="relation")return{...o,fieldable:!0,relation:!1,type:c.type,canRelation:!0}}return o});var ho=[vo,go,yo,fo];var bo=J(E("react")),Po=J(E("prism-react-renderer")),Us=J(E("prism-react-renderer/themes/vsDark"));var Ee=J(E("react")),Qs=J(ct()),Yt=E("@aliemir/react-live");var Co=[["react","React",Ee.default],["@refinedev/core","RefineCore",Qs]],_r=Ee.default.createContext({}),Vr=({fetchError:e,code:t,additionalScope:r,errorComponent:a})=>{var u;let n=(u=t&&Or(Tr(t,[...Co,...r!=null?r:[]].reduce((c,[d,p,f,y])=>y?c:{...c,[d]:p},{}))))!=null?u:"",i=Ee.default.useMemo(()=>({React:Ee.default,...Ee.default,...[...Co,...r!=null?r:[]].reduce((c,[d,p,f])=>({...c,[p]:f}),{})}),[r]),o=Ee.default.useMemo(()=>()=>{let{error:d}=Ee.default.useContext(_r);return a?Ee.default.createElement(a,{error:d?`<p>An error occured while rendering the generated component.You can check the generated code from the below "Show Code" button and fix the error manually.</p>
                                    <p>If you think this is a bug, please report the issue at <a target="_blank" rel="noopener noreferrer" href="https://github.com/refinedev/refine/issues">https://github.com/refinedev/refine/issues</a></p>
                                    <p>Exception:</p>
                                    <code>${d}</code>`:typeof e=="string"?e:e?`<p>Something went wrong while fetching the resource data.</p>
                                    <p>To learn more about the Inferencer, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`:void 0}):null},[a,e]);return Ee.default.createElement(Yt.LiveProvider,{Context:_r,code:n,scope:i,noInline:!0},!e&&Ee.default.createElement(Yt.LivePreview,{Context:_r}),Ee.default.createElement(o,null))};var et=J(E("react")),Zt=J(ct());var Eo=(e,t,r)=>{let{resource:a,id:n,resources:i}=(0,Zt.useResource)(t),o=r!=null?r:n,u=(0,Zt.useDataProvider)(),[c,d]=et.default.useState(void 0),[p,f]=et.default.useState(void 0),[y,m]=et.default.useState(!0),[v,l]=et.default.useState(!1),s=et.default.useCallback(async h=>{var w,b;let P=(w=dt(a))!=null?w:Dr(a==null?void 0:a.name,void 0,i),g=u(P);l(!0),d(void 0);try{if((e==="list"||e==="create")&&a){let L=(b=(await g.getList({resource:a==null?void 0:a.name})).data)==null?void 0:b[0];L||d(`<p>No records/data found for resource "${a==null?void 0:a.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),f(L),setTimeout(()=>{l(!1)},500)}if((e==="edit"||e==="show")&&h&&a){let L=(await g.getOne({resource:a==null?void 0:a.name,id:h})).data;L||d(`<p>No records/data found for resource "${a==null?void 0:a.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),f(L),setTimeout(()=>{l(!1)},500)}}catch(C){console.warn("An error occured while fetching the resource data. Please check the error message below:",C),d(`<p>Something went wrong while fetching the resource data.</p>
                    <p>Please check your data provider and API for resource "${a==null?void 0:a.name}".</p>
                    <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),setTimeout(()=>{l(!1)},500)}},[e,u,a,i]);return et.default.useEffect(()=>{m(!1),!v&&!p&&s(o)},[s,o]),{data:p,loading:v,initial:y,error:c}};var pt=J(E("react")),wo=J(ct());var Yr=E("lodash"),xo=({record:e,fields:t,infer:r})=>{let a=(0,wo.useDataProvider)(),[n,i]=pt.default.useState([]),[o,u]=pt.default.useState(!0),[c,d]=pt.default.useState(!1),p=pt.default.useCallback(async f=>{console.groupCollapsed("@refinedev/inferencer is trying to detect relations");let y=[];d(!0);try{let m=f.map(async l=>{if(l&&(l.relation||l.canRelation)&&e){let s=dt(l.resource),h=a(s),P=Array.isArray(l.accessor)?void 0:l.multiple?e[l.key].map(g=>l.accessor?(0,Yr.get)(g,l.accessor):g)[0]:l.accessor?(0,Yr.get)(e[l.key],l.accessor):e[l.key];if(P&&l.resource)try{let{data:g}=await h.getOne({resource:l.resource.name,id:P});y.push({status:"success",resource:l.resource.name,field:l.key});let w=r("__",g,{},r);return{...l,relationInfer:w}}catch{return y.push({status:"error",resource:l.resource.name,field:l.key}),{...l,relationInfer:null}}if(P){let g,w;try{let{data:L}=await h.getOne({resource:Xe(ue(l.key)),id:P});y.push({status:"success",resource:Xe(ue(l.key)),field:l.key}),g=L,w=!0}catch{y.push({status:"error",resource:Xe(ue(l.key)),field:l.key});try{let{data:x}=await h.getOne({resource:Je(ue(l.key)),id:P});y.push({status:"success",resource:Je(ue(l.key)),field:l.key}),g=x,w=!1}catch{return y.push({status:"error",resource:Je(ue(l.key)),field:l.key}),{...l,relationInfer:null}}}let b=r("__",g,{},r),C=ue(l.key);return{...l,relation:!0,type:"relation",resource:{name:w?Xe(C):Je(C)},fieldable:!1,canRelation:void 0,relationInfer:b}}return{...l,relationInfer:null}}return l}),v=await Promise.all(m);i(v.filter(l=>l)),setTimeout(()=>{d(!1)},500)}catch{setTimeout(()=>{d(!1)},500)}setTimeout(()=>{console.log(`Tried to detect relations with ${y.length} attempts and succeeded with ${y.filter(m=>m.status==="success").length} attempts.`),console.groupEnd()},500)},[a,e]);return pt.default.useEffect(()=>{u(!1),!c&&t&&t.length>0&&n.length===0&&p(t)},[p,c,t,p]),{fields:n,loading:c,initial:o}};var Ws=({type:e,additionalScope:t=[],customElements:r=[],fieldTransformers:a=[],renderer:n,loadingComponent:i,errorComponent:o,codeViewerComponent:u})=>{let c=Xn([...po,...r]),d=eo([...ho,...a]),p=({resourceName:y,fieldTransformer:m,id:v})=>{var S,A,O,M,$,F;let{resource:l,resources:s}=(0,Zr.useResource)(y),{resource:h}=(0,Zr.useResource)(),{data:P,loading:g,initial:w,error:b}=Eo(e,y!=null?y:l==null?void 0:l.name,v),C=Ie.default.useMemo(()=>{if(P){let q=Object.keys(P).map(D=>{let R=P[D];return c(D,R,P,c)}).filter(Boolean);if(l){let D=d(q,s,l,P,c);return m?D.flatMap(K=>{let re=m(K);return re?[re]:[]}):D}return[]}return[]},[P,s,l,m]),{fields:L,loading:x}=xo({record:P,fields:C,infer:c}),k=Ie.default.useMemo(()=>!g&&!x&&!w&&l?n({resource:l,resources:s,fields:L,infer:c,isCustomPage:l.name!==(h==null?void 0:h.name),id:v}):"",[l,s,L,g,x]);return Ie.default.createElement(Ie.default.Fragment,null,i&&(g||x)&&Ie.default.createElement(i,null),!g&&!x&&Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement(Vr,{fetchError:!g&&b?b:!g&&!w&&!P,code:Qr(k,_t((F=($=(M=(O=(S=l==null?void 0:l.meta)==null?void 0:S.label)!=null?O:(A=l==null?void 0:l.options)==null?void 0:A.label)!=null?M:l==null?void 0:l.label)!=null?$:l==null?void 0:l.name)!=null?F:"Resource",e)),errorComponent:o,additionalScope:t}),u&&Ie.default.createElement(u,{code:Wr(k),loading:g||x})))};return({name:y,resource:m,fieldTransformer:v,id:l})=>Ie.default.createElement(p,{fieldTransformer:v,resourceName:m!=null?m:y,key:m!=null?m:y,id:l})};})();
//# sourceMappingURL=index.js.map