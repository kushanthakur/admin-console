(()=>{var Po=Object.create;var kr=Object.defineProperty;var Co=Object.getOwnPropertyDescriptor;var wo=Object.getOwnPropertyNames;var Lo=Object.getPrototypeOf,xo=Object.prototype.hasOwnProperty;var w=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var So=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qo=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of wo(t))!xo.call(e,o)&&o!==r&&kr(e,o,{get:()=>t[o],enumerable:!(a=Co(t,o))||a.enumerable});return e};var Wt=(e,t,r)=>(r=e!=null?Po(Lo(e)):{},qo(t||!e||!e.__esModule?kr(r,"default",{value:e,enumerable:!0}):r,e));var Cr=So((hi,po)=>{var Do=Object.create,Nt=Object.defineProperty,Mo=Object.getOwnPropertyDescriptor,To=Object.getOwnPropertyNames,ko=Object.getPrototypeOf,No=Object.prototype.hasOwnProperty,Fo=(e,t)=>{for(var r in t)Nt(e,r,{get:t[r],enumerable:!0})},ya=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of To(t))!No.call(e,o)&&o!==r&&Nt(e,o,{get:()=>t[o],enumerable:!(a=Mo(t,o))||a.enumerable});return e},M=(e,t,r)=>(r=e!=null?Do(ko(e)):{},ya(t||!e||!e.__esModule?Nt(r,"default",{value:e,enumerable:!0}):r,e)),$o=e=>ya(Nt({},"__esModule",{value:!0}),e),ha={};Fo(ha,{AuthPage:()=>Gl,Authenticated:()=>di,CanAccess:()=>mi,ErrorComponent:()=>zl,GitHubBanner:()=>pi,LayoutWrapper:()=>ii,LoginPage:()=>so,ReadyPage:()=>co,Refine:()=>li,ResourceContext:()=>ft,RouteChangeHandler:()=>vo,UndoableQueue:()=>mo,WelcomePage:()=>Jl,createTreeView:()=>ln,file2Base64:()=>Zo,getDefaultFilter:()=>Jo,getDefaultSortOrder:()=>Go,getNextPageParam:()=>Aa,getPreviousPageParam:()=>Ra,handleUseParams:()=>Xo,importCSVMapper:()=>Sa,legacyResourceTransform:()=>Oa,matchResourceFromRoute:()=>nn,parseTableParams:()=>dr,parseTableParamsFromQuery:()=>Yo,pickNotDeprecated:()=>S,routeGenerator:()=>Na,setInitialFilters:()=>ar,setInitialSorters:()=>or,stringifyTableParams:()=>tr,unionFilters:()=>mt,unionSorters:()=>rr,useActiveAuthProvider:()=>te,useApiUrl:()=>Sn,useAuthenticated:()=>Ho,useBack:()=>oo,useBreadcrumb:()=>Vl,useCan:()=>io,useCanWithoutCache:()=>Dl,useCancelNotification:()=>ot,useCheckError:()=>Io,useCreate:()=>fr,useCreateMany:()=>Va,useCustom:()=>Dn,useCustomMutation:()=>Tn,useDataProvider:()=>ne,useDelete:()=>En,useDeleteMany:()=>xn,useExport:()=>dl,useForgotPassword:()=>wa,useForm:()=>cl,useGetIdentity:()=>Pa,useGetLocale:()=>tl,useGetToPath:()=>Er,useGo:()=>Ce,useHandleNotification:()=>ye,useImport:()=>gl,useInfiniteList:()=>$n,useInvalidate:()=>Je,useIsAuthenticated:()=>ur,useIsExistAuthentication:()=>xa,useLink:()=>$t,useList:()=>vr,useLiveMode:()=>za,useLog:()=>Ge,useLogList:()=>Ol,useLogin:()=>ir,useLogout:()=>er,useMany:()=>Qa,useMenu:()=>Il,useModal:()=>yl,useMutationMode:()=>lt,useNavigation:()=>we,useNotification:()=>Be,useOnError:()=>fe,useOne:()=>pr,useParse:()=>Za,useParsed:()=>ge,usePermissions:()=>Oo,usePublish:()=>Ye,useRedirectionAfterSubmission:()=>ao,useRefineContext:()=>br,useRegister:()=>Ca,useResource:()=>B,useResourceSubscription:()=>pt,useResourceWithRoute:()=>yt,useRouterContext:()=>ae,useRouterType:()=>Y,useSelect:()=>kl,useSetLocale:()=>el,useShow:()=>vl,useSubscription:()=>Un,useSyncWithLocation:()=>ro,useTable:()=>Fl,useTitle:()=>ll,useToPath:()=>bl,useTranslate:()=>I,useUpdate:()=>Wa,useUpdateMany:()=>wn,useUpdatePassword:()=>La,useWarnAboutChange:()=>hr,userFriendlyResourceName:()=>cr});po.exports=$o(ha);var je=M(w("react")),at=M(w("react")),ba=at.default.createContext({}),Ao=({children:e,isProvided:t,...r})=>{let{replace:a}=we(),o=async c=>{var f;try{return await((f=r.login)==null?void 0:f.call(r,c))}catch(m){return Promise.reject(m)}},l=async c=>{var f;try{return await((f=r.register)==null?void 0:f.call(r,c))}catch(m){return Promise.reject(m)}},n=async c=>{var f;try{return await((f=r.logout)==null?void 0:f.call(r,c))}catch(m){return Promise.reject(m)}},u=async c=>{var f;try{return await((f=r.checkAuth)==null?void 0:f.call(r,c)),Promise.resolve()}catch(m){return m!=null&&m.redirectPath&&a(m.redirectPath),Promise.reject(m)}};return at.default.createElement(ba.Provider,{value:{...r,login:o,logout:n,checkAuth:u,register:l,isProvided:t}},e)},Ea=at.default.createContext({}),Ro=({children:e,isProvided:t,...r})=>{let a=async f=>{var m;try{return await((m=r.login)==null?void 0:m.call(r,f))}catch(v){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",v),Promise.reject(v)}},o=async f=>{var m;try{return await((m=r.register)==null?void 0:m.call(r,f))}catch(v){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",v),Promise.reject(v)}},l=async f=>{var m;try{return await((m=r.logout)==null?void 0:m.call(r,f))}catch(v){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",v),Promise.reject(v)}},n=async f=>{var m;try{let v=await((m=r.check)==null?void 0:m.call(r,f));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",v),Promise.reject(v)}},u=async f=>{var m;try{let v=await((m=r.forgotPassword)==null?void 0:m.call(r,f));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",v),Promise.reject(v)}},c=async f=>{var m;try{let v=await((m=r.updatePassword)==null?void 0:m.call(r,f));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",v),Promise.reject(v)}};return at.default.createElement(Ea.Provider,{value:{...r,login:a,logout:l,check:n,register:o,forgotPassword:u,updatePassword:c,isProvided:t}},e)},Ee=()=>at.default.useContext(ba),Se=()=>at.default.useContext(Ea),Nr=w("@tanstack/react-query");function Oo({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=Ee(),{getPermissions:a}=Se(),o=(0,Nr.useQuery)(["usePermissions"],a!=null?a:()=>Promise.resolve(void 0),{enabled:!e&&!!a,...e?{}:t}),l=(0,Nr.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?l:o}var Fr=w("@tanstack/react-query");function Pa({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=Ee(),{getIdentity:a}=Se(),o=(0,Fr.useQuery)(["getUserIdentity"],a!=null?a:()=>Promise.resolve({}),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t}),l=(0,Fr.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?l:o}var $r=w("@tanstack/react-query"),Uo=w("@tanstack/react-query"),lr=()=>{let e=(0,Uo.useQueryClient)();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function er({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lr(),a=Y(),o=Ce(),{push:l}=we(),{open:n,close:u}=Be(),{logout:c}=Ee(),{logout:f}=Se(),m=(0,$r.useMutation)(["useLogout"],f,{onSuccess:async(P,p)=>{let{success:s,error:d,redirectTo:i}=P,{redirectPath:g}=p!=null?p:{},E=g!=null?g:i;s&&(u==null||u("useLogout-error")),(d||!s)&&(n==null||n(Vt(d))),await r(),E!==!1&&(a==="legacy"?l(E!=null?E:"/login"):E&&o({to:E}))},onError:P=>{n==null||n(Vt(P))},...e===!0?{}:t}),v=(0,$r.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],c,{onSuccess:async(P,p)=>{var s;let d=(s=p==null?void 0:p.redirectPath)!=null?s:P;if(await r(),d!==!1){if(d){a==="legacy"?l(d):o({to:d});return}a==="legacy"?l("/login"):o({to:"/login"})}},onError:P=>{n==null||n(Vt(P))},...e?t:{}});return e?v:m}var Vt=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),Ar=w("@tanstack/react-query"),Qo=M(w("qs")),Bo=M(w("react"));function ir({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lr(),a=Y(),o=Ce(),{replace:l}=we(),n=ge(),{useLocation:u}=ae(),{search:c}=u(),{close:f,open:m}=Be(),{login:v}=Ee(),{login:P}=Se(),p=Bo.default.useMemo(()=>{var i;return a==="legacy"?Qo.default.parse(c,{ignoreQueryPrefix:!0}).to:(i=n.params)==null?void 0:i.to},[a,n.params,c]),s=(0,Ar.useMutation)(["useLogin"],P,{onSuccess:async({success:i,redirectTo:g,error:E})=>{i&&(f==null||f("login-error")),(E||!i)&&(m==null||m(Ht(E))),await r(),p&&i?a==="legacy"?l(p):o({to:p,type:"replace"}):g?a==="legacy"?l(g):o({to:g,type:"replace"}):a==="legacy"&&l("/")},onError:i=>{m==null||m(Ht(i))},...e===!0?{}:t}),d=(0,Ar.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],v,{onSuccess:async i=>{await r(),p&&l(p),i!==!1&&!p&&(typeof i=="string"?a==="legacy"?l(i):o({to:i,type:"replace"}):a==="legacy"?l("/"):o({to:"/",type:"replace"})),f==null||f("login-error")},onError:i=>{m==null||m(Ht(i))},...e?t:{}});return e?d:s}var Ht=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),Rr=w("@tanstack/react-query");function Ca({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lr(),a=Y(),o=Ce(),{replace:l}=we(),{register:n}=Ee(),{register:u}=Se(),{close:c,open:f}=Be(),m=(0,Rr.useMutation)(["useRegister"],u,{onSuccess:async({success:P,redirectTo:p,error:s})=>{P&&(c==null||c("register-error")),(s||!P)&&(f==null||f(It(s))),await r(),p?a==="legacy"?l(p):o({to:p,type:"replace"}):a==="legacy"&&l("/")},onError:P=>{f==null||f(It(P))},...e===!0?{}:t}),v=(0,Rr.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],n,{onSuccess:async P=>{await r(),P!==!1&&(P?a==="legacy"?l(P):o({to:P,type:"replace"}):a==="legacy"?l("/"):o({to:"/",type:"replace"}),c==null||c("register-error"))},onError:P=>{f==null||f(It(P))},...e?t:{}});return e?v:m}var It=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),Or=w("@tanstack/react-query");function wa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Y(),a=Ce(),{replace:o}=we(),{forgotPassword:l}=Ee(),{forgotPassword:n}=Se(),{close:u,open:c}=Be(),f=(0,Or.useMutation)(["useForgotPassword"],n,{onSuccess:({success:v,redirectTo:P,error:p})=>{v&&(u==null||u("forgot-password-error")),(p||!v)&&(c==null||c(zt(p))),P&&(r==="legacy"?o(P):a({to:P,type:"replace"}))},onError:v=>{c==null||c(zt(v))},...e===!0?{}:t}),m=(0,Or.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],l,{onSuccess:v=>{v!==!1&&v&&(r==="legacy"?o(v):a({to:v,type:"replace"})),u==null||u("forgot-password-error")},onError:v=>{c==null||c(zt(v))},...e?t:{}});return e?m:f}var zt=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),Wo=M(w("react")),Ur=w("@tanstack/react-query"),Vo=M(w("qs"));function La({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Y(),a=Ce(),{replace:o}=we(),{updatePassword:l}=Ee(),{updatePassword:n}=Se(),{close:u,open:c}=Be(),f=ge(),{useLocation:m}=ae(),{search:v}=m(),P=Wo.default.useMemo(()=>{var d;if(r==="legacy"){let i=Vo.default.parse(v,{ignoreQueryPrefix:!0});return i!=null?i:{}}else return(d=f.params)!=null?d:{}},[v,f,r]),p=(0,Ur.useMutation)(["useUpdatePassword"],async d=>n==null?void 0:n({...P,...d}),{onSuccess:({success:d,redirectTo:i,error:g})=>{d&&(u==null||u("update-password-error")),(g||!d)&&(c==null||c(jt(g))),i&&(r==="legacy"?o(i):a({to:i,type:"replace"}))},onError:d=>{c==null||c(jt(d))},...e===!0?{}:t}),s=(0,Ur.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async d=>l==null?void 0:l({...P,...d}),{onSuccess:d=>{d!==!1&&d&&(r==="legacy"?o(d):a({to:d,type:"replace"})),u==null||u("update-password-error")},onError:d=>{c==null||c(jt(d))},...e?t:{}});return e?s:p}var jt=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),Qr=w("@tanstack/react-query");function ur({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=Ee(),{check:a}=Se(),o=(0,Qr.useQuery)(["useAuthenticated",t],async()=>{var n;return(n=await(a==null?void 0:a(t)))!=null?n:{}},{retry:!1,enabled:!e}),l=(0,Qr.useQuery)(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>{var n;return(n=await(r==null?void 0:r(t)))!=null?n:{}},{retry:!1,enabled:e});return e?l:o}var Ho=ur,Br=w("@tanstack/react-query");function fe({v3LegacyAuthProviderCompatible:e=!1}={}){let t=Y(),r=Ce(),{replace:a}=we(),{checkError:o}=Ee(),{onError:l}=Se(),{mutate:n}=er({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:u}=er({v3LegacyAuthProviderCompatible:Boolean(e)}),c=(0,Br.useMutation)(["useCheckError"],l,{onSuccess:({logout:m,redirectTo:v})=>{if(m){u({redirectPath:v});return}if(v){t==="legacy"?a(v):r({to:v,type:"replace"});return}}}),f=(0,Br.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],o,{onError:m=>{n({redirectPath:m})}});return e?f:c}var Io=fe,xa=()=>{let{isProvided:e}=Ee(),{isProvided:t}=Se();return Boolean(t||e)},zo=w("@tanstack/react-query"),Kt=e=>e/1e3,jo=M(w("lodash/zip")),Ko=M(w("lodash/fromPairs")),Sa=(e,t=r=>r)=>{let[r,...a]=e;return a.map(o=>(0,Ko.default)((0,jo.default)(r,o))).map((o,l,n)=>t.call(void 0,o,l,n))},Wr=M(w("pluralize")),sr=M(w("qs")),qa=M(w("lodash/unionWith")),Da=M(w("lodash/differenceWith")),_o=M(w("warn-once")),dr=e=>{var t;let{current:r,pageSize:a,sorter:o,sorters:l,filters:n}=sr.default.parse(e.substring(1));return{parsedCurrent:r&&Number(r),parsedPageSize:a&&Number(a),parsedSorter:(t=S(l,o))!=null?t:[],parsedFilters:n!=null?n:[]}},Yo=e=>{let t=sr.default.stringify(e);return dr(`/${t}`)},tr=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:o,filters:l,...n}=e;return sr.default.stringify({...n,...r||{},sorters:S(o,a),filters:l},t)},Ma=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Ta=(e,t)=>e.field==t.field,mt=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,_o.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,qa.default)(e,t,r,Ma).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),rr=(e,t)=>(0,qa.default)(e,t,Ta).filter(r=>r.order!==void 0&&r.order!==null),ar=(e,t)=>[...(0,Da.default)(t,e,Ma),...e],or=(e,t)=>[...(0,Da.default)(t,e,Ta),...e],Go=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},Jo=(e,t,r="eq")=>{let a=t==null?void 0:t.find(o=>{if(o.operator!=="or"&&o.operator!=="and"&&"field"in o){let{operator:l,field:n}=o;return n===e&&l===r}});if(a)return a.value||[]},Zo=e=>new Promise((t,r)=>{let a=new FileReader,o=()=>{a.result&&(a.removeEventListener("load",o,!1),t(a.result))};a.addEventListener("load",o,!1),a.readAsDataURL(e.originFileObj),a.onerror=l=>(a.removeEventListener("load",o,!1),r(l))}),cr=(e="",t)=>{let r=Dt(e);return t==="singular"?Wr.default.singular(r):Wr.default.plural(r)},Xo=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,S=(...e)=>e.find(t=>typeof t<"u"),Pe=(e,t,r,a)=>{let o=t||"default",l={all:[o],resourceAll:[o,e||""],list:n=>[...l.resourceAll,"list",{...n,...S(r,a)||{}}],many:n=>[...l.resourceAll,"getMany",n&&n.map(String),{...S(r,a)||{}}].filter(u=>u!==void 0),detail:n=>[...l.resourceAll,"detail",n==null?void 0:n.toString(),{...S(r,a)||{}}],logList:n=>["logList",e,n,a].filter(u=>u!==void 0)};return l},en=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),mr=e=>e.startsWith(":"),rt=e=>e.split("/").filter(t=>t!==""),tn=(e,t)=>{let r=rt(e),a=rt(t);return r.length===a.length},Ne=e=>e.replace(/^\/|\/$/g,""),rn=(e,t)=>{let r=Ne(e),a=Ne(t);if(!tn(r,a))return!1;let o=rt(r);return rt(a).every((l,n)=>mr(l)||l===o[n])},an=(e,t,r)=>{let a=Ne(r||""),o=`${a}${a?"/":""}${e}`;return t==="list"?o=`${o}`:t==="create"?o=`${o}/create`:t==="edit"?o=`${o}/edit/:id`:t==="show"?o=`${o}/show/:id`:t==="clone"&&(o=`${o}/clone/:id`),`/${o.replace(/^\//,"")}`},Ue=(e,t)=>{var r,a;let o=S((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!o)return;let l=t.find(n=>{var u;return((u=n.identifier)!=null?u:n.name)===o});return l!=null?l:{name:o}},ka=(e,t,r)=>{let a=[],o=Ue(e,t);for(;o;)a.push(o),o=Ue(o,t);if(a.length!==0)return`/${a.reverse().map(l=>{var n,u;let c=r&&(u=(n=l.options)==null?void 0:n.route)!=null?u:l.name;return Ne(c)}).join("/")}`},ve=(e,t,r)=>{let a=[],o=["list","show","edit","create","clone"],l=ka(e,t,r);return o.forEach(n=>{var u,c,f,m;let v=r&&n==="clone"?e.create:e[n],P;typeof v=="function"||r?P=an(r&&(m=(f=(u=e.meta)==null?void 0:u.route)!=null?f:(c=e.options)==null?void 0:c.route)!=null?m:e.name,n,r?l:void 0):typeof v=="string"?P=v:typeof v=="object"&&(P=v.path),P&&a.push({action:n,resource:e,route:`/${P.replace(/^\//,"")}`})}),a},on=e=>{var t,r;if(e.length===0)return;if(e.length===1)return e[0];let a=e.map(n=>({...n,splitted:rt(Ne(n.route))})),o=(r=(t=a[0])==null?void 0:t.splitted.length)!=null?r:0,l=[...a];for(let n=0;n<o;n++){let u=l.filter(c=>!mr(c.splitted[n]));if(u.length!==0){if(u.length===1){l=u;break}l=u}}return l[0]},nn=(e,t)=>{let r=t.flatMap(o=>ve(o,t)).filter(o=>rn(e,o.route)),a=on(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},Na=(e,t)=>{var r,a,o;let l,n=ka(e,t,!0);if(n){let u=S(e.meta,e.options);l=`${n}/${(r=u==null?void 0:u.route)!=null?r:e.name}`}else l=(o=(a=e.options)==null?void 0:a.route)!=null?o:e.name;return`/${l.replace(/^\//,"")}`},ln=e=>{var t,r,a;let o=[],l={},n={},u,c;for(let f=0;f<e.length;f++){u=e[f];let m=(a=(r=u.route)!=null?r:(t=S(u==null?void 0:u.meta,u.options))==null?void 0:t.route)!=null?a:"";l[m]=u,l[m].children=[],n[u.name]=u,n[u.name].children=[]}for(let f in l)l.hasOwnProperty(f)&&(c=l[f],c.parentName&&n[c.parentName]?n[c.parentName].children.push(c):o.push(c));return o},Dt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Fa=M(w("react")),un=M(w("react")),$a=({children:e})=>un.default.createElement("div",null,e),ke={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Qe=Fa.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:$a,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:ke}),sn=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:o,children:l,DashboardPage:n,Title:u,Layout:c=$a,Header:f,Sider:m,Footer:v,OffLayoutArea:P,LoginPage:p=so,catchAll:s,liveMode:d="off",onLiveEvent:i,options:g})=>Fa.default.createElement(Qe.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:u,undoableTimeout:o,Layout:c,Header:f,Sider:m,Footer:v,OffLayoutArea:P,DashboardPage:n,LoginPage:p,catchAll:s,liveMode:d,onLiveEvent:i,options:g}},l),dn=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:o,reactQueryDevtoolConfig:l,syncWithLocation:n,undoableTimeout:u,warnWhenUnsavedChanges:c}={})=>{var f,m,v,P,p,s,d,i,g,E,y,C,h,b,x,L,D,q,T,O,F,N,A,k;let $={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(m=(f=e==null?void 0:e.mutationMode)!=null?f:a)!=null?m:ke.mutationMode,undoableTimeout:(P=(v=e==null?void 0:e.undoableTimeout)!=null?v:u)!=null?P:ke.undoableTimeout,syncWithLocation:(s=(p=e==null?void 0:e.syncWithLocation)!=null?p:n)!=null?s:ke.syncWithLocation,warnWhenUnsavedChanges:(i=(d=e==null?void 0:e.warnWhenUnsavedChanges)!=null?d:c)!=null?i:ke.warnWhenUnsavedChanges,liveMode:(E=(g=e==null?void 0:e.liveMode)!=null?g:r)!=null?E:ke.liveMode,redirect:{afterCreate:(C=(y=e==null?void 0:e.redirect)==null?void 0:y.afterCreate)!=null?C:ke.redirect.afterCreate,afterClone:(b=(h=e==null?void 0:e.redirect)==null?void 0:h.afterClone)!=null?b:ke.redirect.afterClone,afterEdit:(L=(x=e==null?void 0:e.redirect)==null?void 0:x.afterEdit)!=null?L:ke.redirect.afterEdit}},R=(q=(D=e==null?void 0:e.disableTelemetry)!=null?D:t)!=null?q:!1,_={clientConfig:(F=(O=(T=e==null?void 0:e.reactQuery)==null?void 0:T.clientConfig)!=null?O:o)!=null?F:{},devtoolConfig:(k=(A=(N=e==null?void 0:e.reactQuery)==null?void 0:N.devtoolConfig)!=null?A:l)!=null?k:{}};return{optionsWithDefaults:$,disableTelemetryWithDefault:R,reactQueryWithDefaults:_}},cn=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},Vr=async(e,t,r)=>{let a=[];for(let[o,l]of e.entries())try{let n=await l();a.push(t(n,o))}catch(n){a.push(r(n,o))}return a},K=(e,t=[],r=!1)=>{if(!!e)return r?t.find(o=>{var l;return Ne((l=o.route)!=null?l:"")===Ne(e)})||t.find(o=>o.name===e):t.find(a=>{var o;return((o=a.identifier)!=null?o:a.name)===e})},U=(e,t,r)=>{if(t)return t;let a=K(e,r),o=S(a==null?void 0:a.meta,a==null?void 0:a.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"},Ft=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),Aa=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,o=(t==null?void 0:t.pageSize)||10,l=Math.ceil((e.total||0)/o);return a<l?Number(a)+1:void 0},Ra=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},Oa=e=>{let t=[];return e==null||e.forEach(r=>{var a,o,l;t.push({...r,label:(l=(a=r.meta)==null?void 0:a.label)!=null?l:(o=r.options)==null?void 0:o.label,route:Na(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},mn=e=>rt(Ne(e)).flatMap(t=>mr(t)?[t.slice(1)]:[]),vn=(e,t={},r={})=>e.reduce((a,o)=>{var l;let n=r[o]||((l=t.params)==null?void 0:l[o])||(o==="id"?t.id:void 0)||(o==="action"?t.action:void 0)||(o==="resource"?t.resource:void 0);return typeof n<"u"&&(a[o]=n),a},{}),be=(e,t={},r={})=>{let a=mn(e),o=vn(a,t,r);return e.replace(/:([^\/]+)/g,(l,n)=>{let u=o[n];return typeof u<"u"?`${u}`:l})},te=()=>{let e=Ee(),t=Se();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},Ua=({hasPagination:e,pagination:t,configPagination:r}={})=>{var a,o,l;let n=e===!1?"off":"server",u=(a=t==null?void 0:t.mode)!=null?a:n,c=(o=S(t==null?void 0:t.current,r==null?void 0:r.current))!=null?o:1,f=(l=S(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?l:10;return{current:c,pageSize:f,mode:u}},vr=({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:l,queryOptions:n,successNotification:u,errorNotification:c,meta:f,metaData:m,liveMode:v,onLiveEvent:P,liveParams:p,dataProviderName:s})=>{let{resources:d}=B(),i=ne(),g=I(),E=te(),{mutate:y}=fe({v3LegacyAuthProviderCompatible:Boolean(E==null?void 0:E.isLegacy)}),C=ye(),h=U(e,s,d),b=S(f,m),x=S(r,t==null?void 0:t.filters),L=S(l,t==null?void 0:t.sort),D=S(a,t==null?void 0:t.hasPagination),q=Ua({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:D}),T=q.mode==="server",O={meta:b,metaData:b,filters:x,hasPagination:T,pagination:q,sorters:L,config:{...t,sort:L}},F=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,N=Pe(e,h,b,b),{getList:A}=i(h);return pt({resource:e,types:["*"],params:{meta:b,metaData:b,pagination:q,hasPagination:T,sort:L,sorters:L,filters:x,subscriptionType:"useList",...p},channel:`resources/${e}`,enabled:F,liveMode:v,onLiveEvent:P}),(0,zo.useQuery)(N.list({filters:x,hasPagination:T,...T&&{pagination:q},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:$,signal:R})=>A({resource:e,pagination:q,hasPagination:T,filters:x,sort:L,sorters:L,meta:{...b||{},queryContext:{queryKey:k,pageParam:$,signal:R}},metaData:{...b||{},queryContext:{queryKey:k,pageParam:$,signal:R}}}),{...n,enabled:typeof(n==null?void 0:n.enabled)<"u"?n==null?void 0:n.enabled:!!e,select:k=>{var $;let R=k,{current:_,mode:oe,pageSize:z}=q;return oe==="client"&&(R={...R,data:R.data.slice((_-1)*z,_*z),total:R.total}),n!=null&&n.select?($=n==null?void 0:n.select)==null?void 0:$.call(n,R):R},onSuccess:k=>{var $;($=n==null?void 0:n.onSuccess)==null||$.call(n,k);let R=typeof u=="function"?u(k,O,e):u;C(R)},onError:k=>{var $;y(k),($=n==null?void 0:n.onError)==null||$.call(n,k);let R=typeof c=="function"?c(k,O,e):c;C(R,{key:`${e}-useList-notification`,message:g("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}})},pn=w("@tanstack/react-query"),pr=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:o,meta:l,metaData:n,liveMode:u,onLiveEvent:c,liveParams:f,dataProviderName:m})=>{let{resources:v}=B(),P=ne(),p=Pe(e,U(e,m,v),S(l,n),S(l,n)),{getOne:s}=P(U(e,m,v)),d=I(),i=te(),{mutate:g}=fe({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),E=ye();return pt({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:S(l,n),metaData:S(l,n),subscriptionType:"useOne",...f},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:u,onLiveEvent:c}),(0,pn.useQuery)(p.detail(t),({queryKey:y,pageParam:C,signal:h})=>s({resource:e,id:t,meta:{...S(l,n)||{},queryContext:{queryKey:y,pageParam:C,signal:h}},metaData:{...S(l,n)||{},queryContext:{queryKey:y,pageParam:C,signal:h}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:y=>{var C;(C=r==null?void 0:r.onSuccess)==null||C.call(r,y);let h=typeof a=="function"?a(y,{id:t,...S(l,n)||{}},e):a;E(h)},onError:y=>{var C;g(y),(C=r==null?void 0:r.onError)==null||C.call(r,y);let h=typeof o=="function"?o(y,{id:t,...S(l,n)||{}},e):o;E(h,{key:`${t}-${e}-getOne-notification`,message:d("notifications.error",{statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}})},fn=w("@tanstack/react-query"),Qa=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:o,meta:l,metaData:n,liveMode:u,onLiveEvent:c,liveParams:f,dataProviderName:m})=>{let{resources:v}=B(),P=ne(),p=Pe(e,U(e,m,v),S(l,n),S(l,n)),{getMany:s,getOne:d}=P(U(e,m,v)),i=I(),g=te(),{mutate:E}=fe({v3LegacyAuthProviderCompatible:Boolean(g==null?void 0:g.isLegacy)}),y=ye(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return pt({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:S(l,n),metaData:S(l,n),subscriptionType:"useMany",...f},channel:`resources/${e}`,enabled:C,liveMode:u,onLiveEvent:c}),(0,fn.useQuery)(p.many(t),({queryKey:h,pageParam:b,signal:x})=>s?s({resource:e,ids:t,metaData:{...S(l,n)||{},queryContext:{queryKey:h,pageParam:b,signal:x}}}):Ft(t.map(L=>d({resource:e,id:L,metaData:{...S(l,n)||{},queryContext:{queryKey:h,pageParam:b,signal:x}}}))),{...r,onSuccess:h=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,h);let x=typeof a=="function"?a(h,t,e):a;y(x)},onError:h=>{var b;E(h),(b=r==null?void 0:r.onError)==null||b.call(r,h);let x=typeof o=="function"?o(h,t,e):o;y(x,{key:`${t[0]}-${e}-getMany-notification`,message:i("notifications.error",{statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}})},Hr=w("@tanstack/react-query"),Mt=M(w("react")),_t=M(w("lodash/isEqual")),Ba=Mt.default.createContext({notifications:[],notificationDispatch:()=>!1}),gn=[],yn=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,_t.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,_t.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,_t.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},hn=({children:e})=>{let[t,r]=(0,Mt.useReducer)(yn,gn),a={notifications:t,notificationDispatch:r};return Mt.default.createElement(Ba.Provider,{value:a},e,typeof window<"u"&&t.map(o=>Mt.default.createElement(mo,{key:`${o.id}-${o.resource}-queue`,notification:o})))},Ir=M(w("pluralize")),Wa=({mutationOptions:e}={})=>{let{resources:t}=B(),r=(0,Hr.useQueryClient)(),a=ne(),{mutationMode:o,undoableTimeout:l}=lt(),n=I(),u=te(),{mutate:c}=fe({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),f=Ye(),{log:m}=Ge(),{notificationDispatch:v}=ot(),P=ye(),p=Je();return(0,Hr.useMutation)(({id:s,values:d,resource:i,mutationMode:g,undoableTimeout:E,onCancel:y,meta:C,metaData:h,dataProviderName:b})=>{let x=g!=null?g:o,L=E!=null?E:l;return x!=="undoable"?a(U(i,b,t)).update({resource:i,id:s,variables:d,meta:S(C,h),metaData:S(C,h)}):new Promise((D,q)=>{let T=()=>{a(U(i,b,t)).update({resource:i,id:s,variables:d,meta:S(C,h),metaData:S(C,h)}).then(F=>D(F)).catch(F=>q(F))},O=()=>{q({message:"mutationCancelled"})};y&&y(O),v({type:"ADD",payload:{id:s,resource:i,cancelMutation:O,doMutation:T,seconds:L,isSilent:!!y}})})},{onMutate:async({resource:s,id:d,mutationMode:i,values:g,dataProviderName:E})=>{let y=Pe(s,U(s,E,t)),C=r.getQueriesData(y.resourceAll),h=i!=null?i:o;return await r.cancelQueries(y.resourceAll,void 0,{silent:!0}),h!=="pessimistic"&&(r.setQueriesData(y.list(),b=>{if(!b)return null;let x=b.data.map(L=>{var D;return((D=L.id)==null?void 0:D.toString())===(d==null?void 0:d.toString())?{id:d,...L,...g}:L});return{...b,data:x}}),r.setQueriesData(y.many(),b=>{if(!b)return null;let x=b.data.map(L=>{var D;return((D=L.id)==null?void 0:D.toString())===(d==null?void 0:d.toString())&&(L={id:d,...L,...g}),L});return{...b,data:x}}),r.setQueriesData(y.detail(d),b=>b?{...b,data:{...b.data,...g}}:null)),{previousQueries:C,queryKey:y}},onSettled:(s,d,{id:i,resource:g,dataProviderName:E,invalidates:y=["list","many","detail"]})=>{p({resource:g,dataProviderName:U(g,E,t),invalidates:y,id:i}),v({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(s,{id:d,resource:i,successNotification:g,dataProviderName:E,values:y,meta:C,metaData:h},b)=>{var x;let L=Ir.default.singular(i),D=typeof g=="function"?g(s,{id:d,values:y},i):g;P(D,{key:`${d}-${i}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${i}.${i}`,L)},`Successfully updated ${L}`),type:"success"}),f==null||f({channel:`resources/${i}`,type:"updated",payload:{ids:(x=s.data)!=null&&x.id?[s.data.id]:void 0},date:new Date});let q;if(b){let A=r.getQueryData(b.queryKey.detail(d));q=Object.keys(y||{}).reduce((k,$)=>{var R;return k[$]=(R=A==null?void 0:A.data)==null?void 0:R[$],k},{})}let{fields:T,operation:O,variables:F,...N}=S(C,h)||{};m==null||m.mutate({action:"update",resource:i,data:y,previousData:q,meta:{id:d,dataProviderName:U(i,E,t),...N}})},onError:(s,{id:d,resource:i,errorNotification:g,values:E},y)=>{if(y)for(let C of y.previousQueries)r.setQueryData(C[0],C[1]);if(s.message!=="mutationCancelled"){c==null||c(s);let C=Ir.default.singular(i),h=typeof g=="function"?g(s,{id:d,values:E},i):g;P(h,{key:`${d}-${i}-notification`,message:n("notifications.editError",{resource:n(`${i}.${i}`,C),statusCode:s.statusCode},`Error when updating ${C} (status code: ${s.statusCode})`),description:s.message,type:"error"})}},...e})},bn=w("@tanstack/react-query"),zr=M(w("pluralize")),fr=({mutationOptions:e}={})=>{let t=te(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ne(),o=Je(),{resources:l}=B(),n=I(),u=Ye(),{log:c}=Ge(),f=ye();return(0,bn.useMutation)(({resource:m,values:v,meta:P,metaData:p,dataProviderName:s})=>a(U(m,s,l)).create({resource:m,variables:v,meta:S(P,p),metaData:S(P,p)}),{onSuccess:(m,{resource:v,successNotification:P,dataProviderName:p,invalidates:s=["list","many"],values:d,meta:i,metaData:g})=>{var E,y,C;let h=zr.default.singular(v),b=typeof P=="function"?P(m,d,v):P;f(b,{key:`create-${v}-notification`,message:n("notifications.createSuccess",{resource:n(`${v}.${v}`,h)},`Successfully created ${h}`),description:n("notifications.success","Success"),type:"success"}),o({resource:v,dataProviderName:U(v,p,l),invalidates:s}),u==null||u({channel:`resources/${v}`,type:"created",payload:{ids:(E=m==null?void 0:m.data)!=null&&E.id?[m.data.id]:void 0},date:new Date});let{fields:x,operation:L,variables:D,...q}=S(i,g)||{};c==null||c.mutate({action:"create",resource:v,data:d,meta:{dataProviderName:U(v,p,l),id:(C=(y=m==null?void 0:m.data)==null?void 0:y.id)!=null?C:void 0,...q}})},onError:(m,{resource:v,errorNotification:P,values:p})=>{r(m);let s=zr.default.singular(v),d=typeof P=="function"?P(m,p,v):P;f(d,{key:`create-${v}-notification`,description:m.message,message:n("notifications.createError",{resource:n(`${v}.${v}`,s),statusCode:m.statusCode},`There was an error creating ${s} (status code: ${m.statusCode})`),type:"error"})},...e})},jr=w("@tanstack/react-query"),Kr=M(w("pluralize")),En=({mutationOptions:e}={})=>{let t=te(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ne(),{resources:o}=B(),l=(0,jr.useQueryClient)(),{mutationMode:n,undoableTimeout:u}=lt(),{notificationDispatch:c}=ot(),f=I(),m=Ye(),{log:v}=Ge(),P=ye(),p=Je();return(0,jr.useMutation)(({id:s,mutationMode:d,undoableTimeout:i,resource:g,onCancel:E,meta:y,metaData:C,dataProviderName:h,values:b})=>{let x=d!=null?d:n,L=i!=null?i:u;return x!=="undoable"?a(U(g,h,o)).deleteOne({resource:g,id:s,meta:S(y,C),metaData:S(y,C),variables:b}):new Promise((D,q)=>{let T=()=>{a(U(g,h,o)).deleteOne({resource:g,id:s,meta:S(y,C),variables:b}).then(F=>D(F)).catch(F=>q(F))},O=()=>{q({message:"mutationCancelled"})};E&&E(O),c({type:"ADD",payload:{id:s,resource:g,cancelMutation:O,doMutation:T,seconds:L,isSilent:!!E}})})},{onMutate:async({id:s,resource:d,mutationMode:i,dataProviderName:g})=>{let E=Pe(d,U(d,g,o)),y=i!=null?i:n;await l.cancelQueries(E.resourceAll,void 0,{silent:!0});let C=l.getQueriesData(E.resourceAll);return y!=="pessimistic"&&(l.setQueriesData(E.list(),h=>h?{data:h.data.filter(b=>{var x;return((x=b.id)==null?void 0:x.toString())!==s.toString()}),total:h.total-1}:null),l.setQueriesData(E.many(),h=>{if(!h)return null;let b=h.data.filter(x=>{var L;return((L=x.id)==null?void 0:L.toString())!==(s==null?void 0:s.toString())});return{...h,data:b}})),{previousQueries:C,queryKey:E}},onSettled:(s,d,{id:i,resource:g,dataProviderName:E,invalidates:y=["list","many"]})=>{p({resource:g,dataProviderName:U(g,E,o),invalidates:y}),c({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(s,{id:d,resource:i,successNotification:g,dataProviderName:E,meta:y,metaData:C},h)=>{let b=Kr.default.singular(i!=null?i:"");l.removeQueries(h==null?void 0:h.queryKey.detail(d));let x=typeof g=="function"?g(s,d,i):g;P(x,{key:`${d}-${i}-notification`,description:f("notifications.success","Success"),message:f("notifications.deleteSuccess",{resource:f(`${i}.${i}`,b)},`Successfully deleted a ${b}`),type:"success"}),m==null||m({channel:`resources/${i}`,type:"deleted",payload:{ids:d?[d]:[]},date:new Date});let{fields:L,operation:D,variables:q,...T}=S(y,C)||{};v==null||v.mutate({action:"delete",resource:i,meta:{id:d,dataProviderName:U(i,E,o),...T}}),l.removeQueries(h==null?void 0:h.queryKey.detail(d))},onError:(s,{id:d,resource:i,errorNotification:g},E)=>{if(E)for(let y of E.previousQueries)l.setQueryData(y[0],y[1]);if(s.message!=="mutationCancelled"){r(s);let y=Kr.default.singular(i!=null?i:""),C=typeof g=="function"?g(s,d,i):g;P(C,{key:`${d}-${i}-notification`,message:f("notifications.deleteError",{resource:y,statusCode:s.statusCode},`Error (status code: ${s.statusCode})`),description:s.message,type:"error"})}},...e})},Pn=w("@tanstack/react-query"),Cn=M(w("pluralize")),Va=({mutationOptions:e}={})=>{let t=ne(),{resources:r}=B(),a=I(),o=Ye(),l=ye(),n=Je(),{log:u}=Ge();return(0,Pn.useMutation)(({resource:c,values:f,meta:m,metaData:v,dataProviderName:P})=>{let p=t(U(c,P,r));return p.createMany?p.createMany({resource:c,variables:f,meta:S(m,v),metaData:S(m,v)}):Ft(f.map(s=>p.create({resource:c,variables:s,meta:S(m,v),metaData:S(m,v)})))},{onSuccess:(c,{resource:f,successNotification:m,dataProviderName:v,invalidates:P=["list","many"],values:p,meta:s,metaData:d})=>{let i=Cn.default.plural(f),g=typeof m=="function"?m(c,p,f):m;l(g,{key:`createMany-${f}-notification`,message:a("notifications.createSuccess",{resource:a(`${f}.${f}`,f)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),n({resource:f,dataProviderName:U(f,v,r),invalidates:P});let E=c==null?void 0:c.data.filter(x=>(x==null?void 0:x.id)!==void 0).map(x=>x.id);o==null||o({channel:`resources/${f}`,type:"created",payload:{ids:E},date:new Date});let{fields:y,operation:C,variables:h,...b}=S(s,d)||{};u==null||u.mutate({action:"createMany",resource:f,data:p,meta:{dataProviderName:U(f,v,r),ids:E,...b}})},onError:(c,{resource:f,errorNotification:m,values:v})=>{let P=typeof m=="function"?m(c,v,f):m;l(P,{key:`createMany-${f}-notification`,description:c.message,message:a("notifications.createError",{resource:a(`${f}.${f}`,f),statusCode:c.statusCode},`There was an error creating ${f} (status code: ${c.statusCode}`),type:"error"})},...e})},_r=w("@tanstack/react-query"),Yr=M(w("pluralize")),wn=({mutationOptions:e}={})=>{let{resources:t}=B(),r=(0,_r.useQueryClient)(),a=ne(),o=I(),{mutationMode:l,undoableTimeout:n}=lt(),u=te(),{mutate:c}=fe({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),{notificationDispatch:f}=ot(),m=Ye(),v=ye(),P=Je(),{log:p}=Ge();return(0,_r.useMutation)(({ids:s,values:d,resource:i,onCancel:g,mutationMode:E,undoableTimeout:y,meta:C,metaData:h,dataProviderName:b})=>{let x=E!=null?E:l,L=y!=null?y:n,D=a(U(i,b,t)),q=()=>D.updateMany?D.updateMany({resource:i,ids:s,variables:d,meta:S(C,h),metaData:S(C,h)}):Ft(s.map(T=>D.update({resource:i,id:T,variables:d,meta:S(C,h),metaData:S(C,h)})));return x!=="undoable"?q():new Promise((T,O)=>{let F=()=>{q().then(A=>T(A)).catch(A=>O(A))},N=()=>{O({message:"mutationCancelled"})};g&&g(N),f({type:"ADD",payload:{id:s,resource:i,cancelMutation:N,doMutation:F,seconds:L,isSilent:!!g}})})},{onMutate:async({resource:s,ids:d,values:i,mutationMode:g,dataProviderName:E,meta:y,metaData:C})=>{let h=Pe(s,U(s,E,t),S(y,C),S(y,C)),b=g!=null?g:l;await r.cancelQueries(h.resourceAll,void 0,{silent:!0});let x=r.getQueriesData(h.resourceAll);if(b!=="pessimistic"){r.setQueriesData(h.list(),L=>{if(!L)return null;let D=L.data.map(q=>q.id!==void 0&&d.filter(T=>T!==void 0).map(String).includes(q.id.toString())?{...q,...i}:q);return{...L,data:D}}),r.setQueriesData(h.many(),L=>{if(!L)return null;let D=L.data.map(q=>q.id!==void 0&&d.filter(T=>T!==void 0).map(String).includes(q.id.toString())?{...q,...i}:q);return{...L,data:D}});for(let L of d)r.setQueriesData(h.detail(L),D=>{if(!D)return null;let q={...D.data,...i};return{...D,data:q}})}return{previousQueries:x,queryKey:h}},onSettled:(s,d,{ids:i,resource:g,dataProviderName:E})=>{P({resource:g,invalidates:["list","many"],dataProviderName:U(g,E,t)}),i.forEach(y=>P({resource:g,invalidates:["detail"],dataProviderName:U(g,E,t),id:y})),f({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(s,{ids:d,resource:i,meta:g,metaData:E,dataProviderName:y,successNotification:C,values:h},b)=>{let x=Yr.default.singular(i),L=typeof C=="function"?C(s,{ids:d,values:h},i):C;v(L,{key:`${d}-${i}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${i}.${i}`,i)},`Successfully updated ${x}`),type:"success"}),m==null||m({channel:`resources/${i}`,type:"updated",payload:{ids:d.map(String)},date:new Date});let D=[];b&&d.forEach(N=>{let A=r.getQueryData(b.queryKey.detail(N));D.push(Object.keys(h||{}).reduce((k,$)=>{var R;return k[$]=(R=A==null?void 0:A.data)==null?void 0:R[$],k},{}))});let{fields:q,operation:T,variables:O,...F}=S(g,E)||{};p==null||p.mutate({action:"updateMany",resource:i,data:h,previousData:D,meta:{ids:d,dataProviderName:U(i,y,t),...F}})},onError:(s,{ids:d,resource:i,errorNotification:g,values:E},y)=>{if(y)for(let C of y.previousQueries)r.setQueryData(C[0],C[1]);if(s.message!=="mutationCancelled"){c==null||c(s);let C=Yr.default.singular(i),h=typeof g=="function"?g(s,{ids:d,values:E},i):g;v(h,{key:`${d}-${i}-updateMany-error-notification`,message:o("notifications.editError",{resource:C,statusCode:s.statusCode},`Error when updating ${C} (status code: ${s.statusCode})`),description:s.message,type:"error"})}},...e})},Gr=w("@tanstack/react-query"),Ln=M(w("pluralize")),xn=({mutationOptions:e}={})=>{let t=te(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:a,undoableTimeout:o}=lt(),l=ne(),{notificationDispatch:n}=ot(),u=I(),c=Ye(),f=ye(),m=Je(),{log:v}=Ge(),{resources:P}=B(),p=(0,Gr.useQueryClient)();return(0,Gr.useMutation)(({resource:s,ids:d,mutationMode:i,undoableTimeout:g,onCancel:E,meta:y,metaData:C,dataProviderName:h,values:b})=>{let x=i!=null?i:a,L=g!=null?g:o,D=l(U(s,h,P)),q=()=>D.deleteMany?D.deleteMany({resource:s,ids:d,meta:S(y,C),metaData:S(y,C),variables:b}):Ft(d.map(T=>D.deleteOne({resource:s,id:T,meta:S(y,C),metaData:S(y,C),variables:b})));return x!=="undoable"?q():new Promise((T,O)=>{let F=()=>{q().then(A=>T(A)).catch(A=>O(A))},N=()=>{O({message:"mutationCancelled"})};E&&E(N),n({type:"ADD",payload:{id:d,resource:s,cancelMutation:N,doMutation:F,seconds:L,isSilent:!!E}})})},{onMutate:async({ids:s,resource:d,mutationMode:i,dataProviderName:g})=>{let E=Pe(d,U(d,g,P)),y=i!=null?i:a;await p.cancelQueries(E.resourceAll,void 0,{silent:!0});let C=p.getQueriesData(E.resourceAll);if(y!=="pessimistic"){p.setQueriesData(E.list(),h=>h?{data:h.data.filter(b=>b.id&&!s.map(String).includes(b.id.toString())),total:h.total-1}:null),p.setQueriesData(E.many(),h=>{if(!h)return null;let b=h.data.filter(x=>x.id?!s.map(String).includes(x.id.toString()):!1);return{...h,data:b}});for(let h of s)p.setQueriesData(E.detail(h),b=>!b||b.data.id==h?null:{...b})}return{previousQueries:C,queryKey:E}},onSettled:(s,d,{resource:i,ids:g,dataProviderName:E,invalidates:y=["list","many"]})=>{m({resource:i,dataProviderName:U(i,E,P),invalidates:y}),n({type:"REMOVE",payload:{id:g,resource:i}})},onSuccess:(s,{ids:d,resource:i,meta:g,metaData:E,dataProviderName:y,successNotification:C},h)=>{d.forEach(T=>p.removeQueries(h==null?void 0:h.queryKey.detail(T)));let b=typeof C=="function"?C(s,d,i):C;f(b,{key:`${d}-${i}-notification`,description:u("notifications.success","Success"),message:u("notifications.deleteSuccess",{resource:u(`${i}.${i}`,i)},`Successfully deleted ${i}`),type:"success"}),c==null||c({channel:`resources/${i}`,type:"deleted",payload:{ids:d},date:new Date});let{fields:x,operation:L,variables:D,...q}=S(g,E)||{};v==null||v.mutate({action:"deleteMany",resource:i,meta:{ids:d,dataProviderName:U(i,y,P),...q}}),d.forEach(T=>p.removeQueries(h==null?void 0:h.queryKey.detail(T)))},onError:(s,{ids:d,resource:i,errorNotification:g},E)=>{if(E)for(let y of E.previousQueries)p.setQueryData(y[0],y[1]);if(s.message!=="mutationCancelled"){r(s);let y=Ln.default.singular(i),C=typeof g=="function"?g(s,d,i):g;f(C,{key:`${d}-${i}-notification`,message:u("notifications.deleteError",{resource:y,statusCode:s.statusCode},`Error (status code: ${s.statusCode})`),description:s.message,type:"error"})}},...e})},Sn=e=>{let t=ne(),{getApiUrl:r}=t(e);return r()},qn=w("@tanstack/react-query"),Dn=({url:e,method:t,config:r,queryOptions:a,successNotification:o,errorNotification:l,meta:n,metaData:u,dataProviderName:c})=>{let f=ne(),{custom:m}=f(c),v=te(),{mutate:P}=fe({v3LegacyAuthProviderCompatible:Boolean(v==null?void 0:v.isLegacy)}),p=I(),s=ye();if(m)return(0,qn.useQuery)({queryKey:[c,"custom",t,e,{...r,...S(n,u)||{}}],queryFn:({queryKey:d,pageParam:i,signal:g})=>m({url:e,method:t,...r,metaData:{...S(n,u)||{},queryContext:{queryKey:d,pageParam:i,signal:g}}}),...a,onSuccess:d=>{var i;(i=a==null?void 0:a.onSuccess)==null||i.call(a,d);let g=typeof o=="function"?o(d,{...r,...S(n,u)||{}}):o;s(g)},onError:d=>{var i;P(d),(i=a==null?void 0:a.onError)==null||i.call(a,d);let g=typeof l=="function"?l(d,{...r,...S(n,u)||{}}):l;s(g,{key:`${t}-notification`,message:p("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},Mn=w("@tanstack/react-query"),Tn=({mutationOptions:e}={})=>{let t=te(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ye(),o=ne(),l=I();return(0,Mn.useMutation)(({url:n,method:u,values:c,meta:f,metaData:m,dataProviderName:v,config:P})=>{let{custom:p}=o(v);if(p)return p({url:n,method:u,payload:c,meta:S(f,m),metaData:S(f,m),headers:{...P==null?void 0:P.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(n,{successNotification:u,config:c,meta:f,metaData:m})=>{let v=typeof u=="function"?u(n,{...c,...S(f,m)||{}}):u;a(v)},onError:(n,{errorNotification:u,method:c,config:f,meta:m,metaData:v})=>{r(n);let P=typeof u=="function"?u(n,{...f,...S(m,v)||{}}):u;a(P,{key:`${c}-notification`,message:l("notifications.error",{statusCode:n.statusCode},`Error (status code: ${n.statusCode})`),description:n.message,type:"error"})},...e})},Jr=w("react"),Ha=M(w("react")),kn=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),gr=Ha.default.createContext(kn()),Nn=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Ha.default.createElement(gr.Provider,{value:r},e)},ne=()=>{let e=(0,Jr.useContext)(gr);return(0,Jr.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},Fn=w("@tanstack/react-query"),$n=({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:l,queryOptions:n,successNotification:u,errorNotification:c,meta:f,metaData:m,liveMode:v,onLiveEvent:P,liveParams:p,dataProviderName:s})=>{let{resources:d}=B(),i=ne(),g=I(),E=te(),{mutate:y}=fe({v3LegacyAuthProviderCompatible:Boolean(E==null?void 0:E.isLegacy)}),C=ye(),h=U(e,s,d),b=S(f,m),x=S(r,t==null?void 0:t.filters),L=S(l,t==null?void 0:t.sort),D=S(a,t==null?void 0:t.hasPagination),q=Ua({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:D}),T=q.mode==="server",O={meta:b,metaData:b,filters:x,hasPagination:T,pagination:q,sorters:L,config:{...t,sort:L}},F=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,N=Pe(e,h,b,b),{getList:A}=i(h);return pt({resource:e,types:["*"],params:{meta:b,metaData:b,pagination:q,hasPagination:T,sort:L,sorters:L,filters:x,subscriptionType:"useList",...p},channel:`resources/${e}`,enabled:F,liveMode:v,onLiveEvent:P}),(0,Fn.useInfiniteQuery)(N.list({filters:x,hasPagination:T,...T&&{pagination:q},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:$,signal:R})=>{let _={...q,current:$};return A({resource:e,pagination:_,hasPagination:T,filters:x,sort:L,sorters:L,meta:{...b||{},queryContext:{queryKey:k,pageParam:$,signal:R}},metaData:{...b||{},queryContext:{queryKey:k,pageParam:$,signal:R}}}).then(({data:oe,total:z,...Q})=>({data:oe,total:z,pagination:_,...Q}))},{getNextPageParam:k=>Aa(k),getPreviousPageParam:k=>Ra(k),...n,onSuccess:k=>{var $;($=n==null?void 0:n.onSuccess)==null||$.call(n,k);let R=typeof u=="function"?u(k,O,e):u;C(R)},onError:k=>{var $;y(k),($=n==null?void 0:n.onError)==null||$.call(n,k);let R=typeof c=="function"?c(k,O,e):c;C(R,{key:`${e}-useInfiniteList-notification`,message:g("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}})},Yt=w("react"),An=w("@tanstack/react-query"),Ia=M(w("react")),vt=Ia.default.createContext(void 0),Rn=({liveProvider:e,children:t})=>Ia.default.createElement(vt.Provider,{value:e},t),pt=({resource:e,params:t,channel:r,types:a,enabled:o=!0,liveMode:l,onLiveEvent:n})=>{let u=(0,An.useQueryClient)(),c=Pe(e),f=(0,Yt.useContext)(vt),{liveMode:m,onLiveEvent:v}=(0,Yt.useContext)(Qe),P=l!=null?l:m;(0,Yt.useEffect)(()=>{let p;return P&&P!=="off"&&o&&(p=f==null?void 0:f.subscribe({channel:r,params:{resource:e,...t},types:a,callback:s=>{P==="auto"&&u.invalidateQueries(c.resourceAll),n==null||n(s),v==null||v(s)}})),()=>{p&&(f==null||f.unsubscribe(p))}},[o])},On=w("react"),za=e=>{let{liveMode:t}=(0,On.useContext)(Qe);return e!=null?e:t},Zr=w("react"),Un=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:o})=>{let l=(0,Zr.useContext)(vt);(0,Zr.useEffect)(()=>{let n;return a&&(n=l==null?void 0:l.subscribe({channel:t,params:e,types:r,callback:o})),()=>{n&&(l==null||l.unsubscribe(n))}},[a])},Qn=w("react"),Ye=()=>{let e=(0,Qn.useContext)(vt);return e==null?void 0:e.publish},Bn=w("react"),ja=M(w("react")),Wn=w("react"),Vn=w("react"),Hn=M(w("lodash/isEqual")),In=e=>{let t=(0,Vn.useRef)(e);return(0,Hn.default)(t.current,e)||(t.current=e),t.current},Ka=(e,t)=>{let r=In(t);return(0,Wn.useMemo)(e,r)},ft=ja.default.createContext({resources:[]}),zn=({resources:e,children:t})=>{let r=Ka(()=>Oa(e!=null?e:[]),[e]);return ja.default.createElement(ft.Provider,{value:{resources:r}},t)},_a=M(w("react")),Ya=_a.default.createContext("new"),jn=Ya.Provider,Y=()=>_a.default.useContext(Ya),Kn=M(w("react")),Ga=M(w("react")),Ja={},gt=(0,Ga.createContext)(Ja),_n=({children:e,router:t})=>Ga.default.createElement(gt.Provider,{value:t!=null?t:Ja},e),Xr=M(w("react")),Za=()=>{let e=(0,Xr.useContext)(gt);return Xr.default.useMemo(()=>{var t;return(t=e==null?void 0:e.parse)!=null?t:()=>()=>({})},[e==null?void 0:e.parse])()},ge=()=>{let e=Za();return Kn.default.useMemo(()=>e(),[e])};function B(e){var t,r;let{resources:a}=(0,Bn.useContext)(ft),o=Y(),l=ge(),n={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},u=yt(),{useParams:c}=ae(),f=c();if(o==="legacy"){let P=n.resourceNameOrRouteName?n.resourceNameOrRouteName:f.resource,p=P?u(P):void 0,s=(t=n==null?void 0:n.recordItemId)!=null?t:f.id,d=f.action,i=(r=n==null?void 0:n.resourceName)!=null?r:p==null?void 0:p.name;return{resources:a,resource:p,resourceName:i,id:s,action:d}}let m,v=typeof e=="string"?e:n==null?void 0:n.resourceNameOrRouteName;if(v){let P=K(v,a);P?m=P:m={name:v}}else l!=null&&l.resource&&(m=l.resource);return{resources:a,resource:m,resourceName:m==null?void 0:m.name,id:l.id,action:l.action}}var ea=w("react"),yt=()=>{let{resources:e}=(0,ea.useContext)(ft);return(0,ea.useCallback)(t=>K(t,e,!0)||{name:t,route:t},[e])},Yn=w("react"),ot=()=>{let{notifications:e,notificationDispatch:t}=(0,Yn.useContext)(Ba);return{notifications:e,notificationDispatch:t}},Gn=w("react"),Xa=M(w("react")),yr=(0,Xa.createContext)({}),Jn=({open:e,close:t,children:r})=>Xa.default.createElement(yr.Provider,{value:{open:e,close:t}},r),Be=()=>{let{open:e,close:t}=(0,Gn.useContext)(yr);return{open:e,close:t}},Zn=w("react"),ye=()=>{let{open:e}=Be();return(0,Zn.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},ta=w("react"),eo=M(w("react")),nt=eo.default.createContext({}),Xn=({children:e,i18nProvider:t})=>eo.default.createElement(nt.Provider,{value:{i18nProvider:t}},e),el=()=>{let{i18nProvider:e}=(0,ta.useContext)(nt);return(0,ta.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},ra=w("react"),I=()=>{let{i18nProvider:e}=(0,ra.useContext)(nt);return(0,ra.useMemo)(()=>{function t(r,a,o){var l,n;return(n=(l=e==null?void 0:e.translate(r,a,o))!=null?l:o)!=null?n:typeof a=="string"&&typeof o>"u"?a:r}return t},[e])},aa=w("react"),tl=()=>{let{i18nProvider:e}=(0,aa.useContext)(nt);return(0,aa.useCallback)(()=>e==null?void 0:e.getLocale(),[])},rl=w("react"),lt=()=>{let{mutationMode:e,undoableTimeout:t}=(0,rl.useContext)(Qe);return{mutationMode:e,undoableTimeout:t}},oa=w("react"),nr=M(w("react")),to=nr.default.createContext({}),al=({children:e})=>{let[t,r]=(0,nr.useState)(!1);return nr.default.createElement(to.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},hr=()=>{let{warnWhenUnsavedChanges:e}=(0,oa.useContext)(Qe),{warnWhen:t,setWarnWhen:r}=(0,oa.useContext)(to);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},ol=w("react"),ro=()=>{let{syncWithLocation:e}=(0,ol.useContext)(Qe);return{syncWithLocation:e}},nl=w("react"),ll=()=>{let{Title:e}=(0,nl.useContext)(Qe);return e},il=w("react"),br=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:l,hasDashboard:n,mutationMode:u,syncWithLocation:c,undoableTimeout:f,warnWhenUnsavedChanges:m,DashboardPage:v,LoginPage:P,catchAll:p,options:s}=(0,il.useContext)(Qe);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:l,hasDashboard:n,mutationMode:u,syncWithLocation:c,undoableTimeout:f,warnWhenUnsavedChanges:m,DashboardPage:v,LoginPage:P,catchAll:p,options:s}},ul=w("react"),sl=w("export-to-csv-fix-source-map"),dl=({resourceName:e,resource:t,sorter:r,sorters:a,filters:o,maxItemCount:l,pageSize:n=20,mapData:u=p=>p,exportOptions:c,meta:f,metaData:m,dataProviderName:v,onError:P}={})=>{var p;let[s,d]=(0,ul.useState)(!1),i=ne(),{resource:g,resources:E}=B(),y=`${cr(g==null?void 0:g.name,"plural")}-${new Date().toLocaleString()}`,{getList:C}=i(U((p=g==null?void 0:g.identifier)!=null?p:g==null?void 0:g.name,v,E));return{isLoading:s,triggerExport:async()=>{var h;d(!0);let b=[],x=1,L=!0;for(;L;)try{let{data:D,total:q}=await C({resource:(h=g==null?void 0:g.name)!=null?h:"",filters:o,sort:S(a,r),sorters:S(a,r),pagination:{current:x,pageSize:n,mode:"server"},meta:S(f,m),metaData:S(f,m)});x++,b.push(...D),l&&b.length>=l&&(b=b.slice(0,l),L=!1),q===b.length&&(L=!1)}catch(D){d(!1),L=!1,P==null||P(D);return}new sl.ExportToCsv({filename:y,useKeysAsHeaders:!0,...c}).generateCsv(b.map(u)),d(!1)}}},na=M(w("react")),cl=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:o,redirect:l,successNotification:n,errorNotification:u,meta:c,metaData:f,mutationMode:m,liveMode:v,onLiveEvent:P,liveParams:p,undoableTimeout:s,dataProviderName:d,invalidates:i,queryOptions:g,createMutationOptions:E,updateMutationOptions:y}={})=>{let{options:C}=br(),{resources:h}=B(),b=Y(),{resource:x,id:L,action:D}=ge(),{useParams:q}=ae(),{resource:T,action:O,id:F}=q(),N=typeof x=="string"?x:x==null?void 0:x.name,A=!e||e===(b==="legacy"?T:N)?r!=null?r:b==="legacy"?F:L:r,[k,$]=na.default.useState(A);na.default.useEffect(()=>{A!==k&&$(r)},[r]);let R=e!=null?e:b==="legacy"?T:N,_=b==="legacy"?O:D,oe=t!=null?t:_==="edit"||_==="clone"?_:"create",z=yt(),Q;if(b==="legacy")R&&(Q=z(R));else if(e){let H=K(e,h);H?Q=H:Q={name:e,route:e}}else if(typeof x=="string"){let H=K(x,h);H?Q=H:Q={name:x,route:x}}else Q=x;let{mutationMode:re}=lt(),de=m!=null?m:re,G=oe==="create",j=oe==="edit",J=oe==="clone",Fe=cn({redirectFromProps:l,action:oe,redirectOptions:C.redirect}),$e=k!==void 0&&(j||J),We=pr({resource:Q==null?void 0:Q.name,id:k!=null?k:"",queryOptions:{enabled:$e,...g},liveMode:v,onLiveEvent:P,liveParams:p,meta:S(c,f),metaData:S(c,f),dataProviderName:d}),{isFetching:it}=We,ut=fr({mutationOptions:E}),{mutate:bt,isLoading:qe}=ut,st=Wa({mutationOptions:y}),{mutate:Ae,isLoading:Bt}=st,{setWarnWhen:Ve}=hr(),Re=ao();return{...G||J?{formLoading:it||qe,mutationResult:ut,onFinish:async H=>{Ve(!1);let le=De=>{Re({redirect:Fe,resource:Q,id:De,meta:f})};return de!=="pessimistic"&&setTimeout(()=>{le()}),new Promise((De,He)=>{if(de!=="pessimistic"&&De(),!!Q)return bt({values:H,resource:Q.name,successNotification:n,errorNotification:u,meta:S(c,f),metaData:S(c,f),dataProviderName:d,invalidates:i},{onSuccess:(Le,Me,ie)=>{var Te;a&&a(Le,H,ie);let Ie=(Te=Le==null?void 0:Le.data)==null?void 0:Te.id;le(Ie),De(Le)},onError:(Le,Me,ie)=>{if(o)return o(Le,H,ie);He()}})})}}:{formLoading:it||Bt,mutationResult:st,onFinish:async H=>{if(Ve(!1),!Q)return;let le={id:k!=null?k:"",values:H,resource:Q.name,mutationMode:de,undoableTimeout:s,successNotification:n,errorNotification:u,meta:S(c,f),metaData:S(c,f),dataProviderName:d,invalidates:i},De=()=>{$(A),Re({redirect:Fe,resource:Q,id:k,meta:f})};return de!=="pessimistic"&&setTimeout(()=>{De()}),new Promise((He,Le)=>(de!=="pessimistic"&&He(),setTimeout(()=>{Ae(le,{onSuccess:(Me,ie,Te)=>{a&&a(Me,H,Te),de==="pessimistic"&&De(),He(Me)},onError:(Me,ie,Te)=>{if(o)return o(Me,H,Te);Le()}})})))}},queryResult:We,id:k,setId:$,redirect:(H,le)=>{Re({redirect:H!==void 0?H:j?"list":"edit",resource:Q,id:le!=null?le:k,meta:f})}}},ml=w("react"),ao=()=>{let{show:e,edit:t,list:r,create:a}=we();return(0,ml.useCallback)(({redirect:o,resource:l,id:n,meta:u={}})=>{if(o&&l)return!!l.show&&o==="show"&&n?e(l,n,void 0,u):!!l.edit&&o==="edit"&&n?t(l,n,void 0,u):!!l.create&&o==="create"?a(l,void 0,u):r(l,"push",u)},[])},la=M(w("react")),Ce=()=>{let e=(0,la.useContext)(gt);return la.default.useMemo(()=>{var t;return(t=e==null?void 0:e.go)!=null?t:()=>()=>{}},[e==null?void 0:e.go])()},ia=M(w("react")),oo=()=>{let e=(0,ia.useContext)(gt);return ia.default.useMemo(()=>{var t;return(t=e==null?void 0:e.back)!=null?t:()=>()=>{}},[e==null?void 0:e.back])()},we=()=>{let{resources:e}=B(),t=Y(),{useHistory:r}=ae(),a=r(),o=ge(),l=Ce(),n=oo(),u=(p,s="push")=>{t==="legacy"?a[s](p):l({to:p,type:s})},c=(p,s={})=>{var d,i,g;if(t==="legacy"){let E=typeof p=="string"?(d=K(p,e,!0))!=null?d:{name:p,route:p}:p,y=ve(E,e,!0).find(C=>C.action==="create");return y?be(y.route,o,s):""}else{let E=typeof p=="string"?(i=K(p,e))!=null?i:{name:p}:p,y=(g=ve(E,e).find(C=>C.action==="create"))==null?void 0:g.route;return y?l({to:be(y,o,s),type:"path"}):""}},f=(p,s,d={})=>{var i,g,E;let y=encodeURIComponent(s);if(t==="legacy"){let C=typeof p=="string"?(i=K(p,e,!0))!=null?i:{name:p,route:p}:p,h=ve(C,e,!0).find(b=>b.action==="edit");return h?be(h.route,o,{...d,id:y}):""}else{let C=typeof p=="string"?(g=K(p,e))!=null?g:{name:p}:p,h=(E=ve(C,e).find(b=>b.action==="edit"))==null?void 0:E.route;return h?l({to:be(h,o,{...d,id:y}),type:"path"}):""}},m=(p,s,d={})=>{var i,g,E;let y=encodeURIComponent(s);if(t==="legacy"){let C=typeof p=="string"?(i=K(p,e,!0))!=null?i:{name:p,route:p}:p,h=ve(C,e,!0).find(b=>b.action==="clone");return h?be(h.route,o,{...d,id:y}):""}else{let C=typeof p=="string"?(g=K(p,e))!=null?g:{name:p}:p,h=(E=ve(C,e).find(b=>b.action==="clone"))==null?void 0:E.route;return h?l({to:be(h,o,{...d,id:y}),type:"path"}):""}},v=(p,s,d={})=>{var i,g,E;let y=encodeURIComponent(s);if(t==="legacy"){let C=typeof p=="string"?(i=K(p,e,!0))!=null?i:{name:p,route:p}:p,h=ve(C,e,!0).find(b=>b.action==="show");return h?be(h.route,o,{...d,id:y}):""}else{let C=typeof p=="string"?(g=K(p,e))!=null?g:{name:p}:p,h=(E=ve(C,e).find(b=>b.action==="show"))==null?void 0:E.route;return h?l({to:be(h,o,{...d,id:y}),type:"path"}):""}},P=(p,s={})=>{var d,i,g;if(t==="legacy"){let E=typeof p=="string"?(d=K(p,e,!0))!=null?d:{name:p,route:p}:p,y=ve(E,e,!0).find(C=>C.action==="list");return y?be(y.route,o,s):""}else{let E=typeof p=="string"?(i=K(p,e))!=null?i:{name:p}:p,y=(g=ve(E,e).find(C=>C.action==="list"))==null?void 0:g.route;return y?l({to:be(y,o,s),type:"path"}):""}};return{create:(p,s="push",d={})=>{u(c(p,d),s)},createUrl:c,edit:(p,s,d="push",i={})=>{u(f(p,s,i),d)},editUrl:f,clone:(p,s,d="push",i={})=>{u(m(p,s,i),d)},cloneUrl:m,show:(p,s,d="push",i={})=>{u(v(p,s,i),d)},showUrl:v,list:(p,s="push",d={})=>{u(P(p,d),s)},listUrl:P,push:(p,...s)=>{t==="legacy"?a.push(p,...s):l({to:p,type:"push"})},replace:(p,...s)=>{t==="legacy"?a.replace(p,...s):l({to:p,type:"replace"})},goBack:()=>{t==="legacy"?a.goBack():n()}}},ua=M(w("react")),vl=({resource:e,id:t,successNotification:r,errorNotification:a,meta:o,metaData:l,liveMode:n,onLiveEvent:u,dataProviderName:c,queryOptions:f}={})=>{let m=Y(),{resources:v}=B(),{useParams:P}=ae(),{resource:p,id:s}=ge(),{resource:d,id:i}=P(),g=p==null?void 0:p.name,E=!e||e===(m==="legacy"?d:g)?t!=null?t:m==="legacy"?i:s:t,[y,C]=(0,ua.useState)(E);ua.default.useEffect(()=>{E!==y&&C(E)},[E]);let h=e!=null?e:m==="legacy"?d:g,b,x=yt();if(m==="legacy")h&&(b=x(h));else if(e){let L=K(e,v);L?b=L:b={name:e,route:e}}else if(typeof p=="string"){let L=K(p,v);L?b=L:b={name:p,route:p}}else b=p;return{queryResult:pr({resource:b==null?void 0:b.name,id:y!=null?y:"",queryOptions:{enabled:y!==void 0,...f},successNotification:r,errorNotification:a,meta:S(o,l),metaData:S(o,l),liveMode:n,onLiveEvent:u,dataProviderName:c}),showId:y,setShowId:C}},Lt=w("react"),pl=w("papaparse"),fl=M(w("lodash/chunk")),gl=({resourceName:e,resource:t,mapData:r=m=>m,paparseOptions:a,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:l,meta:n,metaData:u,onProgress:c,dataProviderName:f}={})=>{let[m,v]=(0,Lt.useState)(0),[P,p]=(0,Lt.useState)(0),[s,d]=(0,Lt.useState)(!1),{resource:i}=B(t!=null?t:e),g=Va(),E=fr(),y;o===1?y=E:y=g;let C=()=>{p(0),v(0),d(!1)},h=x=>{let L={succeeded:x.filter(D=>D.type==="success"),errored:x.filter(D=>D.type==="error")};l==null||l(L),d(!1)};(0,Lt.useEffect)(()=>{c==null||c({totalAmount:P,processedAmount:m})},[P,m]);let b=({file:x})=>(C(),new Promise(L=>{d(!0),(0,pl.parse)(x,{complete:async({data:D})=>{let q=Sa(D,r);if(p(q.length),o===1){let T=q.map(F=>async()=>{var N;return{response:await E.mutateAsync({resource:(N=i==null?void 0:i.name)!=null?N:"",values:F,successNotification:!1,errorNotification:!1,dataProviderName:f,meta:S(n,u),metaData:S(n,u)}),value:F}}),O=await Vr(T,({response:F,value:N})=>(v(A=>A+1),{response:[F.data],type:"success",request:[N]}),(F,N)=>({response:[F],type:"error",request:[q[N]]}));L(O)}else{let T=(0,fl.default)(q,o),O=T.map(N=>async()=>{var A;return{response:await g.mutateAsync({resource:(A=i==null?void 0:i.name)!=null?A:"",values:N,successNotification:!1,errorNotification:!1,dataProviderName:f,meta:S(n,u),metaData:S(n,u)}),value:N,currentBatchLength:N.length}}),F=await Vr(O,({response:N,currentBatchLength:A,value:k})=>(v($=>$+A),{response:N.data,type:"success",request:k}),(N,A)=>({response:[N],type:"error",request:T[A]}));L(F)}},...a})}).then(L=>(h(L),L)));return{inputProps:{type:"file",accept:".csv",onChange:x=>{x.target.files&&x.target.files.length>0&&b({file:x.target.files[0]})}},mutationResult:y,isLoading:s,handleChange:b}},Gt=w("react"),yl=({defaultVisible:e=!1}={})=>{let[t,r]=(0,Gt.useState)(e),a=(0,Gt.useCallback)(()=>r(!0),[t]),o=(0,Gt.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:o}},hl=M(w("react")),Er=()=>{let e=Y(),{resource:t,resources:r}=B(),a=ge();return hl.default.useCallback(({resource:o,action:l,meta:n})=>{var u;let c=o||t;if(!c)return;let f=(u=ve(c,r,e==="legacy").find(m=>m.action===l))==null?void 0:u.route;return f?be(f,a,n):void 0},[r,t,a])},bl=({resource:e,action:t,meta:r,legacy:a})=>Er()({resource:e,action:t,meta:r,legacy:a}),sa=M(w("react")),$t=()=>{let e=(0,sa.useContext)(gt);return e!=null&&e.Link?e.Link:({to:t,...r})=>sa.default.createElement("a",{href:t,...r})},El=w("react"),no=M(w("react")),Oe={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Pl=no.default.createContext(Oe),Pr=Pl,Cl=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:l,routes:n})=>no.default.createElement(Pr.Provider,{value:{useHistory:t!=null?t:Oe.useHistory,useLocation:r!=null?r:Oe.useLocation,useParams:a!=null?a:Oe.useParams,Prompt:o!=null?o:Oe.Prompt,Link:l!=null?l:Oe.Link,routes:n!=null?n:Oe.routes}},e),ae=()=>{let e=(0,El.useContext)(Pr),{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:l,routes:n}=e!=null?e:Oe;return{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:l,routes:n}},wl=w("@tanstack/react-query"),Ll=w("react"),lo=M(w("react")),At=lo.default.createContext({}),xl=({can:e,children:t})=>lo.default.createElement(At.Provider,{value:{can:e}},t),Sl=e=>{let{icon:t,list:r,edit:a,create:o,show:l,clone:n,children:u,meta:c,options:f,...m}=e,{icon:v,...P}=c!=null?c:{},{icon:p,...s}=f!=null?f:{};return{...m,...c?{meta:P}:{},...f?{options:s}:{}}},io=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:o}=(0,Ll.useContext)(At),{resource:l,...n}=r!=null?r:{},u=Sl(l!=null?l:{}),c=(0,wl.useQuery)(["useCan",{action:e,resource:t,params:{...n,resource:u},enabled:a==null?void 0:a.enabled}],()=>{var f;return(f=o==null?void 0:o({action:e,resource:t,params:n}))!=null?f:Promise.resolve({can:!0})},{enabled:typeof o<"u",...a,retry:!1});return typeof o>"u"?{data:{can:!0}}:c},ql=w("react"),Dl=()=>{let{can:e}=(0,ql.useContext)(At);return{can:e}},Ze=w("react"),Ml=M(w("lodash/uniqBy")),Tl=M(w("lodash/debounce")),xt=M(w("lodash/get")),kl=e=>{var t,r,a;let[o,l]=(0,Ze.useState)([]),[n,u]=(0,Ze.useState)([]),[c,f]=(0,Ze.useState)([]),{resource:m,sort:v,sorters:P,filters:p=[],optionLabel:s="title",optionValue:d="id",debounce:i=300,successNotification:g,errorNotification:E,defaultValueQueryOptions:y,queryOptions:C,fetchSize:h,pagination:b,hasPagination:x=!1,liveMode:L,defaultValue:D=[],onLiveEvent:q,onSearch:T,liveParams:O,meta:F,metaData:N,dataProviderName:A}=e,{resources:k}=B(),$=K(m,k),R=(t=$==null?void 0:$.name)!=null?t:m,_=Array.isArray(D)?D:[D],oe=(0,Ze.useCallback)(j=>{f(j.data.map(J=>({label:(0,xt.default)(J,s),value:(0,xt.default)(J,d)})))},[s,d]),z=y!=null?y:C,Q=Qa({resource:R,ids:_,queryOptions:{...z,enabled:_.length>0&&((r=y==null?void 0:y.enabled)!=null?r:!0),onSuccess:j=>{var J;oe(j),(J=z==null?void 0:z.onSuccess)==null||J.call(z,j)}},meta:S(F,N),metaData:S(F,N),liveMode:"off",dataProviderName:A}),re=(0,Ze.useCallback)(j=>{u(j.data.map(J=>({label:(0,xt.default)(J,s),value:(0,xt.default)(J,d)})))},[s,d]),de=vr({resource:R,sorters:S(P,v),filters:p.concat(o),pagination:{current:b==null?void 0:b.current,pageSize:(a=b==null?void 0:b.pageSize)!=null?a:h,mode:b==null?void 0:b.mode},hasPagination:x,queryOptions:{...C,onSuccess:j=>{var J;re(j),(J=C==null?void 0:C.onSuccess)==null||J.call(C,j)}},successNotification:g,errorNotification:E,meta:S(F,N),metaData:S(F,N),liveMode:L,liveParams:O,onLiveEvent:q,dataProviderName:A}),G=j=>{if(T){l(T(j));return}if(j)l([{field:s,operator:"contains",value:j}]);else{l([]);return}};return{queryResult:de,defaultValueQueryResult:Q,options:(0,Ze.useMemo)(()=>(0,Ml.default)([...n,...c],"value"),[n,c]),onSearch:(0,Tl.default)(G,i)}},Ke=M(w("react")),da=M(w("qs")),St=M(w("lodash/differenceWith")),qt=M(w("lodash/isEqual")),Nl=M(w("warn-once")),ca=[],ma=[];function Fl({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:o,permanentSorter:l=ma,defaultSetFilterBehavior:n,initialFilter:u,permanentFilter:c=ca,filters:f,sorters:m,syncWithLocation:v,resource:P,successNotification:p,errorNotification:s,queryOptions:d,liveMode:i,onLiveEvent:g,liveParams:E,meta:y,metaData:C,dataProviderName:h}={}){var b,x,L,D,q,T,O,F,N,A;let{syncWithLocation:k}=ro(),$=v!=null?v:k,R=za(i),_=Y(),{useLocation:oe}=ae(),{search:z,pathname:Q}=oe(),re=ge(),de=r===!1?"off":"server",G=((b=a==null?void 0:a.mode)!=null?b:de)!=="off",j=S(a==null?void 0:a.current,e),J=S(a==null?void 0:a.pageSize,t),Fe=S(y,C),{parsedCurrent:$e,parsedPageSize:We,parsedSorter:it,parsedFilters:ut}=dr(z!=null?z:"?"),bt=S(f==null?void 0:f.initial,u),qe=(x=S(f==null?void 0:f.permanent,c))!=null?x:ca,st=S(m==null?void 0:m.initial,o),Ae=(L=S(m==null?void 0:m.permanent,l))!=null?L:ma,Bt=(D=S(f==null?void 0:f.defaultBehavior,n))!=null?D:"merge",Ve,Re,H,le;$?(Ve=((q=re==null?void 0:re.params)==null?void 0:q.current)||$e||j||1,Re=((T=re==null?void 0:re.params)==null?void 0:T.pageSize)||We||J||10,H=((O=re==null?void 0:re.params)==null?void 0:O.sorters)||(it.length?it:st),le=((F=re==null?void 0:re.params)==null?void 0:F.filters)||(ut.length?ut:bt)):(Ve=j||1,Re=J||10,H=st,le=bt);let{replace:De}=we(),He=Ce(),{resource:Le}=B(P),Me=Le==null?void 0:Le.name;Ke.default.useEffect(()=>{(0,Nl.default)(typeof Me>"u","useTable: `resource` is not defined.")},[Me]);let[ie,Te]=(0,Ke.useState)(or(Ae,H!=null?H:[])),[Ie,Et]=(0,Ke.useState)(ar(qe,le!=null?le:[])),[dt,xr]=(0,Ke.useState)(Ve),[ze,Sr]=(0,Ke.useState)(Re),go=({pagination:{current:Z,pageSize:he},sorter:Pt,filters:Ct})=>{var wt;if(_==="new")return(wt=He({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...G?{current:Z,pageSize:he}:{},sorters:Pt,filters:Ct,...qr()}}))!=null?wt:"";{let ct=da.default.parse(z==null?void 0:z.substring(1)),Tr=tr({pagination:{pageSize:he,current:Z},sorters:ie!=null?ie:Pt,filters:Ct,...ct});return`${Q!=null?Q:""}?${Tr!=null?Tr:""}`}};(0,Ke.useEffect)(()=>{z===""&&(xr(Ve),Sr(Re),Te(or(Ae,H!=null?H:[])),Et(ar(qe,le!=null?le:[])))},[z]);let qr=()=>{var Z;if(_==="new"){let{sorters:he,filters:Pt,pageSize:Ct,current:wt,...ct}=(Z=re==null?void 0:re.params)!=null?Z:{};return ct}else{let{sorter:he,filters:Pt,pageSize:Ct,current:wt,...ct}=da.default.parse(z,{ignoreQueryPrefix:!0});return ct}};(0,Ke.useEffect)(()=>{if($){let Z=qr();if(_==="new")He({type:"replace",options:{keepQuery:!0},query:{...G?{pageSize:ze,current:dt}:{},sorters:(0,St.default)(ie,Ae,qt.default),filters:(0,St.default)(Ie,qe,qt.default)}});else{let he=tr({...G?{pagination:{pageSize:ze,current:dt}}:{},sorters:(0,St.default)(ie,Ae,qt.default),filters:(0,St.default)(Ie,qe,qt.default),...Z});return De==null?void 0:De(`${Q}?${he}`,void 0,{shallow:!0})}}},[$,dt,ze,ie,Ie]);let Dr=vr({resource:Me,hasPagination:r,pagination:{current:dt,pageSize:ze,mode:a==null?void 0:a.mode},filters:mt(qe,Ie),sorters:rr(Ae,ie),queryOptions:d,successNotification:p,errorNotification:s,meta:Fe,metaData:Fe,liveMode:R,liveParams:E,onLiveEvent:g,dataProviderName:h}),yo=Z=>{Et(he=>mt(qe,Z,he))},ho=Z=>{Et(mt(qe,Z))},bo=Z=>{Et(he=>mt(qe,Z(he)))},Eo=(Z,he=Bt)=>{typeof Z=="function"?bo(Z):he==="replace"?ho(Z):yo(Z)},Mr=Z=>{Te(()=>rr(Ae,Z))};return{tableQueryResult:Dr,sorters:ie,setSorters:Mr,sorter:ie,setSorter:Mr,filters:Ie,setFilters:Eo,current:dt,setCurrent:xr,pageSize:ze,setPageSize:Sr,pageCount:ze?Math.ceil(((A=(N=Dr.data)==null?void 0:N.total)!=null?A:0)/ze):1,createLinkForSyncWithLocation:go}}var va=w("react"),Jt=w("@tanstack/react-query"),uo=M(w("react")),Rt=uo.default.createContext({}),$l=({create:e,get:t,update:r,children:a})=>uo.default.createElement(Rt.Provider,{value:{create:e,get:t,update:r}},a),Ge=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Jt.useQueryClient)(),a=(0,va.useContext)(Rt),o=te(),{resources:l}=(0,va.useContext)(ft),{data:n,refetch:u,isLoading:c}=Pa({v3LegacyAuthProviderCompatible:Boolean(o==null?void 0:o.isLegacy),queryOptions:{enabled:!!a}}),f=(0,Jt.useMutation)(async v=>{var P,p,s,d,i;let g=K(v.resource,l),E=S((P=g==null?void 0:g.meta)==null?void 0:P.audit,(p=g==null?void 0:g.options)==null?void 0:p.audit,(d=(s=g==null?void 0:g.options)==null?void 0:s.auditLog)==null?void 0:d.permissions);if(E&&!en(E,v.action))return;let y;return c&&(y=await u()),await((i=a.create)==null?void 0:i.call(a,{...v,author:n!=null?n:y==null?void 0:y.data}))},e),m=(0,Jt.useMutation)(async v=>{var P;return await((P=a.update)==null?void 0:P.call(a,v))},{onSuccess:v=>{if(v!=null&&v.resource){let P=Pe(v==null?void 0:v.resource);r.invalidateQueries(P.logList())}},...t});return{log:f,rename:m}},Al=w("react"),Rl=w("@tanstack/react-query"),Ol=({resource:e,action:t,meta:r,author:a,metaData:o,queryOptions:l})=>{let{get:n}=(0,Al.useContext)(Rt),u=Pe(e,void 0,o);return(0,Rl.useQuery)(u.logList(r),()=>{var c;return(c=n==null?void 0:n({resource:e,action:t,author:a,meta:r,metaData:o}))!=null?c:Promise.resolve([])},{enabled:typeof n<"u",...l,retry:!1})},Ul=w("react"),Ql=w("@tanstack/react-query"),Je=()=>{let{resources:e}=B(),t=(0,Ql.useQueryClient)();return(0,Ul.useCallback)(({resource:r,dataProviderName:a,invalidates:o,id:l})=>{if(o===!1)return;let n=Pe(r,U(r,a,e));o.forEach(u=>{switch(u){case"all":t.invalidateQueries(n.all);break;case"list":t.invalidateQueries(n.list());break;case"many":t.invalidateQueries(n.many());break;case"resourceAll":t.invalidateQueries(n.resourceAll);break;case"detail":t.invalidateQueries(n.detail(l||""));break;default:break}})},[])},Bl=w("react"),Wl=M(w("warn-once")),Vl=({meta:e={}}={})=>{let t=Y(),{i18nProvider:r}=(0,Bl.useContext)(nt),a=ge(),o=I(),{resources:l,resource:n,action:u}=B(),c=[];if(!(n!=null&&n.name))return{breadcrumbs:c};let f=m=>{var v,P,p,s,d,i,g,E;let y=typeof m=="string"?(v=K(m,l,t==="legacy"))!=null?v:{name:m}:m;if(y){let C=S((P=y==null?void 0:y.meta)==null?void 0:P.parent,y==null?void 0:y.parentName);C&&f(C);let h=ve(y,l,t==="legacy").find(L=>L.action==="list"),b=(p=h==null?void 0:h.resource)!=null&&p.list?h==null?void 0:h.route:void 0,x=b?t==="legacy"?b:be(b,a,e):void 0;c.push({label:(i=S((s=y.meta)==null?void 0:s.label,(d=y.options)==null?void 0:d.label))!=null?i:o(`${y.name}.${y.name}`,Dt(y.name)),href:x,icon:S((g=y.meta)==null?void 0:g.icon,(E=y.options)==null?void 0:E.icon,y.icon)})}};if(f(n),u&&u!=="list"){let m=`actions.${u}`,v=o(m);typeof r<"u"&&v===m?((0,Wl.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${u}" action. Please add "actions.${u}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),c.push({label:o(`buttons.${u}`,Dt(u))})):c.push({label:o(m,Dt(u))})}return{breadcrumbs:c}},Zt=M(w("react")),Tt=(e,t,r=!1)=>{let a=[],o=Ue(e,t);for(;o;)a.push(o),o=Ue(o,t);return a.reverse(),`/${[...a,e].map(l=>{var n,u;return Ne((u=(n=r?l.route:void 0)!=null?n:l.identifier)!=null?u:l.name)}).join("/").replace(/^\//,"")}`},Hl=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(o=>{var l,n;let u=[],c=Ue(o,e);for(;c;)u.push(c),c=Ue(c,e);u.reverse();let f=r;u.forEach(v=>{var P,p;let s=(p=(P=t?v.route:void 0)!=null?P:v.identifier)!=null?p:v.name;f.children[s]||(f.children[s]={item:v,children:{}}),f=f.children[s]});let m=(n=(l=t?o.route:void 0)!=null?l:o.identifier)!=null?n:o.name;f.children[m]||(f.children[m]={item:o,children:{}})});let a=o=>{let l=[];return Object.keys(o.children).forEach(n=>{let u=Tt(o.children[n].item,e,t),c={...o.children[n].item,key:u,children:a(o.children[n])};l.push(c)}),l};return a(r)},pa=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),Il=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=I(),a=Er(),o=Y(),{resource:l,resources:n}=B(),{pathname:u}=ge(),{useLocation:c}=ae(),{pathname:f}=c(),m=o==="legacy"?pa(f):u?pa(u):void 0,v=`/${(m!=null?m:"").replace(/^\//,"")}`,P=l?Tt(l,n,o==="legacy"):v!=null?v:"",p=Zt.default.useMemo(()=>{if(!l)return[];let i=Ue(l,n),g=[Tt(l,n)];for(;i;)g.push(Tt(i,n)),i=Ue(i,n);return g},[]),s=Zt.default.useCallback(i=>{var g,E,y,C,h,b,x,L;if(((y=(g=i==null?void 0:i.meta)==null?void 0:g.hide)!=null?y:(E=i==null?void 0:i.options)==null?void 0:E.hide)||!(i!=null&&i.list)&&i.children.length===0)return;let D=i.list?a({resource:i,action:"list",legacy:o==="legacy",meta:e}):void 0;if(!(t&&D&&D.match(/(\/|^):(.+?)(\/|$){1}/)))return{...i,route:D,icon:S((C=i.meta)==null?void 0:C.icon,(h=i.options)==null?void 0:h.icon,i.icon),label:(L=S((b=i==null?void 0:i.meta)==null?void 0:b.label,(x=i==null?void 0:i.options)==null?void 0:x.label))!=null?L:r(`${i.name}.${i.name}`,cr(i.name,"plural"))}},[o,e,r,t]),d=Zt.default.useMemo(()=>{let i=Hl(n,o==="legacy"),g=E=>E.flatMap(y=>{let C=g(y.children),h=s({...y,children:C});return h?[h]:[]});return g(i)},[n,o,s]);return{defaultOpenKeys:p,selectedKey:P,menuItems:d}},zl=()=>{let[e,t]=(0,je.useState)(),r=I(),{push:a}=we(),o=Ce(),l=Y(),{resource:n,action:u}=B();return(0,je.useEffect)(()=>{n&&u&&t(r("pages.error.info",{action:u,resource:n==null?void 0:n.name},`You may have forgotten to add the "${u}" component to "${n==null?void 0:n.name}" resource.`))},[n,u]),je.default.createElement(je.default.Fragment,null,je.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&je.default.createElement("p",null,e),je.default.createElement("button",{onClick:()=>{l==="legacy"?a("/"):o({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},ee=M(w("react")),so=()=>{let[e,t]=(0,ee.useState)(""),[r,a]=(0,ee.useState)(""),o=I(),l=te(),{mutate:n}=ir({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)});return ee.default.createElement(ee.default.Fragment,null,ee.default.createElement("h1",null,o("pages.login.title","Sign in your account")),ee.default.createElement("form",{onSubmit:u=>{u.preventDefault(),n({username:e,password:r})}},ee.default.createElement("table",null,ee.default.createElement("tbody",null,ee.default.createElement("tr",null,ee.default.createElement("td",null,o("pages.login.username",void 0,"username"),":"),ee.default.createElement("td",null,ee.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:u=>t(u.target.value)}))),ee.default.createElement("tr",null,ee.default.createElement("td",null,o("pages.login.password",void 0,"password"),":"),ee.default.createElement("td",null,ee.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:u=>a(u.target.value)}))))),ee.default.createElement("br",null),ee.default.createElement("input",{type:"submit",value:"login"})))},Xe=M(w("react")),W=M(w("react")),jl=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:o,wrapperProps:l,renderContent:n,formProps:u})=>{let c=Y(),f=$t(),{Link:m}=ae(),v=c==="legacy"?m:f,[P,p]=(0,W.useState)(""),[s,d]=(0,W.useState)(""),[i,g]=(0,W.useState)(!1),E=I(),y=te(),{mutate:C}=ir({v3LegacyAuthProviderCompatible:Boolean(y==null?void 0:y.isLegacy)}),h=(L,D)=>L?typeof L=="string"?W.default.createElement(v,{to:L},D):L:null,b=()=>e?e.map(L=>{var D;return W.default.createElement("div",{key:L.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},W.default.createElement("button",{onClick:()=>C({providerName:L.name}),style:{display:"flex",alignItems:"center"}},L==null?void 0:L.icon,(D=L.label)!=null?D:W.default.createElement("label",null,L.label)))}):null,x=W.default.createElement("div",{...o},W.default.createElement("h1",{style:{textAlign:"center"}},E("pages.login.title","Sign in to your account")),b(),W.default.createElement("hr",null),W.default.createElement("form",{onSubmit:L=>{L.preventDefault(),C({email:P,password:s,remember:i})},...u},W.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},W.default.createElement("label",null,E("pages.login.fields.email","Email")),W.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:P,onChange:L=>p(L.target.value)}),W.default.createElement("label",null,E("pages.login.fields.password","Password")),W.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:s,onChange:L=>d(L.target.value)}),a!=null?a:W.default.createElement(W.default.Fragment,null,W.default.createElement("label",null,E("pages.login.buttons.rememberMe","Remember me"),W.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:i,value:i.toString(),onChange:()=>{g(!i)}}))),W.default.createElement("br",null),r!=null?r:h("/forgot-password",E("pages.login.buttons.forgotPassword","Forgot password?")),W.default.createElement("input",{type:"submit",value:E("pages.login.signin","Sign in")}),t!=null?t:W.default.createElement("span",null,E("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",h("/register",E("pages.login.register","Sign up"))))));return W.default.createElement("div",{...l},n?n(x):x)},X=M(w("react")),Kl=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:o,formProps:l})=>{let n=Y(),u=$t(),{Link:c}=ae(),f=n==="legacy"?c:u,[m,v]=(0,X.useState)(""),[P,p]=(0,X.useState)(""),s=I(),d=te(),{mutate:i,isLoading:g}=Ca({v3LegacyAuthProviderCompatible:Boolean(d==null?void 0:d.isLegacy)}),E=(h,b)=>h?typeof h=="string"?X.default.createElement(f,{to:h},b):h:null,y=()=>e?e.map(h=>{var b;return X.default.createElement("div",{key:h.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},X.default.createElement("button",{onClick:()=>i({providerName:h.name}),style:{display:"flex",alignItems:"center"}},h==null?void 0:h.icon,(b=h.label)!=null?b:X.default.createElement("label",null,h.label)))}):null,C=X.default.createElement("div",{...a},X.default.createElement("h1",{style:{textAlign:"center"}},s("pages.register.title","Sign up for your account")),y(),X.default.createElement("hr",null),X.default.createElement("form",{onSubmit:h=>{h.preventDefault(),i({email:m,password:P})},...l},X.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},X.default.createElement("label",null,s("pages.register.fields.email","Email")),X.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:h=>v(h.target.value)}),X.default.createElement("label",null,s("pages.register.fields.password","Password")),X.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:P,onChange:h=>p(h.target.value)}),X.default.createElement("input",{type:"submit",value:s("pages.register.buttons.submit","Sign up"),disabled:g}),t!=null?t:X.default.createElement(X.default.Fragment,null,X.default.createElement("span",null,s("pages.login.buttons.haveAccount","Have an account?")," ",E("/login",s("pages.login.signin","Sign in")))))));return X.default.createElement("div",{...r},o?o(C):C)},ce=M(w("react")),_l=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:o})=>{let l=I(),n=Y(),u=$t(),{Link:c}=ae(),f=n==="legacy"?c:u,[m,v]=(0,ce.useState)(""),{mutate:P,isLoading:p}=wa(),s=(i,g)=>i?typeof i=="string"?ce.default.createElement(f,{to:i},g):i:null,d=ce.default.createElement("div",{...r},ce.default.createElement("h1",{style:{textAlign:"center"}},l("pages.forgotPassword.title","Forgot your password?")),ce.default.createElement("hr",null),ce.default.createElement("form",{onSubmit:i=>{i.preventDefault(),P({email:m})},...o},ce.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ce.default.createElement("label",null,l("pages.forgotPassword.fields.email","Email")),ce.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:i=>v(i.target.value)}),ce.default.createElement("input",{type:"submit",disabled:p,value:l("pages.forgotPassword.buttons.submit","Send reset instructions")}),ce.default.createElement("br",null),e!=null?e:ce.default.createElement("span",null,l("pages.register.buttons.haveAccount","Have an account? ")," ",s("/login",l("pages.login.signin","Sign in"))))));return ce.default.createElement("div",{...t},a?a(d):d)},me=M(w("react")),Yl=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let o=I(),l=te(),{mutate:n,isLoading:u}=La({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)}),[c,f]=(0,me.useState)(""),[m,v]=(0,me.useState)(""),P=me.default.createElement("div",{...t},me.default.createElement("h1",{style:{textAlign:"center"}},o("pages.updatePassword.title","Update Password")),me.default.createElement("hr",null),me.default.createElement("form",{onSubmit:p=>{p.preventDefault(),n({password:c,confirmPassword:m})},...a},me.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},me.default.createElement("label",null,o("pages.updatePassword.fields.password","New Password")),me.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:c,onChange:p=>f(p.target.value)}),me.default.createElement("label",null,o("pages.updatePassword.fields.confirmPassword","Confirm New Password")),me.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:m,onChange:p=>v(p.target.value)}),me.default.createElement("input",{type:"submit",disabled:u,value:o("pages.updatePassword.buttons.submit","Update")}))));return me.default.createElement("div",{...e},r?r(P):P)},Gl=e=>{let{type:t}=e;return Xe.default.createElement(Xe.default.Fragment,null,(()=>{switch(t){case"register":return Xe.default.createElement(Kl,{...e});case"forgotPassword":return Xe.default.createElement(_l,{...e});case"updatePassword":return Xe.default.createElement(Yl,{...e});default:return Xe.default.createElement(jl,{...e})}})())},ue=M(w("react")),co=()=>ue.default.createElement(ue.default.Fragment,null,ue.default.createElement("h1",null,"Welcome on board"),ue.default.createElement("p",null,"Your configuration is completed."),ue.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",ue.default.createElement("code",null,"`resources`")," property of ",ue.default.createElement("code",null,"`<Refine>`")),ue.default.createElement("div",{style:{display:"flex",gap:8}},ue.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ue.default.createElement("button",null,"Documentation")),ue.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ue.default.createElement("button",null,"Examples")),ue.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ue.default.createElement("button",null,"Community")))),xe=M(w("react")),Jl=()=>xe.default.createElement(xe.default.Fragment,null,xe.default.createElement("h1",null,"Welcome on board"),xe.default.createElement("p",null,"Your configuration is completed."),xe.default.createElement("div",{style:{display:"flex",gap:8}},xe.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Documentation")),xe.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Examples")),xe.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Community")))),V=M(w("react")),Xt=w("@tanstack/react-query"),Zl=w("@tanstack/react-query-devtools"),Xl=w("react"),_e=w("react"),ei="4.3.0",ti=()=>{let e=xa(),t=(0,_e.useContext)(Rt),r=(0,_e.useContext)(vt),a=(0,_e.useContext)(Pr),o=(0,_e.useContext)(gr),{i18nProvider:l}=(0,_e.useContext)(nt),n=(0,_e.useContext)(yr),u=(0,_e.useContext)(At),{resources:c}=B(),f=!!t.create||!!t.get||!!t.update,m=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),v=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,P=!!o,p=!!(l!=null&&l.changeLocale)||!!(l!=null&&l.getLocale)||!!(l!=null&&l.translate),s=!!n.close||!!n.open,d=!!u.can;return{providers:{auth:e,auditLog:f,live:m,router:v,data:P,i18n:p,notification:s,accessControl:d},version:ei,resourceCount:c.length}},ri=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},ai=()=>{let e=ti();return(0,Xl.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ri(e)}`},[]),null},oi=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},fa=M(w("react")),ni=e=>{let t=fa.default.useRef(!1);fa.default.useEffect(()=>{t.current===!1&&e&&oi(e)&&(t.current=!0)},[e])},li=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:o,notificationProvider:l,accessControlProvider:n,auditLogProvider:u,resources:c,DashboardPage:f,ReadyPage:m,LoginPage:v,catchAll:P,children:p,liveProvider:s,i18nProvider:d,Title:i,Layout:g,Sider:E,Header:y,Footer:C,OffLayoutArea:h,onLiveEvent:b,options:x})=>{let{optionsWithDefaults:L,disableTelemetryWithDefault:D,reactQueryWithDefaults:q}=dn({options:x}),T=Ka(()=>{var N;return q.clientConfig instanceof Xt.QueryClient?q.clientConfig:new Xt.QueryClient({...q.clientConfig,defaultOptions:{...q.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(N=q.clientConfig.defaultOptions)==null?void 0:N.queries}}})},[q.clientConfig]),O=V.default.useMemo(()=>typeof l=="function"?l:()=>l!=null?l:{},[l])();if(ni(o),a&&!o&&(c!=null?c:[]).length===0)return m?V.default.createElement(m,null):V.default.createElement(co,null);let{RouterComponent:F=V.default.Fragment}=o?{}:a!=null?a:{};return V.default.createElement(Xt.QueryClientProvider,{client:T},V.default.createElement(Jn,{...O},V.default.createElement(Ao,{...e!=null?e:{},isProvided:Boolean(e)},V.default.createElement(Ro,{...t!=null?t:{},isProvided:Boolean(t)},V.default.createElement(Nn,{...r},V.default.createElement(Rn,{liveProvider:s},V.default.createElement(jn,{value:a&&!o?"legacy":"new"},V.default.createElement(_n,{router:o},V.default.createElement(Cl,{...a},V.default.createElement(zn,{resources:c!=null?c:[]},V.default.createElement(Xn,{i18nProvider:d},V.default.createElement(xl,{...n!=null?n:{}},V.default.createElement($l,{...u!=null?u:{}},V.default.createElement(hn,null,V.default.createElement(sn,{mutationMode:L.mutationMode,warnWhenUnsavedChanges:L.warnWhenUnsavedChanges,syncWithLocation:L.syncWithLocation,Title:i,undoableTimeout:L.undoableTimeout,catchAll:P,DashboardPage:f,LoginPage:v,Layout:g,Sider:E,Footer:C,Header:y,OffLayoutArea:h,hasDashboard:!!f,liveMode:L.liveMode,onLiveEvent:b,options:L},V.default.createElement(al,null,V.default.createElement(F,null,p,!D&&V.default.createElement(ai,null),V.default.createElement(vo,null))))))))))))))))),q.devtoolConfig===!1?null:V.default.createElement(Zl.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...q.devtoolConfig}))},ga=w("react"),mo=({notification:e})=>{let t=I(),{notificationDispatch:r}=ot(),{open:a}=Be(),[o,l]=(0,ga.useState)(),n=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Kt(e.seconds)},`You have ${Kt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Kt(e.seconds)}),e.seconds>0)){o&&clearTimeout(o);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);l(u)}};return(0,ga.useEffect)(()=>{n()},[e]),null},kt=M(w("react")),ii=({children:e,Layout:t,Sider:r,Header:a,Title:o,Footer:l,OffLayoutArea:n})=>{let{Layout:u,Footer:c,Header:f,Sider:m,Title:v,OffLayoutArea:P}=br(),p=t!=null?t:u;return kt.default.createElement(p,{Sider:r!=null?r:m,Header:a!=null?a:f,Footer:l!=null?l:c,Title:o!=null?o:v,OffLayoutArea:n!=null?n:P},e,kt.default.createElement(ui,null))},ui=()=>{let{Prompt:e}=ae(),t=I(),{warnWhen:r,setWarnWhen:a}=hr(),o=l=>(l.preventDefault(),l.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),l.returnValue);return(0,kt.useEffect)(()=>(r&&window.addEventListener("beforeunload",o),window.removeEventListener("beforeunload",o)),[r]),kt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},pe=M(w("react")),si=()=>{let e=Ce(),[t,r]=pe.default.useState(void 0);return pe.default.useEffect(()=>{t&&e(t)},[t]),pe.default.useCallback(a=>{t||r(a)},[t])};function di({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:o}){var l;let n=te(),u=Y(),c=Boolean(n==null?void 0:n.isProvided),f=Boolean(n==null?void 0:n.isLegacy),m=u==="legacy",v=ge(),P=Ce(),p=si(),{replace:s}=we(),{useLocation:d}=ae(),i=d(),{isLoading:g,isFetching:E,isSuccess:y,data:{authenticated:C,redirectTo:h}={},refetch:b}=ur({v3LegacyAuthProviderCompatible:f});pe.default.useEffect(()=>{b()},[r,a]);let x=pe.default.useRef({status:g?"initial":"pending",content:o!=null?o:null});E?x.current.status="pending":E||(x.current.status="settled");let L=c?f?y:C:!0;if(x.current.status==="settled")if(L)x.current.content=pe.default.createElement(pe.default.Fragment,null,r!=null?r:null);else if(typeof a<"u")x.current.content=pe.default.createElement(pe.default.Fragment,null,a);else{let D=`${m?i==null?void 0:i.pathname:v.pathname}`.replace(/(\?.*|#.*)$/,""),q=f?typeof e=="string"?e:"/login":typeof e=="string"?e:h;if(q)if(m){let T=t?`?to=${encodeURIComponent(D)}`:"";s(`${q}${T}`)}else p({to:q,query:t?{to:(l=v.params)!=null&&l.to?v.params.to:P({to:D,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return c?pe.default.createElement(pe.default.Fragment,null,x.current.content):pe.default.createElement(pe.default.Fragment,null,r!=null?r:null)}var ci=w("react"),vo=()=>{let{useLocation:e}=ae(),{checkAuth:t}=Ee(),r=e();return(0,ci.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},et=M(w("react")),mi=({resource:e,action:t,params:r,fallback:a,children:o,...l})=>{var n,u;let c=Y(),{resources:f}=B(),{useParams:m}=ae(),{resource:v,id:P,action:p}=ge(),{resource:s,id:d,action:i}=m(),g=v==null?void 0:v.name,E=!e||e===(c==="legacy"?s:g)?(n=r==null?void 0:r.id)!=null?n:c==="legacy"?d:P:r==null?void 0:r.id,y=e!=null?e:c==="legacy"?s:g,C,h=yt();if(c==="legacy")y&&(C=h(y));else if(e){let x=K(e,f);x?C=x:C={name:e,route:e}}else if(typeof v=="string"){let x=K(v,f);x?C=x:C={name:v,route:v}}else C=v;let{data:b}=io({resource:e!=null?e:C==null?void 0:C.name,action:(u=t!=null?t:c==="legacy"?i:p)!=null?u:"",params:r!=null?r:{id:E,resource:C}});return b!=null&&b.can?et.default.isValidElement(o)?et.default.cloneElement(o,l):et.default.createElement(et.default.Fragment,null,o):(b==null?void 0:b.can)===!1?et.default.createElement(et.default.Fragment,null,a!=null?a:null):null},tt=M(w("react")),vi=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],pi=()=>((0,tt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),vi.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),tt.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},tt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},tt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},tt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),tt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var wr=w("react"),fo=w("react-hook-form"),Ot=Wt(Cr()),ht=({refineCoreProps:e,warnWhenUnsavedChanges:t,...r}={})=>{let{warnWhenUnsavedChanges:a,setWarnWhen:o}=(0,Ot.useWarnAboutChange)(),l=t!=null?t:a,n=(0,Ot.useForm)({...e}),{queryResult:u,onFinish:c,formLoading:f}=n,m=(0,fo.useForm)({...r}),{watch:v,reset:P,getValues:p,handleSubmit:s}=m;(0,wr.useEffect)(()=>{var E;if(typeof(u==null?void 0:u.data)<"u"){let y={},C=Object.keys(p());Object.entries(((E=u==null?void 0:u.data)==null?void 0:E.data)||{}).forEach(([h,b])=>{C.includes(h)&&(y[h]=b)}),P(y)}},[u==null?void 0:u.data]),(0,wr.useEffect)(()=>{let E=v((y,{type:C})=>{C==="change"&&d(y)});return()=>E.unsubscribe()},[v]);let d=E=>(l&&o(!0),E),i=(E,y)=>async C=>(o(!1),await s(E,y)(C));return{...m,handleSubmit:i,refineCore:n,saveButtonProps:{disabled:f,onClick:E=>{i(c,()=>!1)(E)}}}};var Ut=w("react");var fi=({stepsProps:e,...t}={})=>{let{defaultStep:r=0,isBackValidate:a=!1}=e!=null?e:{},[o,l]=(0,Ut.useState)(r),n=ht({...t}),{trigger:u,getValues:c,reset:f,formState:{dirtyFields:m},refineCore:{queryResult:v}}=n;(0,Ut.useEffect)(()=>{var s;if(v!=null&&v.data){let d={},i=Object.keys(c());Object.entries((s=v==null?void 0:v.data)==null?void 0:s.data).forEach(([g,E])=>{i.includes(g)&&(m[g]?d[g]=c(g):d[g]=E)}),f(d,{keepDirty:!0,keepDirtyValues:!0})}},[v==null?void 0:v.data,o]);let P=s=>{let d=s;s<0&&(d=0),l(d)};return{...n,steps:{currentStep:o,gotoStep:async s=>{if(s===o)return;if(s<o&&!a){P(s);return}await u()&&P(s)}}}};var Lr=w("react"),se=Wt(Cr());var Qt=Wt(w("react")),gi=({modalProps:e,refineCoreProps:t,syncWithLocation:r,...a}={})=>{var R,_,oe,z,Q,re,de;let o=Qt.default.useRef(!1),l=(0,se.useTranslate)(),{resource:n,action:u}=t!=null?t:{},{resource:c,action:f}=(0,se.useResource)(n),m=(0,se.useParsed)(),v=(0,se.useGo)(),P=(R=u!=null?u:f)!=null?R:"",p=typeof r=="object"&&r.syncId,s=typeof r=="object"&&"key"in r?r.key:c&&P&&r?`modal-${(_=c==null?void 0:c.identifier)!=null?_:c==null?void 0:c.name}-${P}`:void 0,{defaultVisible:d=!1,autoSubmitClose:i=!0,autoResetForm:g=!0}=e!=null?e:{},E=ht({refineCoreProps:t,...a}),{reset:y,refineCore:{onFinish:C,id:h,setId:b},saveButtonProps:x,handleSubmit:L}=E,{visible:D,show:q,close:T}=(0,se.useModal)({defaultVisible:d});Qt.default.useEffect(()=>{var G,j,J,Fe;if(o.current===!1&&s){let $e=(j=(G=m==null?void 0:m.params)==null?void 0:G[s])==null?void 0:j.open;if(typeof $e=="boolean"?$e&&q():typeof $e=="string"&&$e==="true"&&q(),p){let We=(Fe=(J=m==null?void 0:m.params)==null?void 0:J[s])==null?void 0:Fe.id;We&&(b==null||b(We))}o.current=!0}},[s,m,p,b]),Qt.default.useEffect(()=>{var G;o.current===!0&&(D&&s?v({query:{[s]:{...(G=m==null?void 0:m.params)==null?void 0:G[s],open:!0,...p&&h&&{id:h}}},options:{keepQuery:!0},type:"replace"}):s&&!D&&v({query:{[s]:void 0},options:{keepQuery:!0},type:"replace"}))},[h,D,q,s,p]);let O=async G=>{await C(G),i&&T(),g&&y()},{warnWhen:F,setWarnWhen:N}=(0,se.useWarnAboutChange)(),A=(0,Lr.useCallback)(()=>{if(F)if(window.confirm(l("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes.")))N(!1);else return;b==null||b(void 0),T()},[F]),k=(0,Lr.useCallback)(G=>{b==null||b(G),q()},[]),$=l(`${c==null?void 0:c.name}.titles.${u}`,void 0,`${(0,se.userFriendlyResourceName)(`${u} ${(de=(re=(Q=(oe=c==null?void 0:c.meta)==null?void 0:oe.label)!=null?Q:(z=c==null?void 0:c.options)==null?void 0:z.label)!=null?re:c==null?void 0:c.label)!=null?de:c==null?void 0:c.name}`,"singular")}`);return{modal:{submit:O,close:A,show:k,visible:D,title:$},...E,saveButtonProps:{...x,onClick:G=>L(O)(G)}}};})();
//# sourceMappingURL=index.js.map