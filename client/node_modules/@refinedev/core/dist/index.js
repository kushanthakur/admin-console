var va=Object.create;var fr=Object.defineProperty;var Da=Object.getOwnPropertyDescriptor;var La=Object.getOwnPropertyNames;var Ia=Object.getPrototypeOf,Ma=Object.prototype.hasOwnProperty;var Ea=(e,t)=>{for(var r in t)fr(e,r,{get:t[r],enumerable:!0})},pn=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of La(t))!Ma.call(e,n)&&n!==r&&fr(e,n,{get:()=>t[n],enumerable:!(o=Da(t,n))||o.enumerable});return e};var A=(e,t,r)=>(r=e!=null?va(Ia(e)):{},pn(t||!e||!e.__esModule?fr(r,"default",{value:e,enumerable:!0}):r,e)),Ua=e=>pn(fr({},"__esModule",{value:!0}),e);var Ja={};Ea(Ja,{AuthPage:()=>ca,Authenticated:()=>Pa,CanAccess:()=>Ca,ErrorComponent:()=>na,GitHubBanner:()=>ha,LayoutWrapper:()=>Ta,LoginPage:()=>br,ReadyPage:()=>Xr,Refine:()=>Ra,ResourceContext:()=>Ge,RouteChangeHandler:()=>Zr,UndoableQueue:()=>wo,WelcomePage:()=>pa,createTreeView:()=>Lo,file2Base64:()=>An,getDefaultFilter:()=>Un,getDefaultSortOrder:()=>En,getNextPageParam:()=>jt,getPreviousPageParam:()=>Yt,handleUseParams:()=>Co,importCSVMapper:()=>Ot,legacyResourceTransform:()=>Jt,matchResourceFromRoute:()=>Cr,parseTableParams:()=>Kt,parseTableParamsFromQuery:()=>Ln,pickNotDeprecated:()=>h,routeGenerator:()=>_t,setInitialFilters:()=>$t,setInitialSorters:()=>Gt,stringifyTableParams:()=>Ht,unionFilters:()=>ut,unionSorters:()=>Wt,useActiveAuthProvider:()=>W,useApiUrl:()=>_n,useAuthenticated:()=>Cn,useBack:()=>_r,useBreadcrumb:()=>Ga,useCan:()=>Yo,useCanWithoutCache:()=>Ka,useCancelNotification:()=>ke,useCheckError:()=>bn,useCreate:()=>It,useCreateMany:()=>Ur,useCustom:()=>Yn,useCustomMutation:()=>Xn,useDataProvider:()=>z,useDelete:()=>Kn,useDeleteMany:()=>zn,useExport:()=>Qa,useForgotPassword:()=>Rr,useForm:()=>Ba,useGetIdentity:()=>yr,useGetLocale:()=>bs,useGetToPath:()=>At,useGo:()=>oe,useHandleNotification:()=>Z,useImport:()=>Na,useInfiniteList:()=>es,useInvalidate:()=>ve,useIsAuthenticated:()=>Nt,useIsExistAuthentication:()=>Pr,useLink:()=>rt,useList:()=>ht,useLiveMode:()=>Fo,useLog:()=>he,useLogList:()=>$a,useLogin:()=>bt,useLogout:()=>Vt,useMany:()=>vr,useMenu:()=>oa,useModal:()=>Fa,useMutationMode:()=>Le,useNavigation:()=>re,useNotification:()=>fe,useOnError:()=>J,useOne:()=>vt,useParse:()=>Nr,useParsed:()=>j,usePermissions:()=>yn,usePublish:()=>be,useRedirectionAfterSubmission:()=>zo,useRefineContext:()=>Et,useRegister:()=>gr,useResource:()=>Q,useResourceSubscription:()=>We,useResourceWithRoute:()=>_e,useRouterContext:()=>G,useRouterType:()=>K,useSelect:()=>Ha,useSetLocale:()=>Cs,useShow:()=>Va,useSubscription:()=>ka,useSyncWithLocation:()=>$r,useTable:()=>Wa,useTitle:()=>Is,useToPath:()=>Qs,useTranslate:()=>V,useUpdate:()=>Mr,useUpdateMany:()=>$n,useUpdatePassword:()=>Tr,useWarnAboutChange:()=>Mt,userFriendlyResourceName:()=>ct});module.exports=Ua(Ja);var Fe=A(require("react"));var it=A(require("react"));var dn=it.default.createContext({}),ln=({children:e,isProvided:t,...r})=>{let{replace:o}=re(),n=async l=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,l))}catch(m){return Promise.reject(m)}},a=async l=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,l))}catch(m){return Promise.reject(m)}},s=async l=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,l))}catch(m){return Promise.reject(m)}},i=async l=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,l)),Promise.resolve()}catch(m){return m!=null&&m.redirectPath&&o(m.redirectPath),Promise.reject(m)}};return it.default.createElement(dn.Provider,{value:{...r,login:n,logout:s,checkAuth:i,register:a,isProvided:t}},e)},mn=it.default.createContext({}),fn=({children:e,isProvided:t,...r})=>{let o=async d=>{var m;try{return await((m=r.login)==null?void 0:m.call(r,d))}catch(c){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",c),Promise.reject(c)}},n=async d=>{var m;try{return await((m=r.register)==null?void 0:m.call(r,d))}catch(c){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",c),Promise.reject(c)}},a=async d=>{var m;try{return await((m=r.logout)==null?void 0:m.call(r,d))}catch(c){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",c),Promise.reject(c)}},s=async d=>{var m;try{let c=await((m=r.check)==null?void 0:m.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",c),Promise.reject(c)}},i=async d=>{var m;try{let c=await((m=r.forgotPassword)==null?void 0:m.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",c),Promise.reject(c)}},l=async d=>{var m;try{let c=await((m=r.updatePassword)==null?void 0:m.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",c),Promise.reject(c)}};return it.default.createElement(mn.Provider,{value:{...r,login:o,logout:a,check:s,register:n,forgotPassword:i,updatePassword:l,isProvided:t}},e)},ee=()=>it.default.useContext(dn),ne=()=>it.default.useContext(mn);var oo=require("@tanstack/react-query");function yn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=ee(),{getPermissions:o}=ne(),n=(0,oo.useQuery)(["usePermissions"],o!=null?o:()=>Promise.resolve(void 0),{enabled:!e&&!!o,...e?{}:t}),a=(0,oo.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?a:n}var no=require("@tanstack/react-query");function yr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=ee(),{getIdentity:o}=ne(),n=(0,no.useQuery)(["getUserIdentity"],o!=null?o:()=>Promise.resolve({}),{enabled:!e&&!!o,retry:!1,...e===!0?{}:t}),a=(0,no.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?a:n}var ao=require("@tanstack/react-query");var gn=require("@tanstack/react-query"),Ct=()=>{let e=(0,gn.useQueryClient)();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function Vt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),o=K(),n=oe(),{push:a}=re(),{open:s,close:i}=fe(),{logout:l}=ee(),{logout:d}=ne(),m=(0,ao.useMutation)(["useLogout"],d,{onSuccess:async(R,x)=>{let{success:L,error:T,redirectTo:u}=R,{redirectPath:g}=x!=null?x:{},P=g!=null?g:u;L&&(i==null||i("useLogout-error")),(T||!L)&&(s==null||s(so(T))),await r(),P!==!1&&(o==="legacy"?a(P!=null?P:"/login"):P&&n({to:P}))},onError:R=>{s==null||s(so(R))},...e===!0?{}:t}),c=(0,ao.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],l,{onSuccess:async(R,x)=>{var T;let L=(T=x==null?void 0:x.redirectPath)!=null?T:R;if(await r(),L!==!1){if(L){o==="legacy"?a(L):n({to:L});return}o==="legacy"?a("/login"):n({to:"/login"})}},onError:R=>{s==null||s(so(R))},...e?t:{}});return e?c:m}var so=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"});var uo=require("@tanstack/react-query"),Rn=A(require("qs"));var Tn=A(require("react"));function bt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),o=K(),n=oe(),{replace:a}=re(),s=j(),{useLocation:i}=G(),{search:l}=i(),{close:d,open:m}=fe(),{login:c}=ee(),{login:R}=ne(),x=Tn.default.useMemo(()=>{var u;return o==="legacy"?Rn.default.parse(l,{ignoreQueryPrefix:!0}).to:(u=s.params)==null?void 0:u.to},[o,s.params,l]),L=(0,uo.useMutation)(["useLogin"],R,{onSuccess:async({success:u,redirectTo:g,error:P})=>{u&&(d==null||d("login-error")),(P||!u)&&(m==null||m(io(P))),await r(),x&&u?o==="legacy"?a(x):n({to:x,type:"replace"}):g?o==="legacy"?a(g):n({to:g,type:"replace"}):o==="legacy"&&a("/")},onError:u=>{m==null||m(io(u))},...e===!0?{}:t}),T=(0,uo.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],c,{onSuccess:async u=>{await r(),x&&a(x),u!==!1&&!x&&(typeof u=="string"?o==="legacy"?a(u):n({to:u,type:"replace"}):o==="legacy"?a("/"):n({to:"/",type:"replace"})),d==null||d("login-error")},onError:u=>{m==null||m(io(u))},...e?t:{}});return e?T:L}var io=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"});var po=require("@tanstack/react-query");function gr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),o=K(),n=oe(),{replace:a}=re(),{register:s}=ee(),{register:i}=ne(),{close:l,open:d}=fe(),m=(0,po.useMutation)(["useRegister"],i,{onSuccess:async({success:R,redirectTo:x,error:L})=>{R&&(l==null||l("register-error")),(L||!R)&&(d==null||d(co(L))),await r(),x?o==="legacy"?a(x):n({to:x,type:"replace"}):o==="legacy"&&a("/")},onError:R=>{d==null||d(co(R))},...e===!0?{}:t}),c=(0,po.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],s,{onSuccess:async R=>{await r(),R!==!1&&(R?o==="legacy"?a(R):n({to:R,type:"replace"}):o==="legacy"?a("/"):n({to:"/",type:"replace"}),l==null||l("register-error"))},onError:R=>{d==null||d(co(R))},...e?t:{}});return e?c:m}var co=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"});var mo=require("@tanstack/react-query");function Rr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=K(),o=oe(),{replace:n}=re(),{forgotPassword:a}=ee(),{forgotPassword:s}=ne(),{close:i,open:l}=fe(),d=(0,mo.useMutation)(["useForgotPassword"],s,{onSuccess:({success:c,redirectTo:R,error:x})=>{c&&(i==null||i("forgot-password-error")),(x||!c)&&(l==null||l(lo(x))),R&&(r==="legacy"?n(R):o({to:R,type:"replace"}))},onError:c=>{l==null||l(lo(c))},...e===!0?{}:t}),m=(0,mo.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],a,{onSuccess:c=>{c!==!1&&c&&(r==="legacy"?n(c):o({to:c,type:"replace"})),i==null||i("forgot-password-error")},onError:c=>{l==null||l(lo(c))},...e?t:{}});return e?m:d}var lo=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"});var Pn=A(require("react")),yo=require("@tanstack/react-query"),xn=A(require("qs"));function Tr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=K(),o=oe(),{replace:n}=re(),{updatePassword:a}=ee(),{updatePassword:s}=ne(),{close:i,open:l}=fe(),d=j(),{useLocation:m}=G(),{search:c}=m(),R=Pn.default.useMemo(()=>{var T;if(r==="legacy"){let u=xn.default.parse(c,{ignoreQueryPrefix:!0});return u!=null?u:{}}else return(T=d.params)!=null?T:{}},[c,d,r]),x=(0,yo.useMutation)(["useUpdatePassword"],async T=>s==null?void 0:s({...R,...T}),{onSuccess:({success:T,redirectTo:u,error:g})=>{T&&(i==null||i("update-password-error")),(g||!T)&&(l==null||l(fo(g))),u&&(r==="legacy"?n(u):o({to:u,type:"replace"}))},onError:T=>{l==null||l(fo(T))},...e===!0?{}:t}),L=(0,yo.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async T=>a==null?void 0:a({...R,...T}),{onSuccess:T=>{T!==!1&&T&&(r==="legacy"?n(T):o({to:T,type:"replace"})),i==null||i("update-password-error")},onError:T=>{l==null||l(fo(T))},...e?t:{}});return e?L:x}var fo=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"});var go=require("@tanstack/react-query");function Nt({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=ee(),{check:o}=ne(),n=(0,go.useQuery)(["useAuthenticated",t],async()=>{var s;return(s=await(o==null?void 0:o(t)))!=null?s:{}},{retry:!1,enabled:!e}),a=(0,go.useQuery)(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>{var s;return(s=await(r==null?void 0:r(t)))!=null?s:{}},{retry:!1,enabled:e});return e?a:n}var Cn=Nt;var Ro=require("@tanstack/react-query");function J({v3LegacyAuthProviderCompatible:e=!1}={}){let t=K(),r=oe(),{replace:o}=re(),{checkError:n}=ee(),{onError:a}=ne(),{mutate:s}=Vt({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:i}=Vt({v3LegacyAuthProviderCompatible:Boolean(e)}),l=(0,Ro.useMutation)(["useCheckError"],a,{onSuccess:({logout:m,redirectTo:c})=>{if(m){i({redirectPath:c});return}if(c){t==="legacy"?o(c):r({to:c,type:"replace"});return}}}),d=(0,Ro.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],n,{onError:m=>{s({redirectPath:m})}});return e?d:l}var bn=J;var Pr=()=>{let{isProvided:e}=ee(),{isProvided:t}=ne();return Boolean(t||e)};var Vn=require("@tanstack/react-query");var Ft=e=>e/1e3;var hn=A(require("lodash/zip")),vn=A(require("lodash/fromPairs")),Ot=(e,t=r=>r)=>{let[r,...o]=e;return o.map(n=>(0,vn.default)((0,hn.default)(r,n))).map((n,a,s)=>t.call(void 0,n,a,s))};var xo=A(require("pluralize"));var xr=A(require("qs")),To=A(require("lodash/unionWith")),Po=A(require("lodash/differenceWith")),Dn=A(require("warn-once"));var Kt=e=>{var s;let{current:t,pageSize:r,sorter:o,sorters:n,filters:a}=xr.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:(s=h(n,o))!=null?s:[],parsedFilters:a!=null?a:[]}},Ln=e=>{let t=xr.default.stringify(e);return Kt(`/${t}`)},Ht=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,sorters:n,filters:a,...s}=e;return xr.default.stringify({...s,...r||{},sorters:h(n,o),filters:a},t)},In=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Mn=(e,t)=>e.field==t.field,ut=(e,t,r=[])=>(t.filter(n=>(n.operator==="or"||n.operator==="and")&&!n.key).length>1&&(0,Dn.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,To.default)(e,t,r,In).filter(n=>n.value!==void 0&&n.value!==null&&(n.operator!=="or"||n.operator==="or"&&n.value.length!==0)&&(n.operator!=="and"||n.operator==="and"&&n.value.length!==0))),Wt=(e,t)=>(0,To.default)(e,t,Mn).filter(r=>r.order!==void 0&&r.order!==null),$t=(e,t)=>[...(0,Po.default)(t,e,In),...e],Gt=(e,t)=>[...(0,Po.default)(t,e,Mn),...e],En=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},Un=(e,t,r="eq")=>{let o=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:a,field:s}=n;return s===e&&a===r}});if(o)return o.value||[]};var An=e=>new Promise((t,r)=>{let o=new FileReader,n=()=>{o.result&&(o.removeEventListener("load",n,!1),t(o.result))};o.addEventListener("load",n,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",n,!1),r(a))});var ct=(e="",t)=>{let r=pt(e);return t==="singular"?xo.default.singular(r):xo.default.plural(r)};var Co=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var h=(...e)=>e.find(t=>typeof t<"u");var X=(e,t,r,o)=>{let n=t||"default",a={all:[n],resourceAll:[n,e||""],list:s=>[...a.resourceAll,"list",{...s,...h(r,o)||{}}],many:s=>[...a.resourceAll,"getMany",s&&s.map(String),{...h(r,o)||{}}].filter(i=>i!==void 0),detail:s=>[...a.resourceAll,"detail",s==null?void 0:s.toString(),{...h(r,o)||{}}],logList:s=>["logList",e,s,o].filter(i=>i!==void 0)};return a};var bo=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var dt=e=>e.startsWith(":");var Be=e=>e.split("/").filter(r=>r!=="");var ho=(e,t)=>{let r=Be(e),o=Be(t);return r.length===o.length};var de=e=>e.replace(/^\/|\/$/g,"");var vo=(e,t)=>{let r=de(e),o=de(t);if(!ho(r,o))return!1;let n=Be(r);return Be(o).every((s,i)=>dt(s)||s===n[i])};var Do=(e,t,r)=>{let o=de(r||""),n=`${o}${o?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`};var Ce=(e,t)=>{var n,a;let r=h((n=e.meta)==null?void 0:n.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!r)return;let o=t.find(s=>{var i;return((i=s.identifier)!=null?i:s.name)===r});return o!=null?o:{name:r}};var zt=(e,t,r)=>{let o=[],n=Ce(e,t);for(;n;)o.push(n),n=Ce(n,t);if(o.length!==0)return`/${o.reverse().map(a=>{var i,l;let s=r&&(l=(i=a.options)==null?void 0:i.route)!=null?l:a.name;return de(s)}).join("/")}`};var ce=(e,t,r)=>{let o=[],n=["list","show","edit","create","clone"],a=zt(e,t,r);return n.forEach(s=>{var d,m,c,R;let i=r&&s==="clone"?e.create:e[s],l;typeof i=="function"||r?l=Do(r&&(R=(c=(d=e.meta)==null?void 0:d.route)!=null?c:(m=e.options)==null?void 0:m.route)!=null?R:e.name,s,r?a:void 0):typeof i=="string"?l=i:typeof i=="object"&&(l=i.path),l&&o.push({action:s,resource:e,route:`/${l.replace(/^\//,"")}`})}),o};var wn=e=>{var n,a;if(e.length===0)return;if(e.length===1)return e[0];let t=e.map(s=>({...s,splitted:Be(de(s.route))})),r=(a=(n=t[0])==null?void 0:n.splitted.length)!=null?a:0,o=[...t];for(let s=0;s<r;s++){let i=o.filter(l=>!dt(l.splitted[s]));if(i.length!==0){if(i.length===1){o=i;break}o=i}}return o[0]};var Cr=(e,t)=>{let o=t.flatMap(a=>ce(a,t)).filter(a=>vo(e,a.route)),n=wn(o);return{found:!!n,resource:n==null?void 0:n.resource,action:n==null?void 0:n.action,matchedRoute:n==null?void 0:n.route}};var _t=(e,t)=>{var n,a,s;let r,o=zt(e,t,!0);if(o){let i=h(e.meta,e.options);r=`${o}/${(n=i==null?void 0:i.route)!=null?n:e.name}`}else r=(s=(a=e.options)==null?void 0:a.route)!=null?s:e.name;return`/${r.replace(/^\//,"")}`};var Lo=e=>{var s,i,l;let t=[],r={},o={},n,a;for(let d=0;d<e.length;d++){n=e[d];let m=(l=(i=n.route)!=null?i:(s=h(n==null?void 0:n.meta,n.options))==null?void 0:s.route)!=null?l:"";r[m]=n,r[m].children=[],o[n.name]=n,o[n.name].children=[]}for(let d in r)r.hasOwnProperty(d)&&(a=r[d],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var pt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);var Mo=A(require("react"));var Sn=A(require("react")),Io=({children:e})=>Sn.default.createElement("div",null,e);var Ve={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},ye=Mo.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Io,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Ve}),kn=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:n,children:a,DashboardPage:s,Title:i,Layout:l=Io,Header:d,Sider:m,Footer:c,OffLayoutArea:R,LoginPage:x=br,catchAll:L,liveMode:T="off",onLiveEvent:u,options:g})=>Mo.default.createElement(ye.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:i,undoableTimeout:n,Layout:l,Header:d,Sider:m,Footer:c,OffLayoutArea:R,DashboardPage:s,LoginPage:x,catchAll:L,liveMode:T,onLiveEvent:u,options:g}},a);var Eo=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:n,reactQueryDevtoolConfig:a,syncWithLocation:s,undoableTimeout:i,warnWhenUnsavedChanges:l}={})=>{var R,x,L,T,u,g,P,D,v,f,y,C,b,I,M,E,w,U,k,N,O,S,F,H;let d={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(x=(R=e==null?void 0:e.mutationMode)!=null?R:o)!=null?x:Ve.mutationMode,undoableTimeout:(T=(L=e==null?void 0:e.undoableTimeout)!=null?L:i)!=null?T:Ve.undoableTimeout,syncWithLocation:(g=(u=e==null?void 0:e.syncWithLocation)!=null?u:s)!=null?g:Ve.syncWithLocation,warnWhenUnsavedChanges:(D=(P=e==null?void 0:e.warnWhenUnsavedChanges)!=null?P:l)!=null?D:Ve.warnWhenUnsavedChanges,liveMode:(f=(v=e==null?void 0:e.liveMode)!=null?v:r)!=null?f:Ve.liveMode,redirect:{afterCreate:(C=(y=e==null?void 0:e.redirect)==null?void 0:y.afterCreate)!=null?C:Ve.redirect.afterCreate,afterClone:(I=(b=e==null?void 0:e.redirect)==null?void 0:b.afterClone)!=null?I:Ve.redirect.afterClone,afterEdit:(E=(M=e==null?void 0:e.redirect)==null?void 0:M.afterEdit)!=null?E:Ve.redirect.afterEdit}},m=(U=(w=e==null?void 0:e.disableTelemetry)!=null?w:t)!=null?U:!1,c={clientConfig:(O=(N=(k=e==null?void 0:e.reactQuery)==null?void 0:k.clientConfig)!=null?N:n)!=null?O:{},devtoolConfig:(H=(F=(S=e==null?void 0:e.reactQuery)==null?void 0:S.devtoolConfig)!=null?F:a)!=null?H:{}};return{optionsWithDefaults:d,disableTelemetryWithDefault:m,reactQueryWithDefaults:c}};var Uo=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}};var hr=async(e,t,r)=>{let o=[];for(let[n,a]of e.entries())try{let s=await a();o.push(t(s,n))}catch(s){o.push(r(s,n))}return o};var $=(e,t=[],r=!1)=>{if(!e)return;if(r){let n=t.find(s=>{var i;return de((i=s.route)!=null?i:"")===de(e)});return n||t.find(s=>s.name===e)}return t.find(n=>{var a;return((a=n.identifier)!=null?a:n.name)===e})};var B=(e,t,r)=>{if(t)return t;let o=$(e,r),n=h(o==null?void 0:o.meta,o==null?void 0:o.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"};var He=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var jt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/n);return o<a?Number(o)+1:void 0},Yt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var Jt=e=>{let t=[];return e==null||e.forEach(r=>{var o,n,a;t.push({...r,label:(a=(o=r.meta)==null?void 0:o.label)!=null?a:(n=r.options)==null?void 0:n.label,route:_t(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t};var Qn=e=>Be(de(e)).flatMap(r=>dt(r)?[r.slice(1)]:[]);var Bn=(e,t={},r={})=>e.reduce((o,n)=>{var s;let a=r[n]||((s=t.params)==null?void 0:s[n])||(n==="id"?t.id:void 0)||(n==="action"?t.action:void 0)||(n==="resource"?t.resource:void 0);return typeof a<"u"&&(o[n]=a),o},{});var me=(e,t={},r={})=>{let o=Qn(e),n=Bn(o,t,r);return e.replace(/:([^\/]+)/g,(a,s)=>{let i=n[s];return typeof i<"u"?`${i}`:a})};var W=()=>{let e=ee(),t=ne();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null};var Xt=({hasPagination:e,pagination:t,configPagination:r}={})=>{var i,l,d;let o=e===!1?"off":"server",n=(i=t==null?void 0:t.mode)!=null?i:o,a=(l=h(t==null?void 0:t.current,r==null?void 0:r.current))!=null?l:1,s=(d=h(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?d:10;return{current:a,pageSize:s,mode:n}};var ht=({resource:e,config:t,filters:r,hasPagination:o,pagination:n,sorters:a,queryOptions:s,successNotification:i,errorNotification:l,meta:d,metaData:m,liveMode:c,onLiveEvent:R,liveParams:x,dataProviderName:L})=>{let{resources:T}=Q(),u=z(),g=V(),P=W(),{mutate:D}=J({v3LegacyAuthProviderCompatible:Boolean(P==null?void 0:P.isLegacy)}),v=Z(),f=B(e,L,T),y=h(d,m),C=h(r,t==null?void 0:t.filters),b=h(a,t==null?void 0:t.sort),I=h(o,t==null?void 0:t.hasPagination),M=Xt({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:I}),E=M.mode==="server",w={meta:y,metaData:y,filters:C,hasPagination:E,pagination:M,sorters:b,config:{...t,sort:b}},U=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,k=X(e,f,y,y),{getList:N}=u(f);return We({resource:e,types:["*"],params:{meta:y,metaData:y,pagination:M,hasPagination:E,sort:b,sorters:b,filters:C,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:U,liveMode:c,onLiveEvent:R}),(0,Vn.useQuery)(k.list({filters:C,hasPagination:E,...E&&{pagination:M},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:S,pageParam:F,signal:H})=>N({resource:e,pagination:M,hasPagination:E,filters:C,sort:b,sorters:b,meta:{...y||{},queryContext:{queryKey:S,pageParam:F,signal:H}},metaData:{...y||{},queryContext:{queryKey:S,pageParam:F,signal:H}}}),{...s,enabled:typeof(s==null?void 0:s.enabled)<"u"?s==null?void 0:s.enabled:!!e,select:S=>{var _;let F=S,{current:H,mode:xe,pageSize:Me}=M;return xe==="client"&&(F={...F,data:F.data.slice((H-1)*Me,H*Me),total:F.total}),s!=null&&s.select?(_=s==null?void 0:s.select)==null?void 0:_.call(s,F):F},onSuccess:S=>{var H;(H=s==null?void 0:s.onSuccess)==null||H.call(s,S);let F=typeof i=="function"?i(S,w,e):i;v(F)},onError:S=>{var H;D(S),(H=s==null?void 0:s.onError)==null||H.call(s,S);let F=typeof l=="function"?l(S,w,e):l;v(F,{key:`${e}-useList-notification`,message:g("notifications.error",{statusCode:S.statusCode},`Error (status code: ${S.statusCode})`),description:S.message,type:"error"})}})};var Nn=require("@tanstack/react-query");var vt=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:n,meta:a,metaData:s,liveMode:i,onLiveEvent:l,liveParams:d,dataProviderName:m})=>{let{resources:c}=Q(),R=z(),x=X(e,B(e,m,c),h(a,s),h(a,s)),{getOne:L}=R(B(e,m,c)),T=V(),u=W(),{mutate:g}=J({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),P=Z();return We({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:h(a,s),metaData:h(a,s),subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:i,onLiveEvent:l}),(0,Nn.useQuery)(x.detail(t),({queryKey:v,pageParam:f,signal:y})=>L({resource:e,id:t,meta:{...h(a,s)||{},queryContext:{queryKey:v,pageParam:f,signal:y}},metaData:{...h(a,s)||{},queryContext:{queryKey:v,pageParam:f,signal:y}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:v=>{var y;(y=r==null?void 0:r.onSuccess)==null||y.call(r,v);let f=typeof o=="function"?o(v,{id:t,...h(a,s)||{}},e):o;P(f)},onError:v=>{var y;g(v),(y=r==null?void 0:r.onError)==null||y.call(r,v);let f=typeof n=="function"?n(v,{id:t,...h(a,s)||{}},e):n;P(f,{key:`${t}-${e}-getOne-notification`,message:T("notifications.error",{statusCode:v.statusCode},`Error (status code: ${v.statusCode})`),description:v.message,type:"error"})}})};var Fn=require("@tanstack/react-query");var vr=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:n,meta:a,metaData:s,liveMode:i,onLiveEvent:l,liveParams:d,dataProviderName:m})=>{let{resources:c}=Q(),R=z(),x=X(e,B(e,m,c),h(a,s),h(a,s)),{getMany:L,getOne:T}=R(B(e,m,c)),u=V(),g=W(),{mutate:P}=J({v3LegacyAuthProviderCompatible:Boolean(g==null?void 0:g.isLegacy)}),D=Z(),v=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return We({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:h(a,s),metaData:h(a,s),subscriptionType:"useMany",...d},channel:`resources/${e}`,enabled:v,liveMode:i,onLiveEvent:l}),(0,Fn.useQuery)(x.many(t),({queryKey:y,pageParam:C,signal:b})=>L?L({resource:e,ids:t,metaData:{...h(a,s)||{},queryContext:{queryKey:y,pageParam:C,signal:b}}}):He(t.map(I=>T({resource:e,id:I,metaData:{...h(a,s)||{},queryContext:{queryKey:y,pageParam:C,signal:b}}}))),{...r,onSuccess:y=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,y);let C=typeof o=="function"?o(y,t,e):o;D(C)},onError:y=>{var b;P(y),(b=r==null?void 0:r.onError)==null||b.call(r,y);let C=typeof n=="function"?n(y,t,e):n;D(C,{key:`${t[0]}-${e}-getMany-notification`,message:u("notifications.error",{statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}})};var Ir=require("@tanstack/react-query");var Dt=A(require("react")),Dr=A(require("lodash/isEqual"));var Lr=Dt.default.createContext({notifications:[],notificationDispatch:()=>!1}),Aa=[],wa=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!((0,Dr.default)(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!((0,Dr.default)(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>(0,Dr.default)(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},Ao=({children:e})=>{let[t,r]=(0,Dt.useReducer)(wa,Aa),o={notifications:t,notificationDispatch:r};return Dt.default.createElement(Lr.Provider,{value:o},e,typeof window<"u"&&t.map(n=>Dt.default.createElement(wo,{key:`${n.id}-${n.resource}-queue`,notification:n})))};var So=A(require("pluralize"));var Mr=({mutationOptions:e}={})=>{let{resources:t}=Q(),r=(0,Ir.useQueryClient)(),o=z(),{mutationMode:n,undoableTimeout:a}=Le(),s=V(),i=W(),{mutate:l}=J({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),d=be(),{log:m}=he(),{notificationDispatch:c}=ke(),R=Z(),x=ve();return(0,Ir.useMutation)(({id:T,values:u,resource:g,mutationMode:P,undoableTimeout:D,onCancel:v,meta:f,metaData:y,dataProviderName:C})=>{let b=P!=null?P:n,I=D!=null?D:a;return b!=="undoable"?o(B(g,C,t)).update({resource:g,id:T,variables:u,meta:h(f,y),metaData:h(f,y)}):new Promise((E,w)=>{let U=()=>{o(B(g,C,t)).update({resource:g,id:T,variables:u,meta:h(f,y),metaData:h(f,y)}).then(N=>E(N)).catch(N=>w(N))},k=()=>{w({message:"mutationCancelled"})};v&&v(k),c({type:"ADD",payload:{id:T,resource:g,cancelMutation:k,doMutation:U,seconds:I,isSilent:!!v}})})},{onMutate:async({resource:T,id:u,mutationMode:g,values:P,dataProviderName:D})=>{let v=X(T,B(T,D,t)),f=r.getQueriesData(v.resourceAll),y=g!=null?g:n;return await r.cancelQueries(v.resourceAll,void 0,{silent:!0}),y!=="pessimistic"&&(r.setQueriesData(v.list(),C=>{if(!C)return null;let b=C.data.map(I=>{var M;return((M=I.id)==null?void 0:M.toString())===(u==null?void 0:u.toString())?{id:u,...I,...P}:I});return{...C,data:b}}),r.setQueriesData(v.many(),C=>{if(!C)return null;let b=C.data.map(I=>{var M;return((M=I.id)==null?void 0:M.toString())===(u==null?void 0:u.toString())&&(I={id:u,...I,...P}),I});return{...C,data:b}}),r.setQueriesData(v.detail(u),C=>C?{...C,data:{...C.data,...P}}:null)),{previousQueries:f,queryKey:v}},onSettled:(T,u,{id:g,resource:P,dataProviderName:D,invalidates:v=["list","many","detail"]})=>{x({resource:P,dataProviderName:B(P,D,t),invalidates:v,id:g}),c({type:"REMOVE",payload:{id:g,resource:P}})},onSuccess:(T,{id:u,resource:g,successNotification:P,dataProviderName:D,values:v,meta:f,metaData:y},C)=>{var N;let b=So.default.singular(g),I=typeof P=="function"?P(T,{id:u,values:v},g):P;R(I,{key:`${u}-${g}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${g}.${g}`,b)},`Successfully updated ${b}`),type:"success"}),d==null||d({channel:`resources/${g}`,type:"updated",payload:{ids:(N=T.data)!=null&&N.id?[T.data.id]:void 0},date:new Date});let M;if(C){let O=r.getQueryData(C.queryKey.detail(u));M=Object.keys(v||{}).reduce((S,F)=>{var H;return S[F]=(H=O==null?void 0:O.data)==null?void 0:H[F],S},{})}let{fields:E,operation:w,variables:U,...k}=h(f,y)||{};m==null||m.mutate({action:"update",resource:g,data:v,previousData:M,meta:{id:u,dataProviderName:B(g,D,t),...k}})},onError:(T,{id:u,resource:g,errorNotification:P,values:D},v)=>{if(v)for(let f of v.previousQueries)r.setQueryData(f[0],f[1]);if(T.message!=="mutationCancelled"){l==null||l(T);let f=So.default.singular(g),y=typeof P=="function"?P(T,{id:u,values:D},g):P;R(y,{key:`${u}-${g}-notification`,message:s("notifications.editError",{resource:s(`${g}.${g}`,f),statusCode:T.statusCode},`Error when updating ${f} (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var On=require("@tanstack/react-query"),ko=A(require("pluralize"));var It=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=z(),n=ve(),{resources:a}=Q(),s=V(),i=be(),{log:l}=he(),d=Z();return(0,On.useMutation)(({resource:c,values:R,meta:x,metaData:L,dataProviderName:T})=>o(B(c,T,a)).create({resource:c,variables:R,meta:h(x,L),metaData:h(x,L)}),{onSuccess:(c,{resource:R,successNotification:x,dataProviderName:L,invalidates:T=["list","many"],values:u,meta:g,metaData:P})=>{var I,M,E;let D=ko.default.singular(R),v=typeof x=="function"?x(c,u,R):x;d(v,{key:`create-${R}-notification`,message:s("notifications.createSuccess",{resource:s(`${R}.${R}`,D)},`Successfully created ${D}`),description:s("notifications.success","Success"),type:"success"}),n({resource:R,dataProviderName:B(R,L,a),invalidates:T}),i==null||i({channel:`resources/${R}`,type:"created",payload:{ids:(I=c==null?void 0:c.data)!=null&&I.id?[c.data.id]:void 0},date:new Date});let{fields:f,operation:y,variables:C,...b}=h(g,P)||{};l==null||l.mutate({action:"create",resource:R,data:u,meta:{dataProviderName:B(R,L,a),id:(E=(M=c==null?void 0:c.data)==null?void 0:M.id)!=null?E:void 0,...b}})},onError:(c,{resource:R,errorNotification:x,values:L})=>{r(c);let T=ko.default.singular(R),u=typeof x=="function"?x(c,L,R):x;d(u,{key:`create-${R}-notification`,description:c.message,message:s("notifications.createError",{resource:s(`${R}.${R}`,T),statusCode:c.statusCode},`There was an error creating ${T} (status code: ${c.statusCode})`),type:"error"})},...e})};var Er=require("@tanstack/react-query"),Qo=A(require("pluralize"));var Kn=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=z(),{resources:n}=Q(),a=(0,Er.useQueryClient)(),{mutationMode:s,undoableTimeout:i}=Le(),{notificationDispatch:l}=ke(),d=V(),m=be(),{log:c}=he(),R=Z(),x=ve();return(0,Er.useMutation)(({id:T,mutationMode:u,undoableTimeout:g,resource:P,onCancel:D,meta:v,metaData:f,dataProviderName:y,values:C})=>{let b=u!=null?u:s,I=g!=null?g:i;return b!=="undoable"?o(B(P,y,n)).deleteOne({resource:P,id:T,meta:h(v,f),metaData:h(v,f),variables:C}):new Promise((E,w)=>{let U=()=>{o(B(P,y,n)).deleteOne({resource:P,id:T,meta:h(v,f),variables:C}).then(N=>E(N)).catch(N=>w(N))},k=()=>{w({message:"mutationCancelled"})};D&&D(k),l({type:"ADD",payload:{id:T,resource:P,cancelMutation:k,doMutation:U,seconds:I,isSilent:!!D}})})},{onMutate:async({id:T,resource:u,mutationMode:g,dataProviderName:P})=>{let D=X(u,B(u,P,n)),v=g!=null?g:s;await a.cancelQueries(D.resourceAll,void 0,{silent:!0});let f=a.getQueriesData(D.resourceAll);return v!=="pessimistic"&&(a.setQueriesData(D.list(),y=>y?{data:y.data.filter(b=>{var I;return((I=b.id)==null?void 0:I.toString())!==T.toString()}),total:y.total-1}:null),a.setQueriesData(D.many(),y=>{if(!y)return null;let C=y.data.filter(b=>{var I;return((I=b.id)==null?void 0:I.toString())!==(T==null?void 0:T.toString())});return{...y,data:C}})),{previousQueries:f,queryKey:D}},onSettled:(T,u,{id:g,resource:P,dataProviderName:D,invalidates:v=["list","many"]})=>{x({resource:P,dataProviderName:B(P,D,n),invalidates:v}),l({type:"REMOVE",payload:{id:g,resource:P}})},onSuccess:(T,{id:u,resource:g,successNotification:P,dataProviderName:D,meta:v,metaData:f},y)=>{let C=Qo.default.singular(g!=null?g:"");a.removeQueries(y==null?void 0:y.queryKey.detail(u));let b=typeof P=="function"?P(T,u,g):P;R(b,{key:`${u}-${g}-notification`,description:d("notifications.success","Success"),message:d("notifications.deleteSuccess",{resource:d(`${g}.${g}`,C)},`Successfully deleted a ${C}`),type:"success"}),m==null||m({channel:`resources/${g}`,type:"deleted",payload:{ids:u?[u]:[]},date:new Date});let{fields:I,operation:M,variables:E,...w}=h(v,f)||{};c==null||c.mutate({action:"delete",resource:g,meta:{id:u,dataProviderName:B(g,D,n),...w}}),a.removeQueries(y==null?void 0:y.queryKey.detail(u))},onError:(T,{id:u,resource:g,errorNotification:P},D)=>{if(D)for(let v of D.previousQueries)a.setQueryData(v[0],v[1]);if(T.message!=="mutationCancelled"){r(T);let v=Qo.default.singular(g!=null?g:""),f=typeof P=="function"?P(T,u,g):P;R(f,{key:`${u}-${g}-notification`,message:d("notifications.deleteError",{resource:v,statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var Hn=require("@tanstack/react-query"),Wn=A(require("pluralize"));var Ur=({mutationOptions:e}={})=>{let t=z(),{resources:r}=Q(),o=V(),n=be(),a=Z(),s=ve(),{log:i}=he();return(0,Hn.useMutation)(({resource:d,values:m,meta:c,metaData:R,dataProviderName:x})=>{let L=t(B(d,x,r));return L.createMany?L.createMany({resource:d,variables:m,meta:h(c,R),metaData:h(c,R)}):He(m.map(T=>L.create({resource:d,variables:T,meta:h(c,R),metaData:h(c,R)})))},{onSuccess:(d,{resource:m,successNotification:c,dataProviderName:R,invalidates:x=["list","many"],values:L,meta:T,metaData:u})=>{let g=Wn.default.plural(m),P=typeof c=="function"?c(d,L,m):c;a(P,{key:`createMany-${m}-notification`,message:o("notifications.createSuccess",{resource:o(`${m}.${m}`,m)},`Successfully created ${g}`),description:o("notifications.success","Success"),type:"success"}),s({resource:m,dataProviderName:B(m,R,r),invalidates:x});let D=d==null?void 0:d.data.filter(b=>(b==null?void 0:b.id)!==void 0).map(b=>b.id);n==null||n({channel:`resources/${m}`,type:"created",payload:{ids:D},date:new Date});let{fields:v,operation:f,variables:y,...C}=h(T,u)||{};i==null||i.mutate({action:"createMany",resource:m,data:L,meta:{dataProviderName:B(m,R,r),ids:D,...C}})},onError:(d,{resource:m,errorNotification:c,values:R})=>{let x=typeof c=="function"?c(d,R,m):c;a(x,{key:`createMany-${m}-notification`,description:d.message,message:o("notifications.createError",{resource:o(`${m}.${m}`,m),statusCode:d.statusCode},`There was an error creating ${m} (status code: ${d.statusCode}`),type:"error"})},...e})};var Ar=require("@tanstack/react-query"),Bo=A(require("pluralize"));var $n=({mutationOptions:e}={})=>{let{resources:t}=Q(),r=(0,Ar.useQueryClient)(),o=z(),n=V(),{mutationMode:a,undoableTimeout:s}=Le(),i=W(),{mutate:l}=J({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),{notificationDispatch:d}=ke(),m=be(),c=Z(),R=ve(),{log:x}=he();return(0,Ar.useMutation)(({ids:T,values:u,resource:g,onCancel:P,mutationMode:D,undoableTimeout:v,meta:f,metaData:y,dataProviderName:C})=>{let b=D!=null?D:a,I=v!=null?v:s,M=o(B(g,C,t)),E=()=>M.updateMany?M.updateMany({resource:g,ids:T,variables:u,meta:h(f,y),metaData:h(f,y)}):He(T.map(U=>M.update({resource:g,id:U,variables:u,meta:h(f,y),metaData:h(f,y)})));return b!=="undoable"?E():new Promise((U,k)=>{let N=()=>{E().then(S=>U(S)).catch(S=>k(S))},O=()=>{k({message:"mutationCancelled"})};P&&P(O),d({type:"ADD",payload:{id:T,resource:g,cancelMutation:O,doMutation:N,seconds:I,isSilent:!!P}})})},{onMutate:async({resource:T,ids:u,values:g,mutationMode:P,dataProviderName:D,meta:v,metaData:f})=>{let y=X(T,B(T,D,t),h(v,f),h(v,f)),C=P!=null?P:a;await r.cancelQueries(y.resourceAll,void 0,{silent:!0});let b=r.getQueriesData(y.resourceAll);if(C!=="pessimistic"){r.setQueriesData(y.list(),I=>{if(!I)return null;let M=I.data.map(E=>E.id!==void 0&&u.filter(w=>w!==void 0).map(String).includes(E.id.toString())?{...E,...g}:E);return{...I,data:M}}),r.setQueriesData(y.many(),I=>{if(!I)return null;let M=I.data.map(E=>E.id!==void 0&&u.filter(w=>w!==void 0).map(String).includes(E.id.toString())?{...E,...g}:E);return{...I,data:M}});for(let I of u)r.setQueriesData(y.detail(I),M=>{if(!M)return null;let E={...M.data,...g};return{...M,data:E}})}return{previousQueries:b,queryKey:y}},onSettled:(T,u,{ids:g,resource:P,dataProviderName:D})=>{R({resource:P,invalidates:["list","many"],dataProviderName:B(P,D,t)}),g.forEach(v=>R({resource:P,invalidates:["detail"],dataProviderName:B(P,D,t),id:v})),d({type:"REMOVE",payload:{id:g,resource:P}})},onSuccess:(T,{ids:u,resource:g,meta:P,metaData:D,dataProviderName:v,successNotification:f,values:y},C)=>{let b=Bo.default.singular(g),I=typeof f=="function"?f(T,{ids:u,values:y},g):f;c(I,{key:`${u}-${g}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${g}.${g}`,g)},`Successfully updated ${b}`),type:"success"}),m==null||m({channel:`resources/${g}`,type:"updated",payload:{ids:u.map(String)},date:new Date});let M=[];C&&u.forEach(N=>{let O=r.getQueryData(C.queryKey.detail(N));M.push(Object.keys(y||{}).reduce((S,F)=>{var H;return S[F]=(H=O==null?void 0:O.data)==null?void 0:H[F],S},{}))});let{fields:E,operation:w,variables:U,...k}=h(P,D)||{};x==null||x.mutate({action:"updateMany",resource:g,data:y,previousData:M,meta:{ids:u,dataProviderName:B(g,v,t),...k}})},onError:(T,{ids:u,resource:g,errorNotification:P,values:D},v)=>{if(v)for(let f of v.previousQueries)r.setQueryData(f[0],f[1]);if(T.message!=="mutationCancelled"){l==null||l(T);let f=Bo.default.singular(g),y=typeof P=="function"?P(T,{ids:u,values:D},g):P;c(y,{key:`${u}-${g}-updateMany-error-notification`,message:n("notifications.editError",{resource:f,statusCode:T.statusCode},`Error when updating ${f} (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var wr=require("@tanstack/react-query"),Gn=A(require("pluralize"));var zn=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:o,undoableTimeout:n}=Le(),a=z(),{notificationDispatch:s}=ke(),i=V(),l=be(),d=Z(),m=ve(),{log:c}=he(),{resources:R}=Q(),x=(0,wr.useQueryClient)();return(0,wr.useMutation)(({resource:T,ids:u,mutationMode:g,undoableTimeout:P,onCancel:D,meta:v,metaData:f,dataProviderName:y,values:C})=>{let b=g!=null?g:o,I=P!=null?P:n,M=a(B(T,y,R)),E=()=>M.deleteMany?M.deleteMany({resource:T,ids:u,meta:h(v,f),metaData:h(v,f),variables:C}):He(u.map(U=>M.deleteOne({resource:T,id:U,meta:h(v,f),metaData:h(v,f),variables:C})));return b!=="undoable"?E():new Promise((U,k)=>{let N=()=>{E().then(S=>U(S)).catch(S=>k(S))},O=()=>{k({message:"mutationCancelled"})};D&&D(O),s({type:"ADD",payload:{id:u,resource:T,cancelMutation:O,doMutation:N,seconds:I,isSilent:!!D}})})},{onMutate:async({ids:T,resource:u,mutationMode:g,dataProviderName:P})=>{let D=X(u,B(u,P,R)),v=g!=null?g:o;await x.cancelQueries(D.resourceAll,void 0,{silent:!0});let f=x.getQueriesData(D.resourceAll);if(v!=="pessimistic"){x.setQueriesData(D.list(),y=>y?{data:y.data.filter(b=>b.id&&!T.map(String).includes(b.id.toString())),total:y.total-1}:null),x.setQueriesData(D.many(),y=>{if(!y)return null;let C=y.data.filter(b=>b.id?!T.map(String).includes(b.id.toString()):!1);return{...y,data:C}});for(let y of T)x.setQueriesData(D.detail(y),C=>!C||C.data.id==y?null:{...C})}return{previousQueries:f,queryKey:D}},onSettled:(T,u,{resource:g,ids:P,dataProviderName:D,invalidates:v=["list","many"]})=>{m({resource:g,dataProviderName:B(g,D,R),invalidates:v}),s({type:"REMOVE",payload:{id:P,resource:g}})},onSuccess:(T,{ids:u,resource:g,meta:P,metaData:D,dataProviderName:v,successNotification:f},y)=>{u.forEach(w=>x.removeQueries(y==null?void 0:y.queryKey.detail(w)));let C=typeof f=="function"?f(T,u,g):f;d(C,{key:`${u}-${g}-notification`,description:i("notifications.success","Success"),message:i("notifications.deleteSuccess",{resource:i(`${g}.${g}`,g)},`Successfully deleted ${g}`),type:"success"}),l==null||l({channel:`resources/${g}`,type:"deleted",payload:{ids:u},date:new Date});let{fields:b,operation:I,variables:M,...E}=h(P,D)||{};c==null||c.mutate({action:"deleteMany",resource:g,meta:{ids:u,dataProviderName:B(g,v,R),...E}}),u.forEach(w=>x.removeQueries(y==null?void 0:y.queryKey.detail(w)))},onError:(T,{ids:u,resource:g,errorNotification:P},D)=>{if(D)for(let v of D.previousQueries)x.setQueryData(v[0],v[1]);if(T.message!=="mutationCancelled"){r(T);let v=Gn.default.singular(g),f=typeof P=="function"?P(T,u,g):P;d(f,{key:`${u}-${g}-notification`,message:i("notifications.deleteError",{resource:v,statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var _n=e=>{let t=z(),{getApiUrl:r}=t(e);return r()};var jn=require("@tanstack/react-query");var Yn=({url:e,method:t,config:r,queryOptions:o,successNotification:n,errorNotification:a,meta:s,metaData:i,dataProviderName:l})=>{let d=z(),{custom:m}=d(l),c=W(),{mutate:R}=J({v3LegacyAuthProviderCompatible:Boolean(c==null?void 0:c.isLegacy)}),x=V(),L=Z();if(m)return(0,jn.useQuery)({queryKey:[l,"custom",t,e,{...r,...h(s,i)||{}}],queryFn:({queryKey:u,pageParam:g,signal:P})=>m({url:e,method:t,...r,metaData:{...h(s,i)||{},queryContext:{queryKey:u,pageParam:g,signal:P}}}),...o,onSuccess:u=>{var P;(P=o==null?void 0:o.onSuccess)==null||P.call(o,u);let g=typeof n=="function"?n(u,{...r,...h(s,i)||{}}):n;L(g)},onError:u=>{var P;R(u),(P=o==null?void 0:o.onError)==null||P.call(o,u);let g=typeof a=="function"?a(u,{...r,...h(s,i)||{}}):a;L(g,{key:`${t}-notification`,message:x("notifications.error",{statusCode:u.statusCode},`Error (status code: ${u.statusCode})`),description:u.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};var Jn=require("@tanstack/react-query");var Xn=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=Z(),n=z(),a=V();return(0,Jn.useMutation)(({url:i,method:l,values:d,meta:m,metaData:c,dataProviderName:R,config:x})=>{let{custom:L}=n(R);if(L)return L({url:i,method:l,payload:d,meta:h(m,c),metaData:h(m,c),headers:{...x==null?void 0:x.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(i,{successNotification:l,config:d,meta:m,metaData:c})=>{let R=typeof l=="function"?l(i,{...d,...h(m,c)||{}}):l;o(R)},onError:(i,{errorNotification:l,method:d,config:m,meta:c,metaData:R})=>{r(i);let x=typeof l=="function"?l(i,{...m,...h(c,R)||{}}):l;o(x,{key:`${d}-notification`,message:a("notifications.error",{statusCode:i.statusCode},`Error (status code: ${i.statusCode})`),description:i.message,type:"error"})},...e})};var Sr=require("react");var Vo=A(require("react")),Sa=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Zt=Vo.default.createContext(Sa()),Zn=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Vo.default.createElement(Zt.Provider,{value:r},e)};var z=()=>{let e=(0,Sr.useContext)(Zt);return(0,Sr.useCallback)(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};var qn=require("@tanstack/react-query");var es=({resource:e,config:t,filters:r,hasPagination:o,pagination:n,sorters:a,queryOptions:s,successNotification:i,errorNotification:l,meta:d,metaData:m,liveMode:c,onLiveEvent:R,liveParams:x,dataProviderName:L})=>{let{resources:T}=Q(),u=z(),g=V(),P=W(),{mutate:D}=J({v3LegacyAuthProviderCompatible:Boolean(P==null?void 0:P.isLegacy)}),v=Z(),f=B(e,L,T),y=h(d,m),C=h(r,t==null?void 0:t.filters),b=h(a,t==null?void 0:t.sort),I=h(o,t==null?void 0:t.hasPagination),M=Xt({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:I}),E=M.mode==="server",w={meta:y,metaData:y,filters:C,hasPagination:E,pagination:M,sorters:b,config:{...t,sort:b}},U=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,k=X(e,f,y,y),{getList:N}=u(f);return We({resource:e,types:["*"],params:{meta:y,metaData:y,pagination:M,hasPagination:E,sort:b,sorters:b,filters:C,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:U,liveMode:c,onLiveEvent:R}),(0,qn.useInfiniteQuery)(k.list({filters:C,hasPagination:E,...E&&{pagination:M},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:S,pageParam:F,signal:H})=>{let xe={...M,current:F};return N({resource:e,pagination:xe,hasPagination:E,filters:C,sort:b,sorters:b,meta:{...y||{},queryContext:{queryKey:S,pageParam:F,signal:H}},metaData:{...y||{},queryContext:{queryKey:S,pageParam:F,signal:H}}}).then(({data:Me,total:_,...Oe})=>({data:Me,total:_,pagination:xe,...Oe}))},{getNextPageParam:S=>jt(S),getPreviousPageParam:S=>Yt(S),...s,onSuccess:S=>{var H;(H=s==null?void 0:s.onSuccess)==null||H.call(s,S);let F=typeof i=="function"?i(S,w,e):i;v(F)},onError:S=>{var H;D(S),(H=s==null?void 0:s.onError)==null||H.call(s,S);let F=typeof l=="function"?l(S,w,e):l;v(F,{key:`${e}-useInfiniteList-notification`,message:g("notifications.error",{statusCode:S.statusCode},`Error (status code: ${S.statusCode})`),description:S.message,type:"error"})}})};var qt=require("react"),rs=require("@tanstack/react-query");var No=A(require("react")),$e=No.default.createContext(void 0),ts=({liveProvider:e,children:t})=>No.default.createElement($e.Provider,{value:e},t);var We=({resource:e,params:t,channel:r,types:o,enabled:n=!0,liveMode:a,onLiveEvent:s})=>{let i=(0,rs.useQueryClient)(),l=X(e),d=(0,qt.useContext)($e),{liveMode:m,onLiveEvent:c}=(0,qt.useContext)(ye),R=a!=null?a:m;(0,qt.useEffect)(()=>{let x;return R&&R!=="off"&&n&&(x=d==null?void 0:d.subscribe({channel:r,params:{resource:e,...t},types:o,callback:L=>{R==="auto"&&i.invalidateQueries(l.resourceAll),s==null||s(L),c==null||c(L)}})),()=>{x&&(d==null||d.unsubscribe(x))}},[n])};var os=require("react");var Fo=e=>{let{liveMode:t}=(0,os.useContext)(ye);return e!=null?e:t};var kr=require("react");var ka=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:n})=>{let a=(0,kr.useContext)($e);(0,kr.useEffect)(()=>{let s;return o&&(s=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:n})),()=>{s&&(a==null||a.unsubscribe(s))}},[o])};var ns=require("react");var be=()=>{let e=(0,ns.useContext)($e);return e==null?void 0:e.publish};var ys=require("react");var Oo=A(require("react"));var us=require("react");var ss=require("react"),as=A(require("lodash/isEqual")),is=e=>{let t=(0,ss.useRef)(e);return(0,as.default)(t.current,e)||(t.current=e),t.current};var Qr=(e,t)=>{let r=is(t);return(0,us.useMemo)(e,r)};var Ge=Oo.default.createContext({resources:[]}),cs=({resources:e,children:t})=>{let r=Qr(()=>Jt(e!=null?e:[]),[e]);return Oo.default.createElement(Ge.Provider,{value:{resources:r}},t)};var Ko=A(require("react")),ps=Ko.default.createContext("new"),ds=ps.Provider,K=()=>Ko.default.useContext(ps);var fs=A(require("react"));var Br=A(require("react")),ls={},ze=(0,Br.createContext)(ls),ms=({children:e,router:t})=>Br.default.createElement(ze.Provider,{value:t!=null?t:ls},e);var Vr=A(require("react")),Nr=()=>{let e=(0,Vr.useContext)(ze);return Vr.default.useMemo(()=>{var o;return(o=e==null?void 0:e.parse)!=null?o:()=>()=>({})},[e==null?void 0:e.parse])()};var j=()=>{let e=Nr();return fs.default.useMemo(()=>e(),[e])};function Q(e){var m,c;let{resources:t}=(0,ys.useContext)(Ge),r=K(),o=j(),n={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},a=_e(),{useParams:s}=G(),i=s();if(r==="legacy"){let R=n.resourceNameOrRouteName?n.resourceNameOrRouteName:i.resource,x=R?a(R):void 0,L=(m=n==null?void 0:n.recordItemId)!=null?m:i.id,T=i.action,u=(c=n==null?void 0:n.resourceName)!=null?c:x==null?void 0:x.name;return{resources:t,resource:x,resourceName:u,id:L,action:T}}let l,d=typeof e=="string"?e:n==null?void 0:n.resourceNameOrRouteName;if(d){let R=$(d,t);R?l=R:l={name:d}}else o!=null&&o.resource&&(l=o.resource);return{resources:t,resource:l,resourceName:l==null?void 0:l.name,id:o.id,action:o.action}}var Fr=require("react");var _e=()=>{let{resources:e}=(0,Fr.useContext)(Ge);return(0,Fr.useCallback)(r=>{let o=$(r,e,!0);return o||{name:r,route:r}},[e])};var gs=require("react");var ke=()=>{let{notifications:e,notificationDispatch:t}=(0,gs.useContext)(Lr);return{notifications:e,notificationDispatch:t}};var Ts=require("react");var Or=A(require("react"));var er=(0,Or.createContext)({}),Rs=({open:e,close:t,children:r})=>Or.default.createElement(er.Provider,{value:{open:e,close:t}},r);var fe=()=>{let{open:e,close:t}=(0,Ts.useContext)(er);return{open:e,close:t}};var Ps=require("react");var Z=()=>{let{open:e}=fe();return(0,Ps.useCallback)((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};var Kr=require("react");var Ho=A(require("react"));var Qe=Ho.default.createContext({}),xs=({children:e,i18nProvider:t})=>Ho.default.createElement(Qe.Provider,{value:{i18nProvider:t}},e);var Cs=()=>{let{i18nProvider:e}=(0,Kr.useContext)(Qe);return(0,Kr.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])};var Hr=require("react");var V=()=>{let{i18nProvider:e}=(0,Hr.useContext)(Qe);return(0,Hr.useMemo)(()=>{function r(o,n,a){var s,i;return(i=(s=e==null?void 0:e.translate(o,n,a))!=null?s:a)!=null?i:typeof n=="string"&&typeof a>"u"?n:o}return r},[e])};var Wr=require("react");var bs=()=>{let{i18nProvider:e}=(0,Wr.useContext)(Qe);return(0,Wr.useCallback)(()=>e==null?void 0:e.getLocale(),[])};var hs=require("react");var Le=()=>{let{mutationMode:e,undoableTimeout:t}=(0,hs.useContext)(ye);return{mutationMode:e,undoableTimeout:t}};var $o=require("react");var tr=A(require("react")),Wo=tr.default.createContext({}),vs=({children:e})=>{let[t,r]=(0,tr.useState)(!1);return tr.default.createElement(Wo.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var Mt=()=>{let{warnWhenUnsavedChanges:e}=(0,$o.useContext)(ye),{warnWhen:t,setWarnWhen:r}=(0,$o.useContext)(Wo);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};var Ds=require("react");var $r=()=>{let{syncWithLocation:e}=(0,Ds.useContext)(ye);return{syncWithLocation:e}};var Ls=require("react");var Is=()=>{let{Title:e}=(0,Ls.useContext)(ye);return e};var Ms=require("react");var Et=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:n,Title:a,hasDashboard:s,mutationMode:i,syncWithLocation:l,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:c,LoginPage:R,catchAll:x,options:L}=(0,Ms.useContext)(ye);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:n,Title:a,hasDashboard:s,mutationMode:i,syncWithLocation:l,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:c,LoginPage:R,catchAll:x,options:L}};var Es=require("react");var Us=require("export-to-csv-fix-source-map"),Qa=({resourceName:e,resource:t,sorter:r,sorters:o,filters:n,maxItemCount:a,pageSize:s=20,mapData:i=x=>x,exportOptions:l,meta:d,metaData:m,dataProviderName:c,onError:R}={})=>{var f;let[x,L]=(0,Es.useState)(!1),T=z(),{resource:u,resources:g}=Q(),P=`${ct(u==null?void 0:u.name,"plural")}-${new Date().toLocaleString()}`,{getList:D}=T(B((f=u==null?void 0:u.identifier)!=null?f:u==null?void 0:u.name,c,g));return{isLoading:x,triggerExport:async()=>{var M;L(!0);let y=[],C=1,b=!0;for(;b;)try{let{data:E,total:w}=await D({resource:(M=u==null?void 0:u.name)!=null?M:"",filters:n,sort:h(o,r),sorters:h(o,r),pagination:{current:C,pageSize:s,mode:"server"},meta:h(d,m),metaData:h(d,m)});C++,y.push(...E),a&&y.length>=a&&(y=y.slice(0,a),b=!1),w===y.length&&(b=!1)}catch(E){L(!1),b=!1,R==null||R(E);return}new Us.ExportToCsv({filename:P,useKeysAsHeaders:!0,...l}).generateCsv(y.map(i)),L(!1)}}};var Go=A(require("react"));var Ba=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:n,redirect:a,successNotification:s,errorNotification:i,meta:l,metaData:d,mutationMode:m,liveMode:c,onLiveEvent:R,liveParams:x,undoableTimeout:L,dataProviderName:T,invalidates:u,queryOptions:g,createMutationOptions:P,updateMutationOptions:D}={})=>{let{options:v}=Et(),{resources:f}=Q(),y=K(),{resource:C,id:b,action:I}=j(),{useParams:M}=G(),{resource:E,action:w,id:U}=M(),k=typeof C=="string"?C:C==null?void 0:C.name,N=!e||e===(y==="legacy"?E:k)?r!=null?r:y==="legacy"?U:b:r,[O,S]=Go.default.useState(N);Go.default.useEffect(()=>{N!==O&&S(r)},[r]);let F=e!=null?e:y==="legacy"?E:k,H=y==="legacy"?w:I,xe=t!=null?t:H==="edit"||H==="clone"?H:"create",Me=_e(),_;if(y==="legacy")F&&(_=Me(F));else if(e){let ue=$(e,f);ue?_=ue:_={name:e,route:e}}else if(typeof C=="string"){let ue=$(C,f);ue?_=ue:_={name:C,route:C}}else _=C;let{mutationMode:Oe}=Le(),pe=m!=null?m:Oe,st=xe==="create",te=xe==="edit",le=xe==="clone",at=Uo({redirectFromProps:a,action:xe,redirectOptions:v.redirect}),gt=O!==void 0&&(te||le),Ee=vt({resource:_==null?void 0:_.name,id:O!=null?O:"",queryOptions:{enabled:gt,...g},liveMode:c,onLiveEvent:R,liveParams:x,meta:h(l,d),metaData:h(l,d),dataProviderName:T}),{isFetching:Ue}=Ee,Rt=It({mutationOptions:P}),{mutate:cr,isLoading:kt}=Rt,Tt=Mr({mutationOptions:D}),{mutate:Ae,isLoading:pr}=Tt,{setWarnWhen:Je}=Mt(),Xe=zo();return{...st||le?{formLoading:Ue||kt,mutationResult:Rt,onFinish:async ue=>{Je(!1);let we=Ke=>{Xe({redirect:at,resource:_,id:Ke,meta:d})};return pe!=="pessimistic"&&setTimeout(()=>{we()}),new Promise((Ke,xt)=>{if(pe!=="pessimistic"&&Ke(),!!_)return cr({values:ue,resource:_.name,successNotification:s,errorNotification:i,meta:h(l,d),metaData:h(l,d),dataProviderName:T,invalidates:u},{onSuccess:(Se,qe,et)=>{var Qt;o&&o(Se,ue,et);let tt=(Qt=Se==null?void 0:Se.data)==null?void 0:Qt.id;we(tt),Ke(Se)},onError:(Se,qe,et)=>{if(n)return n(Se,ue,et);xt()}})})}}:{formLoading:Ue||pr,mutationResult:Tt,onFinish:async ue=>{if(Je(!1),!_)return;let we={id:O!=null?O:"",values:ue,resource:_.name,mutationMode:pe,undoableTimeout:L,successNotification:s,errorNotification:i,meta:h(l,d),metaData:h(l,d),dataProviderName:T,invalidates:u},Ke=()=>{S(N),Xe({redirect:at,resource:_,id:O,meta:d})};return pe!=="pessimistic"&&setTimeout(()=>{Ke()}),new Promise((xt,Se)=>(pe!=="pessimistic"&&xt(),setTimeout(()=>{Ae(we,{onSuccess:(qe,et,tt)=>{o&&o(qe,ue,tt),pe==="pessimistic"&&Ke(),xt(qe)},onError:(qe,et,tt)=>{if(n)return n(qe,ue,tt);Se()}})})))}},queryResult:Ee,id:O,setId:S,redirect:(ue,we)=>{Xe({redirect:ue!==void 0?ue:te?"list":"edit",resource:_,id:we!=null?we:O,meta:d})}}};var As=require("react");var zo=()=>{let{show:e,edit:t,list:r,create:o}=re();return(0,As.useCallback)(({redirect:a,resource:s,id:i,meta:l={}})=>{if(a&&s)return!!s.show&&a==="show"&&i?e(s,i,void 0,l):!!s.edit&&a==="edit"&&i?t(s,i,void 0,l):!!s.create&&a==="create"?o(s,void 0,l):r(s,"push",l)},[])};var Gr=A(require("react")),oe=()=>{let e=(0,Gr.useContext)(ze);return Gr.default.useMemo(()=>{var o;return(o=e==null?void 0:e.go)!=null?o:()=>()=>{}},[e==null?void 0:e.go])()};var zr=A(require("react")),_r=()=>{let e=(0,zr.useContext)(ze);return zr.default.useMemo(()=>{var o;return(o=e==null?void 0:e.back)!=null?o:()=>()=>{}},[e==null?void 0:e.back])()};var re=()=>{let{resources:e}=Q(),t=K(),{useHistory:r}=G(),o=r(),n=j(),a=oe(),s=_r(),i=(f,y="push")=>{t==="legacy"?o[y](f):a({to:f,type:y})},l=(f,y={})=>{var C,b,I;if(t==="legacy"){let M=typeof f=="string"?(C=$(f,e,!0))!=null?C:{name:f,route:f}:f,E=ce(M,e,!0).find(w=>w.action==="create");return E?me(E.route,n,y):""}else{let M=typeof f=="string"?(b=$(f,e))!=null?b:{name:f}:f,E=(I=ce(M,e).find(w=>w.action==="create"))==null?void 0:I.route;return E?a({to:me(E,n,y),type:"path"}):""}},d=(f,y,C={})=>{var I,M,E;let b=encodeURIComponent(y);if(t==="legacy"){let w=typeof f=="string"?(I=$(f,e,!0))!=null?I:{name:f,route:f}:f,U=ce(w,e,!0).find(k=>k.action==="edit");return U?me(U.route,n,{...C,id:b}):""}else{let w=typeof f=="string"?(M=$(f,e))!=null?M:{name:f}:f,U=(E=ce(w,e).find(k=>k.action==="edit"))==null?void 0:E.route;return U?a({to:me(U,n,{...C,id:b}),type:"path"}):""}},m=(f,y,C={})=>{var I,M,E;let b=encodeURIComponent(y);if(t==="legacy"){let w=typeof f=="string"?(I=$(f,e,!0))!=null?I:{name:f,route:f}:f,U=ce(w,e,!0).find(k=>k.action==="clone");return U?me(U.route,n,{...C,id:b}):""}else{let w=typeof f=="string"?(M=$(f,e))!=null?M:{name:f}:f,U=(E=ce(w,e).find(k=>k.action==="clone"))==null?void 0:E.route;return U?a({to:me(U,n,{...C,id:b}),type:"path"}):""}},c=(f,y,C={})=>{var I,M,E;let b=encodeURIComponent(y);if(t==="legacy"){let w=typeof f=="string"?(I=$(f,e,!0))!=null?I:{name:f,route:f}:f,U=ce(w,e,!0).find(k=>k.action==="show");return U?me(U.route,n,{...C,id:b}):""}else{let w=typeof f=="string"?(M=$(f,e))!=null?M:{name:f}:f,U=(E=ce(w,e).find(k=>k.action==="show"))==null?void 0:E.route;return U?a({to:me(U,n,{...C,id:b}),type:"path"}):""}},R=(f,y={})=>{var C,b,I;if(t==="legacy"){let M=typeof f=="string"?(C=$(f,e,!0))!=null?C:{name:f,route:f}:f,E=ce(M,e,!0).find(w=>w.action==="list");return E?me(E.route,n,y):""}else{let M=typeof f=="string"?(b=$(f,e))!=null?b:{name:f}:f,E=(I=ce(M,e).find(w=>w.action==="list"))==null?void 0:I.route;return E?a({to:me(E,n,y),type:"path"}):""}};return{create:(f,y="push",C={})=>{i(l(f,C),y)},createUrl:l,edit:(f,y,C="push",b={})=>{i(d(f,y,b),C)},editUrl:d,clone:(f,y,C="push",b={})=>{i(m(f,y,b),C)},cloneUrl:m,show:(f,y,C="push",b={})=>{i(c(f,y,b),C)},showUrl:c,list:(f,y="push",C={})=>{i(R(f,C),y)},listUrl:R,push:(f,...y)=>{t==="legacy"?o.push(f,...y):a({to:f,type:"push"})},replace:(f,...y)=>{t==="legacy"?o.replace(f,...y):a({to:f,type:"replace"})},goBack:()=>{t==="legacy"?o.goBack():s()}}};var jr=A(require("react"));var Va=({resource:e,id:t,successNotification:r,errorNotification:o,meta:n,metaData:a,liveMode:s,onLiveEvent:i,dataProviderName:l,queryOptions:d}={})=>{let m=K(),{resources:c}=Q(),{useParams:R}=G(),{resource:x,id:L}=j(),{resource:T,id:u}=R(),g=x==null?void 0:x.name,P=!e||e===(m==="legacy"?T:g)?t!=null?t:m==="legacy"?u:L:t,[D,v]=(0,jr.useState)(P);jr.default.useEffect(()=>{P!==D&&v(P)},[P]);let f=e!=null?e:m==="legacy"?T:g,y,C=_e();if(m==="legacy")f&&(y=C(f));else if(e){let I=$(e,c);I?y=I:y={name:e,route:e}}else if(typeof x=="string"){let I=$(x,c);I?y=I:y={name:x,route:x}}else y=x;return{queryResult:vt({resource:y==null?void 0:y.name,id:D!=null?D:"",queryOptions:{enabled:D!==void 0,...d},successNotification:r,errorNotification:o,meta:h(n,a),metaData:h(n,a),liveMode:s,onLiveEvent:i,dataProviderName:l}),showId:D,setShowId:v}};var Ut=require("react"),ws=require("papaparse"),Ss=A(require("lodash/chunk"));var Na=({resourceName:e,resource:t,mapData:r=m=>m,paparseOptions:o,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:a,meta:s,metaData:i,onProgress:l,dataProviderName:d}={})=>{let[m,c]=(0,Ut.useState)(0),[R,x]=(0,Ut.useState)(0),[L,T]=(0,Ut.useState)(!1),{resource:u}=Q(t!=null?t:e),g=Ur(),P=It(),D;n===1?D=P:D=g;let v=()=>{x(0),c(0),T(!1)},f=C=>{let b={succeeded:C.filter(I=>I.type==="success"),errored:C.filter(I=>I.type==="error")};a==null||a(b),T(!1)};(0,Ut.useEffect)(()=>{l==null||l({totalAmount:R,processedAmount:m})},[R,m]);let y=({file:C})=>(v(),new Promise(b=>{T(!0),(0,ws.parse)(C,{complete:async({data:I})=>{let M=Ot(I,r);if(x(M.length),n===1){let E=M.map(U=>async()=>{var O;return{response:await P.mutateAsync({resource:(O=u==null?void 0:u.name)!=null?O:"",values:U,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:h(s,i),metaData:h(s,i)}),value:U}}),w=await hr(E,({response:U,value:k})=>(c(N=>N+1),{response:[U.data],type:"success",request:[k]}),(U,k)=>({response:[U],type:"error",request:[M[k]]}));b(w)}else{let E=(0,Ss.default)(M,n),w=E.map(k=>async()=>{var S;return{response:await g.mutateAsync({resource:(S=u==null?void 0:u.name)!=null?S:"",values:k,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:h(s,i),metaData:h(s,i)}),value:k,currentBatchLength:k.length}}),U=await hr(w,({response:k,currentBatchLength:N,value:O})=>(c(S=>S+N),{response:k.data,type:"success",request:O}),(k,N)=>({response:[k],type:"error",request:E[N]}));b(U)}},...o})}).then(b=>(f(b),b)));return{inputProps:{type:"file",accept:".csv",onChange:C=>{C.target.files&&C.target.files.length>0&&y({file:C.target.files[0]})}},mutationResult:D,isLoading:L,handleChange:y}};var rr=require("react"),Fa=({defaultVisible:e=!1}={})=>{let[t,r]=(0,rr.useState)(e),o=(0,rr.useCallback)(()=>r(!0),[t]),n=(0,rr.useCallback)(()=>r(!1),[t]);return{visible:t,show:o,close:n}};var ks=A(require("react"));var At=()=>{let e=K(),{resource:t,resources:r}=Q(),o=j();return ks.default.useCallback(({resource:a,action:s,meta:i})=>{var R;let l=a||t;if(!l)return;let m=(R=ce(l,r,e==="legacy").find(x=>x.action===s))==null?void 0:R.route;return m?me(m,o,i):void 0},[r,t,o])};var Qs=({resource:e,action:t,meta:r,legacy:o})=>At()({resource:e,action:t,meta:r,legacy:o});var Yr=A(require("react")),rt=()=>{let e=(0,Yr.useContext)(ze);return e!=null&&e.Link?e.Link:({to:r,...o})=>Yr.default.createElement("a",{href:r,...o})};var Vs=require("react");var _o=A(require("react")),je={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Oa=_o.default.createContext(je),or=Oa,Bs=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s})=>_o.default.createElement(or.Provider,{value:{useHistory:t!=null?t:je.useHistory,useLocation:r!=null?r:je.useLocation,useParams:o!=null?o:je.useParams,Prompt:n!=null?n:je.Prompt,Link:a!=null?a:je.Link,routes:s!=null?s:je.routes}},e);var G=()=>{let e=(0,Vs.useContext)(or),{useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s}=e!=null?e:je;return{useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s}};var Os=require("@tanstack/react-query"),Ks=require("react");var jo=A(require("react"));var lt=jo.default.createContext({}),Ns=({can:e,children:t})=>jo.default.createElement(lt.Provider,{value:{can:e}},t);var Fs=e=>{let{icon:t,list:r,edit:o,create:n,show:a,clone:s,children:i,meta:l,options:d,...m}=e,{icon:c,...R}=l!=null?l:{},{icon:x,...L}=d!=null?d:{};return{...m,...l?{meta:R}:{},...d?{options:L}:{}}};var Yo=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:n}=(0,Ks.useContext)(lt),{resource:a,...s}=r!=null?r:{},i=Fs(a!=null?a:{}),l=(0,Os.useQuery)(["useCan",{action:e,resource:t,params:{...s,resource:i},enabled:o==null?void 0:o.enabled}],()=>{var d;return(d=n==null?void 0:n({action:e,resource:t,params:s}))!=null?d:Promise.resolve({can:!0})},{enabled:typeof n<"u",...o,retry:!1});return typeof n>"u"?{data:{can:!0}}:l};var Hs=require("react");var Ka=()=>{let{can:e}=(0,Hs.useContext)(lt);return{can:e}};var Ye=require("react"),Ws=A(require("lodash/uniqBy")),$s=A(require("lodash/debounce")),nr=A(require("lodash/get"));var Ha=e=>{var Oe,pe,st;let[t,r]=(0,Ye.useState)([]),[o,n]=(0,Ye.useState)([]),[a,s]=(0,Ye.useState)([]),{resource:i,sort:l,sorters:d,filters:m=[],optionLabel:c="title",optionValue:R="id",debounce:x=300,successNotification:L,errorNotification:T,defaultValueQueryOptions:u,queryOptions:g,fetchSize:P,pagination:D,hasPagination:v=!1,liveMode:f,defaultValue:y=[],onLiveEvent:C,onSearch:b,liveParams:I,meta:M,metaData:E,dataProviderName:w}=e,{resources:U}=Q(),k=$(i,U),N=(Oe=k==null?void 0:k.name)!=null?Oe:i,O=Array.isArray(y)?y:[y],S=(0,Ye.useCallback)(te=>{s(te.data.map(le=>({label:(0,nr.default)(le,c),value:(0,nr.default)(le,R)})))},[c,R]),F=u!=null?u:g,H=vr({resource:N,ids:O,queryOptions:{...F,enabled:O.length>0&&((pe=u==null?void 0:u.enabled)!=null?pe:!0),onSuccess:te=>{var le;S(te),(le=F==null?void 0:F.onSuccess)==null||le.call(F,te)}},meta:h(M,E),metaData:h(M,E),liveMode:"off",dataProviderName:w}),xe=(0,Ye.useCallback)(te=>{n(te.data.map(le=>({label:(0,nr.default)(le,c),value:(0,nr.default)(le,R)})))},[c,R]),Me=ht({resource:N,sorters:h(d,l),filters:m.concat(t),pagination:{current:D==null?void 0:D.current,pageSize:(st=D==null?void 0:D.pageSize)!=null?st:P,mode:D==null?void 0:D.mode},hasPagination:v,queryOptions:{...g,onSuccess:te=>{var le;xe(te),(le=g==null?void 0:g.onSuccess)==null||le.call(g,te)}},successNotification:L,errorNotification:T,meta:h(M,E),metaData:h(M,E),liveMode:f,liveParams:I,onLiveEvent:C,dataProviderName:w}),_=te=>{if(b){r(b(te));return}if(te)r([{field:c,operator:"contains",value:te}]);else{r([]);return}};return{queryResult:Me,defaultValueQueryResult:H,options:(0,Ye.useMemo)(()=>(0,Ws.default)([...o,...a],"value"),[o,a]),onSearch:(0,$s.default)(_,x)}};var Ne=A(require("react")),Jo=A(require("qs")),sr=A(require("lodash/differenceWith")),ar=A(require("lodash/isEqual"));var _s=A(require("warn-once")),Gs=[],zs=[];function Wa({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:o,initialSorter:n,permanentSorter:a=zs,defaultSetFilterBehavior:s,initialFilter:i,permanentFilter:l=Gs,filters:d,sorters:m,syncWithLocation:c,resource:R,successNotification:x,errorNotification:L,queryOptions:T,liveMode:u,onLiveEvent:g,liveParams:P,meta:D,metaData:v,dataProviderName:f}={}){var tt,Qt,tn,rn,on,nn,sn,an,un,cn;let{syncWithLocation:y}=$r(),C=c!=null?c:y,b=Fo(u),I=K(),{useLocation:M}=G(),{search:E,pathname:w}=M(),U=j(),k=r===!1?"off":"server",N=((tt=o==null?void 0:o.mode)!=null?tt:k)!=="off",O=h(o==null?void 0:o.current,e),S=h(o==null?void 0:o.pageSize,t),F=h(D,v),{parsedCurrent:H,parsedPageSize:xe,parsedSorter:Me,parsedFilters:_}=Kt(E!=null?E:"?"),Oe=h(d==null?void 0:d.initial,i),pe=(Qt=h(d==null?void 0:d.permanent,l))!=null?Qt:Gs,st=h(m==null?void 0:m.initial,n),te=(tn=h(m==null?void 0:m.permanent,a))!=null?tn:zs,le=(rn=h(d==null?void 0:d.defaultBehavior,s))!=null?rn:"merge",at,gt,Ee,Ue;C?(at=((on=U==null?void 0:U.params)==null?void 0:on.current)||H||O||1,gt=((nn=U==null?void 0:U.params)==null?void 0:nn.pageSize)||xe||S||10,Ee=((sn=U==null?void 0:U.params)==null?void 0:sn.sorters)||(Me.length?Me:st),Ue=((an=U==null?void 0:U.params)==null?void 0:an.filters)||(_.length?_:Oe)):(at=O||1,gt=S||10,Ee=st,Ue=Oe);let{replace:Rt}=re(),cr=oe(),{resource:kt}=Q(R),Tt=kt==null?void 0:kt.name;Ne.default.useEffect(()=>{(0,_s.default)(typeof Tt>"u","useTable: `resource` is not defined.")},[Tt]);let[Ae,pr]=(0,Ne.useState)(Gt(te,Ee!=null?Ee:[])),[Je,Xe]=(0,Ne.useState)($t(pe,Ue!=null?Ue:[])),[Pt,eo]=(0,Ne.useState)(at),[Ze,to]=(0,Ne.useState)(gt),en=({pagination:{current:ae,pageSize:De},sorter:dr,filters:lr})=>{var mr;if(I==="new")return(mr=cr({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...N?{current:ae,pageSize:De}:{},sorters:dr,filters:lr,...ue()}}))!=null?mr:"";{let Bt=Jo.default.parse(E==null?void 0:E.substring(1)),ro=Ht({pagination:{pageSize:De,current:ae},sorters:Ae!=null?Ae:dr,filters:lr,...Bt});return`${w!=null?w:""}?${ro!=null?ro:""}`}};(0,Ne.useEffect)(()=>{E===""&&(eo(at),to(gt),pr(Gt(te,Ee!=null?Ee:[])),Xe($t(pe,Ue!=null?Ue:[])))},[E]);let ue=()=>{var ae;if(I==="new"){let{sorters:De,filters:dr,pageSize:lr,current:mr,...Bt}=(ae=U==null?void 0:U.params)!=null?ae:{};return Bt}else{let{sorter:De,filters:dr,pageSize:lr,current:mr,...Bt}=Jo.default.parse(E,{ignoreQueryPrefix:!0});return Bt}};(0,Ne.useEffect)(()=>{if(C){let ae=ue();if(I==="new")cr({type:"replace",options:{keepQuery:!0},query:{...N?{pageSize:Ze,current:Pt}:{},sorters:(0,sr.default)(Ae,te,ar.default),filters:(0,sr.default)(Je,pe,ar.default)}});else{let De=Ht({...N?{pagination:{pageSize:Ze,current:Pt}}:{},sorters:(0,sr.default)(Ae,te,ar.default),filters:(0,sr.default)(Je,pe,ar.default),...ae});return Rt==null?void 0:Rt(`${w}?${De}`,void 0,{shallow:!0})}}},[C,Pt,Ze,Ae,Je]);let we=ht({resource:Tt,hasPagination:r,pagination:{current:Pt,pageSize:Ze,mode:o==null?void 0:o.mode},filters:ut(pe,Je),sorters:Wt(te,Ae),queryOptions:T,successNotification:x,errorNotification:L,meta:F,metaData:F,liveMode:b,liveParams:P,onLiveEvent:g,dataProviderName:f}),Ke=ae=>{Xe(De=>ut(pe,ae,De))},xt=ae=>{Xe(ut(pe,ae))},Se=ae=>{Xe(De=>ut(pe,ae(De)))},qe=(ae,De=le)=>{typeof ae=="function"?Se(ae):De==="replace"?xt(ae):Ke(ae)},et=ae=>{pr(()=>Wt(te,ae))};return{tableQueryResult:we,sorters:Ae,setSorters:et,sorter:Ae,setSorter:et,filters:Je,setFilters:qe,current:Pt,setCurrent:eo,pageSize:Ze,setPageSize:to,pageCount:Ze?Math.ceil(((cn=(un=we.data)==null?void 0:un.total)!=null?cn:0)/Ze):1,createLinkForSyncWithLocation:en}}var Zo=require("react"),ir=require("@tanstack/react-query");var Xo=A(require("react")),mt=Xo.default.createContext({}),js=({create:e,get:t,update:r,children:o})=>Xo.default.createElement(mt.Provider,{value:{create:e,get:t,update:r}},o);var he=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,ir.useQueryClient)(),o=(0,Zo.useContext)(mt),n=W(),{resources:a}=(0,Zo.useContext)(Ge),{data:s,refetch:i,isLoading:l}=yr({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy),queryOptions:{enabled:!!o}}),d=(0,ir.useMutation)(async c=>{var T,u,g,P,D;let R=$(c.resource,a),x=h((T=R==null?void 0:R.meta)==null?void 0:T.audit,(u=R==null?void 0:R.options)==null?void 0:u.audit,(P=(g=R==null?void 0:R.options)==null?void 0:g.auditLog)==null?void 0:P.permissions);if(x&&!bo(x,c.action))return;let L;return l&&(L=await i()),await((D=o.create)==null?void 0:D.call(o,{...c,author:s!=null?s:L==null?void 0:L.data}))},e),m=(0,ir.useMutation)(async c=>{var R;return await((R=o.update)==null?void 0:R.call(o,c))},{onSuccess:c=>{if(c!=null&&c.resource){let R=X(c==null?void 0:c.resource);r.invalidateQueries(R.logList())}},...t});return{log:d,rename:m}};var Ys=require("react"),Js=require("@tanstack/react-query");var $a=({resource:e,action:t,meta:r,author:o,metaData:n,queryOptions:a})=>{let{get:s}=(0,Ys.useContext)(mt),i=X(e,void 0,n);return(0,Js.useQuery)(i.logList(r),()=>{var d;return(d=s==null?void 0:s({resource:e,action:t,author:o,meta:r,metaData:n}))!=null?d:Promise.resolve([])},{enabled:typeof s<"u",...a,retry:!1})};var Xs=require("react"),Zs=require("@tanstack/react-query");var ve=()=>{let{resources:e}=Q(),t=(0,Zs.useQueryClient)();return(0,Xs.useCallback)(({resource:o,dataProviderName:n,invalidates:a,id:s})=>{if(a===!1)return;let i=X(o,B(o,n,e));a.forEach(l=>{switch(l){case"all":t.invalidateQueries(i.all);break;case"list":t.invalidateQueries(i.list());break;case"many":t.invalidateQueries(i.many());break;case"resourceAll":t.invalidateQueries(i.resourceAll);break;case"detail":t.invalidateQueries(i.detail(s||""));break;default:break}})},[])};var qs=require("react"),ea=A(require("warn-once"));var Ga=({meta:e={}}={})=>{let t=K(),{i18nProvider:r}=(0,qs.useContext)(Qe),o=j(),n=V(),{resources:a,resource:s,action:i}=Q(),l=[];if(!(s!=null&&s.name))return{breadcrumbs:l};let d=m=>{var R,x,L,T,u,g,P,D;let c=typeof m=="string"?(R=$(m,a,t==="legacy"))!=null?R:{name:m}:m;if(c){let v=h((x=c==null?void 0:c.meta)==null?void 0:x.parent,c==null?void 0:c.parentName);v&&d(v);let f=ce(c,a,t==="legacy").find(b=>b.action==="list"),y=(L=f==null?void 0:f.resource)!=null&&L.list?f==null?void 0:f.route:void 0,C=y?t==="legacy"?y:me(y,o,e):void 0;l.push({label:(g=h((T=c.meta)==null?void 0:T.label,(u=c.options)==null?void 0:u.label))!=null?g:n(`${c.name}.${c.name}`,pt(c.name)),href:C,icon:h((P=c.meta)==null?void 0:P.icon,(D=c.options)==null?void 0:D.icon,c.icon)})}};if(d(s),i&&i!=="list"){let m=`actions.${i}`,c=n(m);typeof r<"u"&&c===m?((0,ea.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${i}" action. Please add "actions.${i}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),l.push({label:n(`buttons.${i}`,pt(i))})):l.push({label:n(m,pt(i))})}return{breadcrumbs:l}};var Jr=A(require("react"));var wt=(e,t,r=!1)=>{let o=[],n=Ce(e,t);for(;n;)o.push(n),n=Ce(n,t);return o.reverse(),`/${[...o,e].map(s=>{var i,l;return de((l=(i=r?s.route:void 0)!=null?i:s.identifier)!=null?l:s.name)}).join("/").replace(/^\//,"")}`};var ta=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{var d,m;let a=[],s=Ce(n,e);for(;s;)a.push(s),s=Ce(s,e);a.reverse();let i=r;a.forEach(c=>{var x,L;let R=(L=(x=t?c.route:void 0)!=null?x:c.identifier)!=null?L:c.name;i.children[R]||(i.children[R]={item:c,children:{}}),i=i.children[R]});let l=(m=(d=t?n.route:void 0)!=null?d:n.identifier)!=null?m:n.name;i.children[l]||(i.children[l]={item:n,children:{}})});let o=n=>{let a=[];return Object.keys(n.children).forEach(s=>{let i=wt(n.children[s].item,e,t),l={...n.children[s].item,key:i,children:o(n.children[s])};a.push(l)}),a};return o(r)};var ra=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),oa=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=V(),o=At(),n=K(),{resource:a,resources:s}=Q(),{pathname:i}=j(),{useLocation:l}=G(),{pathname:d}=l(),m=n==="legacy"?ra(d):i?ra(i):void 0,c=`/${(m!=null?m:"").replace(/^\//,"")}`,R=a?wt(a,s,n==="legacy"):c!=null?c:"",x=Jr.default.useMemo(()=>{if(!a)return[];let u=Ce(a,s),g=[wt(a,s)];for(;u;)g.push(wt(u,s)),u=Ce(u,s);return g},[]),L=Jr.default.useCallback(u=>{var P,D,v,f,y,C,b,I;if(((v=(P=u==null?void 0:u.meta)==null?void 0:P.hide)!=null?v:(D=u==null?void 0:u.options)==null?void 0:D.hide)||!(u!=null&&u.list)&&u.children.length===0)return;let g=u.list?o({resource:u,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&g&&g.match(/(\/|^):(.+?)(\/|$){1}/)))return{...u,route:g,icon:h((f=u.meta)==null?void 0:f.icon,(y=u.options)==null?void 0:y.icon,u.icon),label:(I=h((C=u==null?void 0:u.meta)==null?void 0:C.label,(b=u==null?void 0:u.options)==null?void 0:b.label))!=null?I:r(`${u.name}.${u.name}`,ct(u.name,"plural"))}},[n,e,r,t]),T=Jr.default.useMemo(()=>{let u=ta(s,n==="legacy"),g=P=>P.flatMap(D=>{let v=g(D.children),f=L({...D,children:v});return f?[f]:[]});return g(u)},[s,n,L]);return{defaultOpenKeys:x,selectedKey:R,menuItems:T}};var na=()=>{let[e,t]=(0,Fe.useState)(),r=V(),{push:o}=re(),n=oe(),a=K(),{resource:s,action:i}=Q();return(0,Fe.useEffect)(()=>{s&&i&&t(r("pages.error.info",{action:i,resource:s==null?void 0:s.name},`You may have forgotten to add the "${i}" component to "${s==null?void 0:s.name}" resource.`))},[s,i]),Fe.default.createElement(Fe.default.Fragment,null,Fe.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Fe.default.createElement("p",null,e),Fe.default.createElement("button",{onClick:()=>{a==="legacy"?o("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))};var ie=A(require("react"));var br=()=>{let[e,t]=(0,ie.useState)(""),[r,o]=(0,ie.useState)(""),n=V(),a=W(),{mutate:s}=bt({v3LegacyAuthProviderCompatible:Boolean(a==null?void 0:a.isLegacy)});return ie.default.createElement(ie.default.Fragment,null,ie.default.createElement("h1",null,n("pages.login.title","Sign in your account")),ie.default.createElement("form",{onSubmit:i=>{i.preventDefault(),s({username:e,password:r})}},ie.default.createElement("table",null,ie.default.createElement("tbody",null,ie.default.createElement("tr",null,ie.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),ie.default.createElement("td",null,ie.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:i=>t(i.target.value)}))),ie.default.createElement("tr",null,ie.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),ie.default.createElement("td",null,ie.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:i=>o(i.target.value)}))))),ie.default.createElement("br",null),ie.default.createElement("input",{type:"submit",value:"login"})))};var ft=A(require("react"));var Y=A(require("react"));var sa=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:n,wrapperProps:a,renderContent:s,formProps:i})=>{let l=K(),d=rt(),{Link:m}=G(),c=l==="legacy"?m:d,[R,x]=(0,Y.useState)(""),[L,T]=(0,Y.useState)(""),[u,g]=(0,Y.useState)(!1),P=V(),D=W(),{mutate:v}=bt({v3LegacyAuthProviderCompatible:Boolean(D==null?void 0:D.isLegacy)}),f=(b,I)=>b?typeof b=="string"?Y.default.createElement(c,{to:b},I):b:null,y=()=>e?e.map(b=>{var I;return Y.default.createElement("div",{key:b.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},Y.default.createElement("button",{onClick:()=>v({providerName:b.name}),style:{display:"flex",alignItems:"center"}},b==null?void 0:b.icon,(I=b.label)!=null?I:Y.default.createElement("label",null,b.label)))}):null,C=Y.default.createElement("div",{...n},Y.default.createElement("h1",{style:{textAlign:"center"}},P("pages.login.title","Sign in to your account")),y(),Y.default.createElement("hr",null),Y.default.createElement("form",{onSubmit:b=>{b.preventDefault(),v({email:R,password:L,remember:u})},...i},Y.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Y.default.createElement("label",null,P("pages.login.fields.email","Email")),Y.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:R,onChange:b=>x(b.target.value)}),Y.default.createElement("label",null,P("pages.login.fields.password","Password")),Y.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:L,onChange:b=>T(b.target.value)}),o!=null?o:Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("label",null,P("pages.login.buttons.rememberMe","Remember me"),Y.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:u,value:u.toString(),onChange:()=>{g(!u)}}))),Y.default.createElement("br",null),r!=null?r:f("/forgot-password",P("pages.login.buttons.forgotPassword","Forgot password?")),Y.default.createElement("input",{type:"submit",value:P("pages.login.signin","Sign in")}),t!=null?t:Y.default.createElement("span",null,P("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",f("/register",P("pages.login.register","Sign up"))))));return Y.default.createElement("div",{...a},s?s(C):C)};var se=A(require("react"));var aa=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:n,formProps:a})=>{let s=K(),i=rt(),{Link:l}=G(),d=s==="legacy"?l:i,[m,c]=(0,se.useState)(""),[R,x]=(0,se.useState)(""),L=V(),T=W(),{mutate:u,isLoading:g}=gr({v3LegacyAuthProviderCompatible:Boolean(T==null?void 0:T.isLegacy)}),P=(f,y)=>f?typeof f=="string"?se.default.createElement(d,{to:f},y):f:null,D=()=>e?e.map(f=>{var y;return se.default.createElement("div",{key:f.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},se.default.createElement("button",{onClick:()=>u({providerName:f.name}),style:{display:"flex",alignItems:"center"}},f==null?void 0:f.icon,(y=f.label)!=null?y:se.default.createElement("label",null,f.label)))}):null,v=se.default.createElement("div",{...o},se.default.createElement("h1",{style:{textAlign:"center"}},L("pages.register.title","Sign up for your account")),D(),se.default.createElement("hr",null),se.default.createElement("form",{onSubmit:f=>{f.preventDefault(),u({email:m,password:R})},...a},se.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},se.default.createElement("label",null,L("pages.register.fields.email","Email")),se.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:f=>c(f.target.value)}),se.default.createElement("label",null,L("pages.register.fields.password","Password")),se.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:R,onChange:f=>x(f.target.value)}),se.default.createElement("input",{type:"submit",value:L("pages.register.buttons.submit","Sign up"),disabled:g}),t!=null?t:se.default.createElement(se.default.Fragment,null,se.default.createElement("span",null,L("pages.login.buttons.haveAccount","Have an account?")," ",P("/login",L("pages.login.signin","Sign in")))))));return se.default.createElement("div",{...r},n?n(v):v)};var ge=A(require("react"));var ia=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:n})=>{let a=V(),s=K(),i=rt(),{Link:l}=G(),d=s==="legacy"?l:i,[m,c]=(0,ge.useState)(""),{mutate:R,isLoading:x}=Rr(),L=(u,g)=>u?typeof u=="string"?ge.default.createElement(d,{to:u},g):u:null,T=ge.default.createElement("div",{...r},ge.default.createElement("h1",{style:{textAlign:"center"}},a("pages.forgotPassword.title","Forgot your password?")),ge.default.createElement("hr",null),ge.default.createElement("form",{onSubmit:u=>{u.preventDefault(),R({email:m})},...n},ge.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ge.default.createElement("label",null,a("pages.forgotPassword.fields.email","Email")),ge.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:u=>c(u.target.value)}),ge.default.createElement("input",{type:"submit",disabled:x,value:a("pages.forgotPassword.buttons.submit","Send reset instructions")}),ge.default.createElement("br",null),e!=null?e:ge.default.createElement("span",null,a("pages.register.buttons.haveAccount","Have an account? ")," ",L("/login",a("pages.login.signin","Sign in"))))));return ge.default.createElement("div",{...t},o?o(T):T)};var Re=A(require("react"));var ua=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o})=>{let n=V(),a=W(),{mutate:s,isLoading:i}=Tr({v3LegacyAuthProviderCompatible:Boolean(a==null?void 0:a.isLegacy)}),[l,d]=(0,Re.useState)(""),[m,c]=(0,Re.useState)(""),R=Re.default.createElement("div",{...t},Re.default.createElement("h1",{style:{textAlign:"center"}},n("pages.updatePassword.title","Update Password")),Re.default.createElement("hr",null),Re.default.createElement("form",{onSubmit:x=>{x.preventDefault(),s({password:l,confirmPassword:m})},...o},Re.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Re.default.createElement("label",null,n("pages.updatePassword.fields.password","New Password")),Re.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:l,onChange:x=>d(x.target.value)}),Re.default.createElement("label",null,n("pages.updatePassword.fields.confirmPassword","Confirm New Password")),Re.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:m,onChange:x=>c(x.target.value)}),Re.default.createElement("input",{type:"submit",disabled:i,value:n("pages.updatePassword.buttons.submit","Update")}))));return Re.default.createElement("div",{...e},r?r(R):R)};var ca=e=>{let{type:t}=e;return ft.default.createElement(ft.default.Fragment,null,(()=>{switch(t){case"register":return ft.default.createElement(aa,{...e});case"forgotPassword":return ft.default.createElement(ia,{...e});case"updatePassword":return ft.default.createElement(ua,{...e});default:return ft.default.createElement(sa,{...e})}})())};var Te=A(require("react")),Xr=()=>Te.default.createElement(Te.default.Fragment,null,Te.default.createElement("h1",null,"Welcome on board"),Te.default.createElement("p",null,"Your configuration is completed."),Te.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",Te.default.createElement("code",null,"`resources`")," property of ",Te.default.createElement("code",null,"`<Refine>`")),Te.default.createElement("div",{style:{display:"flex",gap:8}},Te.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},Te.default.createElement("button",null,"Documentation")),Te.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},Te.default.createElement("button",null,"Examples")),Te.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},Te.default.createElement("button",null,"Community"))));var Ie=A(require("react")),pa=()=>Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement("h1",null,"Welcome on board"),Ie.default.createElement("p",null,"Your configuration is completed."),Ie.default.createElement("div",{style:{display:"flex",gap:8}},Ie.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},Ie.default.createElement("button",null,"Documentation")),Ie.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},Ie.default.createElement("button",null,"Examples")),Ie.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},Ie.default.createElement("button",null,"Community"))));var q=A(require("react")),ur=require("@tanstack/react-query"),ga=require("@tanstack/react-query-devtools");var la=require("react");var ot=require("react");var za="4.3.0",da=()=>{let e=Pr(),t=(0,ot.useContext)(mt),r=(0,ot.useContext)($e),o=(0,ot.useContext)(or),n=(0,ot.useContext)(Zt),{i18nProvider:a}=(0,ot.useContext)(Qe),s=(0,ot.useContext)(er),i=(0,ot.useContext)(lt),{resources:l}=Q(),d=!!t.create||!!t.get||!!t.update,m=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),c=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,R=!!n,x=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),L=!!s.close||!!s.open,T=!!i.can;return{providers:{auth:e,auditLog:d,live:m,router:c,data:R,i18n:x,notification:L,accessControl:T},version:za,resourceCount:l.length}};var _a=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},ma=()=>{let e=da();return(0,la.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${_a(e)}`},[]),null};var fa=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(n=>!t.includes(n));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1};var qo=A(require("react")),ya=e=>{let t=qo.default.useRef(!1);qo.default.useEffect(()=>{t.current===!1&&e&&fa(e)&&(t.current=!0)},[e])};var Ra=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:o,routerProvider:n,notificationProvider:a,accessControlProvider:s,auditLogProvider:i,resources:l,DashboardPage:d,ReadyPage:m,LoginPage:c,catchAll:R,children:x,liveProvider:L,i18nProvider:T,Title:u,Layout:g,Sider:P,Header:D,Footer:v,OffLayoutArea:f,onLiveEvent:y,options:C})=>{let{optionsWithDefaults:b,disableTelemetryWithDefault:I,reactQueryWithDefaults:M}=Eo({options:C}),E=Qr(()=>{var N;return M.clientConfig instanceof ur.QueryClient?M.clientConfig:new ur.QueryClient({...M.clientConfig,defaultOptions:{...M.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(N=M.clientConfig.defaultOptions)==null?void 0:N.queries}}})},[M.clientConfig]),U=q.default.useMemo(()=>typeof a=="function"?a:()=>a!=null?a:{},[a])();if(ya(n),o&&!n&&(l!=null?l:[]).length===0)return m?q.default.createElement(m,null):q.default.createElement(Xr,null);let{RouterComponent:k=q.default.Fragment}=n?{}:o!=null?o:{};return q.default.createElement(ur.QueryClientProvider,{client:E},q.default.createElement(Rs,{...U},q.default.createElement(ln,{...e!=null?e:{},isProvided:Boolean(e)},q.default.createElement(fn,{...t!=null?t:{},isProvided:Boolean(t)},q.default.createElement(Zn,{...r},q.default.createElement(ts,{liveProvider:L},q.default.createElement(ds,{value:o&&!n?"legacy":"new"},q.default.createElement(ms,{router:n},q.default.createElement(Bs,{...o},q.default.createElement(cs,{resources:l!=null?l:[]},q.default.createElement(xs,{i18nProvider:T},q.default.createElement(Ns,{...s!=null?s:{}},q.default.createElement(js,{...i!=null?i:{}},q.default.createElement(Ao,null,q.default.createElement(kn,{mutationMode:b.mutationMode,warnWhenUnsavedChanges:b.warnWhenUnsavedChanges,syncWithLocation:b.syncWithLocation,Title:u,undoableTimeout:b.undoableTimeout,catchAll:R,DashboardPage:d,LoginPage:c,Layout:g,Sider:P,Footer:v,Header:D,OffLayoutArea:f,hasDashboard:!!d,liveMode:b.liveMode,onLiveEvent:y,options:b},q.default.createElement(vs,null,q.default.createElement(k,null,x,!I&&q.default.createElement(ma,null),q.default.createElement(Zr,null))))))))))))))))),M.devtoolConfig===!1?null:q.default.createElement(ga.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...M.devtoolConfig}))};var qr=require("react");var wo=({notification:e})=>{let t=V(),{notificationDispatch:r}=ke(),{open:o}=fe(),[n,a]=(0,qr.useState)(),s=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Ft(e.seconds)},`You have ${Ft(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Ft(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let i=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(i)}};return(0,qr.useEffect)(()=>{s()},[e]),null};var St=A(require("react"));var Ta=({children:e,Layout:t,Sider:r,Header:o,Title:n,Footer:a,OffLayoutArea:s})=>{let{Layout:i,Footer:l,Header:d,Sider:m,Title:c,OffLayoutArea:R}=Et(),x=t!=null?t:i;return St.default.createElement(x,{Sider:r!=null?r:m,Header:o!=null?o:d,Footer:a!=null?a:l,Title:n!=null?n:c,OffLayoutArea:s!=null?s:R},e,St.default.createElement(ja,null))},ja=()=>{let{Prompt:e}=G(),t=V(),{warnWhen:r,setWarnWhen:o}=Mt(),n=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return(0,St.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),St.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};var Pe=A(require("react"));var Ya=()=>{let e=oe(),[t,r]=Pe.default.useState(void 0);return Pe.default.useEffect(()=>{t&&e(t)},[t]),Pe.default.useCallback(n=>{t||r(n)},[t])};function Pa({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:o,loading:n}){var b;let a=W(),s=K(),i=Boolean(a==null?void 0:a.isProvided),l=Boolean(a==null?void 0:a.isLegacy),d=s==="legacy",m=j(),c=oe(),R=Ya(),{replace:x}=re(),{useLocation:L}=G(),T=L(),{isLoading:u,isFetching:g,isSuccess:P,data:{authenticated:D,redirectTo:v}={},refetch:f}=Nt({v3LegacyAuthProviderCompatible:l});Pe.default.useEffect(()=>{f()},[r,o]);let y=Pe.default.useRef({status:u?"initial":"pending",content:n!=null?n:null});g?y.current.status="pending":g||(y.current.status="settled");let C=i?l?P:D:!0;if(y.current.status==="settled")if(C)y.current.content=Pe.default.createElement(Pe.default.Fragment,null,r!=null?r:null);else if(typeof o<"u")y.current.content=Pe.default.createElement(Pe.default.Fragment,null,o);else{let I=`${d?T==null?void 0:T.pathname:m.pathname}`.replace(/(\?.*|#.*)$/,""),M=l?typeof e=="string"?e:"/login":typeof e=="string"?e:v;if(M)if(d){let E=t?`?to=${encodeURIComponent(I)}`:"";x(`${M}${E}`)}else R({to:M,query:t?{to:(b=m.params)!=null&&b.to?m.params.to:c({to:I,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return i?Pe.default.createElement(Pe.default.Fragment,null,y.current.content):Pe.default.createElement(Pe.default.Fragment,null,r!=null?r:null)}var xa=require("react");var Zr=()=>{let{useLocation:e}=G(),{checkAuth:t}=ee(),r=e();return(0,xa.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};var yt=A(require("react"));var Ca=({resource:e,action:t,params:r,fallback:o,children:n,...a})=>{var f,y;let s=K(),{resources:i}=Q(),{useParams:l}=G(),{resource:d,id:m,action:c}=j(),{resource:R,id:x,action:L}=l(),T=d==null?void 0:d.name,u=!e||e===(s==="legacy"?R:T)?(f=r==null?void 0:r.id)!=null?f:s==="legacy"?x:m:r==null?void 0:r.id,g=e!=null?e:s==="legacy"?R:T,P,D=_e();if(s==="legacy")g&&(P=D(g));else if(e){let C=$(e,i);C?P=C:P={name:e,route:e}}else if(typeof d=="string"){let C=$(d,i);C?P=C:P={name:d,route:d}}else P=d;let{data:v}=Yo({resource:e!=null?e:P==null?void 0:P.name,action:(y=t!=null?t:s==="legacy"?L:c)!=null?y:"",params:r!=null?r:{id:u,resource:P}});return v!=null&&v.can?yt.default.isValidElement(n)?yt.default.cloneElement(n,a):yt.default.createElement(yt.default.Fragment,null,n):(v==null?void 0:v.can)===!1?yt.default.createElement(yt.default.Fragment,null,o!=null?o:null):null};var nt=A(require("react"));var ba=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var ha=()=>((0,nt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),ba.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),nt.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},nt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},nt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},nt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),nt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));
//# sourceMappingURL=index.js.map