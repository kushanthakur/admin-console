import l from"react";import{matchResourceFromRoute as k,ResourceContext as U}from"@refinedev/core";import{useCallback as g,useContext as L}from"react";import{parse as R,stringify as A}from"qs";import{useNavigate as y,useLocation as C,useParams as E,Link as S}from"react-router-dom";var m=e=>{if(typeof e>"u")return e;let t=Number(e);return`${t}`===e?t:e};var P={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},F={go:()=>{let{search:e,hash:t}=C(),r=y();return g(({to:n,type:o,query:s,hash:u,options:{keepQuery:a,keepHash:p}={}})=>{let c={...a&&e&&R(e,{ignoreQueryPrefix:!0}),...s};c.to&&(c.to=encodeURIComponent(`${c.to}`));let $=Object.keys(c).length>0,d=`#${(u||p&&t||"").replace(/^#/,"")}`,T=d.length>1,h=`${n||""}${$?A(c,P):""}${T?d:""}`;return o==="path"?h:r(h,{replace:o==="replace"})},[t,e,r])},back:()=>{let e=y();return g(()=>{e(-1)},[e])},parse:()=>{let e=E(),{pathname:t,search:r}=C(),{resources:i}=L(U),{resource:n,action:o}=l.useMemo(()=>k(t,i),[i,t]);return g(()=>{let u=R(r,{ignoreQueryPrefix:!0}),a={...e,...u};return{...n&&{resource:n},...o&&{action:o},...(e==null?void 0:e.id)&&{id:decodeURIComponent(e.id)},pathname:t,params:{...a,current:m(a.current),pageSize:m(a.pageSize),to:a.to?decodeURIComponent(a.to):void 0}}},[t,r,e,n,o])},Link:l.forwardRef(function(t,r){return l.createElement(S,{...t,ref:r})})};import N from"react";import{useResource as I}from"@refinedev/core";import v from"react";import{Route as j}from"react-router-dom";var B=(e,t)=>{let{name:r,list:i,create:n,show:o,edit:s}=e;if(typeof i=="string"&&t==="list")return i;if(typeof i=="object"&&t==="list")return i.path;if(typeof n=="string"&&t==="create")return n;if(typeof n=="object"&&t==="create")return n.path;if(typeof o=="string"&&t==="show")return o;if(typeof o=="object"&&t==="show")return o.path;if(typeof s=="string"&&t==="edit")return s;if(typeof s=="object"&&t==="edit")return s.path;let u=`/${r}`,a=`${["edit","create","clone","show"].includes(t)?t:""}`,p=`${["edit","show","clone"].includes(t)?":id":""}`;return[u,a,p].filter(Boolean).join("/")},x=e=>e.flatMap(r=>{let i=[];return["list","show","edit","create"].forEach(n=>{let o=r[n];if(typeof o<"u"&&typeof o!="string"){let s=typeof o=="function"?o:o.component,u=B(r,n);i.push({action:n,element:s,path:u}),n==="create"&&i.push({action:"clone",element:s,path:u})}}),i.map(({action:n,element:o,path:s})=>{let u=v.createElement(o,null);return v.createElement(j,{key:`${n}-${s}`,path:s,element:u})})});import{Routes as M}from"react-router-dom";var Q=({children:e})=>{let{resources:t}=I(),r=N.useMemo(()=>x(t),[t]);return e?e(r):N.createElement(M,null,r)};import{useResource as V,useGetToPath as H}from"@refinedev/core";import G from"react";import{Navigate as q}from"react-router-dom";var z=({resource:e,meta:t})=>{let r=H(),{resource:i,resources:n}=V(e),o=i||n.find(s=>s.list);if(o){let s=r({resource:o,action:"list",meta:t});return s?G.createElement(q,{to:s}):(console.warn("No resource is found to navigate to."),null)}else return console.warn("No resource is found to navigate to."),null};import w from"react";import{useTranslate as O,useWarnAboutChange as X}from"@refinedev/core";import f from"react";import{UNSAFE_NavigationContext as D}from"react-router-dom";function J(e,t=!0){let{navigator:r}=f.useContext(D);f.useEffect(()=>{if(!t)return;let i=r.go,n=r.push;return r.push=(...o)=>{e()!==!1&&n(...o)},r.go=(...o)=>{e()!==!1&&i(...o)},()=>{r.push=n,r.go=i}},[r,e,t])}function b(e,t=!0,r,i=!1){let n=f.useCallback(s=>(s.preventDefault(),s.returnValue=e,s.returnValue),[e]);f.useEffect(()=>(t&&!i&&window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}),[n,t,i]);let o=f.useCallback(()=>{let s=window.confirm(e);return s&&r&&r(),s},[e]);J(o,t)}import{useLocation as W}from"react-router-dom";var Y=({translationKey:e="warnWhenUnsavedChanges",message:t="Are you sure you want to leave? You have unsaved changes."})=>{let r=O(),{pathname:i}=W(),{warnWhen:n,setWarnWhen:o}=X();w.useEffect(()=>()=>o==null?void 0:o(!1),[i]);let s=w.useMemo(()=>r(e,t),[e,t,r]);return b(s,n,()=>{o==null||o(!1)}),null};import _ from"react";import{Navigate as K,useLocation as Z}from"react-router-dom";var ee=({to:e})=>{let{pathname:t,search:r}=Z(),i=`${t}${r}`,n=i.length>1?`?to=${encodeURIComponent(i)}`:"";return _.createElement(K,{to:`${e}${n}`})};export{ee as CatchAllNavigate,z as NavigateToResource,Q as RefineRoutes,Y as UnsavedChangesNotifier,F as default,P as stringifyConfig};
//# sourceMappingURL=index.js.map