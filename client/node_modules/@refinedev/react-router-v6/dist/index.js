var X=Object.create;var R=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var _=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty;var Z=(e,t)=>{for(var o in t)R(e,o,{get:t[o],enumerable:!0})},L=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Y(t))!K.call(e,r)&&r!==o&&R(e,r,{get:()=>t[r],enumerable:!(i=W(t,r))||i.enumerable});return e};var p=(e,t,o)=>(o=e!=null?X(_(e)):{},L(t||!e||!e.__esModule?R(o,"default",{value:e,enumerable:!0}):o,e)),ee=e=>L(R({},"__esModule",{value:!0}),e);var re={};Z(re,{CatchAllNavigate:()=>D,NavigateToResource:()=>Q,RefineRoutes:()=>B,UnsavedChangesNotifier:()=>q,default:()=>A,stringifyConfig:()=>b});module.exports=ee(re);var y=p(require("react")),C=require("@refinedev/core"),m=require("react"),d=require("qs"),a=require("react-router-dom");var N=e=>{if(typeof e>"u")return e;let t=Number(e);return`${t}`===e?t:e};var b={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},A={go:()=>{let{search:e,hash:t}=(0,a.useLocation)(),o=(0,a.useNavigate)();return(0,m.useCallback)(({to:r,type:n,query:s,hash:u,options:{keepQuery:c,keepHash:h}={}})=>{let g={...c&&e&&(0,d.parse)(e,{ignoreQueryPrefix:!0}),...s};g.to&&(g.to=encodeURIComponent(`${g.to}`));let J=Object.keys(g).length>0,k=`#${(u||h&&t||"").replace(/^#/,"")}`,O=k.length>1,U=`${r||""}${J?(0,d.stringify)(g,b):""}${O?k:""}`;return n==="path"?U:o(U,{replace:n==="replace"})},[t,e,o])},back:()=>{let e=(0,a.useNavigate)();return(0,m.useCallback)(()=>{e(-1)},[e])},parse:()=>{let e=(0,a.useParams)(),{pathname:t,search:o}=(0,a.useLocation)(),{resources:i}=(0,m.useContext)(C.ResourceContext),{resource:r,action:n}=y.default.useMemo(()=>(0,C.matchResourceFromRoute)(t,i),[i,t]);return(0,m.useCallback)(()=>{let u=(0,d.parse)(o,{ignoreQueryPrefix:!0}),c={...e,...u};return{...r&&{resource:r},...n&&{action:n},...(e==null?void 0:e.id)&&{id:decodeURIComponent(e.id)},pathname:t,params:{...c,current:N(c.current),pageSize:N(c.pageSize),to:c.to?decodeURIComponent(c.to):void 0}}},[t,o,e,r,n])},Link:y.default.forwardRef(function(t,o){return y.default.createElement(a.Link,{...t,ref:o})})};var $=p(require("react")),F=require("@refinedev/core");var w=p(require("react")),E=require("react-router-dom"),te=(e,t)=>{let{name:o,list:i,create:r,show:n,edit:s}=e;if(typeof i=="string"&&t==="list")return i;if(typeof i=="object"&&t==="list")return i.path;if(typeof r=="string"&&t==="create")return r;if(typeof r=="object"&&t==="create")return r.path;if(typeof n=="string"&&t==="show")return n;if(typeof n=="object"&&t==="show")return n.path;if(typeof s=="string"&&t==="edit")return s;if(typeof s=="object"&&t==="edit")return s.path;let u=`/${o}`,c=`${["edit","create","clone","show"].includes(t)?t:""}`,h=`${["edit","show","clone"].includes(t)?":id":""}`;return[u,c,h].filter(Boolean).join("/")},S=e=>e.flatMap(o=>{let i=[];return["list","show","edit","create"].forEach(r=>{let n=o[r];if(typeof n<"u"&&typeof n!="string"){let s=typeof n=="function"?n:n.component,u=te(o,r);i.push({action:r,element:s,path:u}),r==="create"&&i.push({action:"clone",element:s,path:u})}}),i.map(({action:r,element:n,path:s})=>{let u=w.default.createElement(n,null);return w.default.createElement(E.Route,{key:`${r}-${s}`,path:s,element:u})})});var j=require("react-router-dom"),B=({children:e})=>{let{resources:t}=(0,F.useResource)(),o=$.default.useMemo(()=>S(t),[t]);return e?e(o):$.default.createElement(j.Routes,null,o)};var P=require("@refinedev/core"),I=p(require("react")),M=require("react-router-dom"),Q=({resource:e,meta:t})=>{let o=(0,P.useGetToPath)(),{resource:i,resources:r}=(0,P.useResource)(e),n=i||r.find(s=>s.list);if(n){let s=o({resource:n,action:"list",meta:t});return s?I.default.createElement(M.Navigate,{to:s}):(console.warn("No resource is found to navigate to."),null)}else return console.warn("No resource is found to navigate to."),null};var T=p(require("react")),v=require("@refinedev/core");var l=p(require("react")),V=require("react-router-dom");function oe(e,t=!0){let{navigator:o}=l.default.useContext(V.UNSAFE_NavigationContext);l.default.useEffect(()=>{if(!t)return;let i=o.go,r=o.push;return o.push=(...n)=>{e()!==!1&&r(...n)},o.go=(...n)=>{e()!==!1&&i(...n)},()=>{o.push=r,o.go=i}},[o,e,t])}function H(e,t=!0,o,i=!1){let r=l.default.useCallback(s=>(s.preventDefault(),s.returnValue=e,s.returnValue),[e]);l.default.useEffect(()=>(t&&!i&&window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}),[r,t,i]);let n=l.default.useCallback(()=>{let s=window.confirm(e);return s&&o&&o(),s},[e]);oe(n,t)}var G=require("react-router-dom"),q=({translationKey:e="warnWhenUnsavedChanges",message:t="Are you sure you want to leave? You have unsaved changes."})=>{let o=(0,v.useTranslate)(),{pathname:i}=(0,G.useLocation)(),{warnWhen:r,setWarnWhen:n}=(0,v.useWarnAboutChange)();T.default.useEffect(()=>()=>n==null?void 0:n(!1),[i]);let s=T.default.useMemo(()=>o(e,t),[e,t,o]);return H(s,r,()=>{n==null||n(!1)}),null};var z=p(require("react")),x=require("react-router-dom"),D=({to:e})=>{let{pathname:t,search:o}=(0,x.useLocation)(),i=`${t}${o}`,r=i.length>1?`?to=${encodeURIComponent(i)}`:"";return z.default.createElement(x.Navigate,{to:`${e}${r}`})};
//# sourceMappingURL=index.js.map