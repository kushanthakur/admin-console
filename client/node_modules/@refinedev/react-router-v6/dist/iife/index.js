(()=>{var Uo=Object.create;var Ur=Object.defineProperty;var Fo=Object.getOwnPropertyDescriptor;var To=Object.getOwnPropertyNames;var Io=Object.getPrototypeOf,Wo=Object.prototype.hasOwnProperty;var b=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Bo=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var zo=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of To(t))!Wo.call(e,o)&&o!==r&&Ur(e,o,{get:()=>t[o],enumerable:!(a=Fo(t,o))||a.enumerable});return e};var Ee=(e,t,r)=>(r=e!=null?Uo(Io(e)):{},zo(t||!e||!e.__esModule?Ur(r,"default",{value:e,enumerable:!0}):r,e));var ht=Bo((Ti,bo)=>{var Ho=Object.create,Rt=Object.defineProperty,jo=Object.getOwnPropertyDescriptor,Ko=Object.getOwnPropertyNames,_o=Object.getPrototypeOf,Vo=Object.prototype.hasOwnProperty,Go=(e,t)=>{for(var r in t)Rt(e,r,{get:t[r],enumerable:!0})},wa=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ko(t))!Vo.call(e,o)&&o!==r&&Rt(e,o,{get:()=>t[o],enumerable:!(a=jo(t,o))||a.enumerable});return e},x=(e,t,r)=>(r=e!=null?Ho(_o(e)):{},wa(t||!e||!e.__esModule?Rt(r,"default",{value:e,enumerable:!0}):r,e)),Yo=e=>wa(Rt({},"__esModule",{value:!0}),e),La={};Go(La,{AuthPage:()=>vi,Authenticated:()=>Si,CanAccess:()=>Ni,ErrorComponent:()=>ii,GitHubBanner:()=>Di,LayoutWrapper:()=>wi,LoginPage:()=>go,ReadyPage:()=>yo,Refine:()=>Ci,ResourceContext:()=>gt,RouteChangeHandler:()=>Po,UndoableQueue:()=>ho,WelcomePage:()=>mi,createTreeView:()=>wn,file2Base64:()=>fn,getDefaultFilter:()=>pn,getDefaultSortOrder:()=>mn,getNextPageParam:()=>Wa,getPreviousPageParam:()=>Ba,handleUseParams:()=>gn,importCSVMapper:()=>$a,legacyResourceTransform:()=>za,matchResourceFromRoute:()=>Cn,parseTableParams:()=>fr,parseTableParamsFromQuery:()=>vn,pickNotDeprecated:()=>q,routeGenerator:()=>Fa,setInitialFilters:()=>ur,setInitialSorters:()=>sr,stringifyTableParams:()=>lr,unionFilters:()=>mt,unionSorters:()=>ir,useActiveAuthProvider:()=>X,useApiUrl:()=>Bn,useAuthenticated:()=>nn,useBack:()=>co,useBreadcrumb:()=>oi,useCan:()=>po,useCanWithoutCache:()=>Hl,useCancelNotification:()=>rt,useCheckError:()=>ln,useCreate:()=>br,useCreateMany:()=>Va,useCustom:()=>Hn,useCustomMutation:()=>Kn,useDataProvider:()=>te,useDelete:()=>Qn,useDeleteMany:()=>Wn,useExport:()=>Sl,useForgotPassword:()=>xa,useForm:()=>Ml,useGetIdentity:()=>Ma,useGetLocale:()=>yl,useGetToPath:()=>qr,useGo:()=>he,useHandleNotification:()=>ce,useImport:()=>$l,useInfiniteList:()=>Yn,useInvalidate:()=>Ge,useIsAuthenticated:()=>mr,useIsExistAuthentication:()=>ka,useLink:()=>Ut,useList:()=>hr,useLiveMode:()=>Ja,useLog:()=>Ve,useLogList:()=>Xl,useLogin:()=>vr,useLogout:()=>nr,useMany:()=>ja,useMenu:()=>li,useModal:()=>Al,useMutationMode:()=>ot,useNavigation:()=>Pe,useNotification:()=>Fe,useOnError:()=>de,useOne:()=>Pr,useParse:()=>oo,useParsed:()=>ye,usePermissions:()=>Xo,usePublish:()=>_e,useRedirectionAfterSubmission:()=>so,useRefineContext:()=>Lr,useRegister:()=>Na,useResource:()=>W,useResourceSubscription:()=>ft,useResourceWithRoute:()=>Qt,useRouterContext:()=>re,useRouterType:()=>V,useSelect:()=>_l,useSetLocale:()=>gl,useShow:()=>xl,useSubscription:()=>el,useSyncWithLocation:()=>uo,useTable:()=>Gl,useTitle:()=>Cl,useToPath:()=>Ol,useTranslate:()=>H,useUpdate:()=>_a,useUpdateMany:()=>Tn,useUpdatePassword:()=>Da,useWarnAboutChange:()=>wr,userFriendlyResourceName:()=>gr});bo.exports=Yo(La);var He=x(b("react")),tt=x(b("react")),qa=tt.default.createContext({}),Jo=({children:e,isProvided:t,...r})=>{let{replace:a}=Pe(),o=async p=>{var c;try{return await((c=r.login)==null?void 0:c.call(r,p))}catch(s){return Promise.reject(s)}},l=async p=>{var c;try{return await((c=r.register)==null?void 0:c.call(r,p))}catch(s){return Promise.reject(s)}},n=async p=>{var c;try{return await((c=r.logout)==null?void 0:c.call(r,p))}catch(s){return Promise.reject(s)}},u=async p=>{var c;try{return await((c=r.checkAuth)==null?void 0:c.call(r,p)),Promise.resolve()}catch(s){return s!=null&&s.redirectPath&&a(s.redirectPath),Promise.reject(s)}};return tt.default.createElement(qa.Provider,{value:{...r,login:o,logout:n,checkAuth:u,register:l,isProvided:t}},e)},Sa=tt.default.createContext({}),Zo=({children:e,isProvided:t,...r})=>{let a=async c=>{var s;try{return await((s=r.login)==null?void 0:s.call(r,c))}catch(f){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",f),Promise.reject(f)}},o=async c=>{var s;try{return await((s=r.register)==null?void 0:s.call(r,c))}catch(f){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",f),Promise.reject(f)}},l=async c=>{var s;try{return await((s=r.logout)==null?void 0:s.call(r,c))}catch(f){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",f),Promise.reject(f)}},n=async c=>{var s;try{let f=await((s=r.check)==null?void 0:s.call(r,c));return Promise.resolve(f)}catch(f){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",f),Promise.reject(f)}},u=async c=>{var s;try{let f=await((s=r.forgotPassword)==null?void 0:s.call(r,c));return Promise.resolve(f)}catch(f){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",f),Promise.reject(f)}},p=async c=>{var s;try{let f=await((s=r.updatePassword)==null?void 0:s.call(r,c));return Promise.resolve(f)}catch(f){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",f),Promise.reject(f)}};return tt.default.createElement(Sa.Provider,{value:{...r,login:a,logout:l,check:n,register:o,forgotPassword:u,updatePassword:p,isProvided:t}},e)},fe=()=>tt.default.useContext(qa),we=()=>tt.default.useContext(Sa),Fr=b("@tanstack/react-query");function Xo({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=fe(),{getPermissions:a}=we(),o=(0,Fr.useQuery)(["usePermissions"],a!=null?a:()=>Promise.resolve(void 0),{enabled:!e&&!!a,...e?{}:t}),l=(0,Fr.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?l:o}var Tr=b("@tanstack/react-query");function Ma({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=fe(),{getIdentity:a}=we(),o=(0,Tr.useQuery)(["getUserIdentity"],a!=null?a:()=>Promise.resolve({}),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t}),l=(0,Tr.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?l:o}var Ir=b("@tanstack/react-query"),en=b("@tanstack/react-query"),cr=()=>{let e=(0,en.useQueryClient)();return()=>{e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])}};function nr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=cr(),a=V(),o=he(),{push:l}=Pe(),{open:n,close:u}=Fe(),{logout:p}=fe(),{logout:c}=we(),s=(0,Ir.useMutation)(["useLogout"],c,{onSuccess:(P,v)=>{let{success:m,error:d,redirectTo:i}=P,{redirectPath:g}=v!=null?v:{},C=g!=null?g:i;m&&(u==null||u("useLogout-error")),(d||!m)&&(n==null||n(_t(d))),C!==!1&&(a==="legacy"?l(C!=null?C:"/login"):C&&o({to:C})),r()},onError:P=>{n==null||n(_t(P))},...e===!0?{}:t}),f=(0,Ir.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],p,{onSuccess:(P,v)=>{var m;let d=(m=v==null?void 0:v.redirectPath)!=null?m:P;if(d!==!1){if(d){a==="legacy"?l(d):o({to:d});return}a==="legacy"?l("/login"):o({to:"/login"}),r()}},onError:P=>{n==null||n(_t(P))},...e?t:{}});return e?f:s}var _t=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),Wr=b("@tanstack/react-query"),tn=x(b("qs")),rn=x(b("react"));function vr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=cr(),a=V(),o=he(),{replace:l}=Pe(),n=ye(),{useLocation:u}=re(),{search:p}=u(),{close:c,open:s}=Fe(),{login:f}=fe(),{login:P}=we(),v=rn.default.useMemo(()=>{var i;return a==="legacy"?tn.default.parse(p,{ignoreQueryPrefix:!0}).to:(i=n.params)==null?void 0:i.to},[a,n.params,p]),m=(0,Wr.useMutation)(["useLogin"],P,{onSuccess:({success:i,redirectTo:g,error:C})=>{i&&(c==null||c("login-error")),(C||!i)&&(s==null||s(Vt(C))),v&&i?a==="legacy"?l(v):o({to:v,type:"replace"}):g?a==="legacy"?l(g):o({to:g,type:"replace"}):a==="legacy"&&l("/"),setTimeout(()=>{r()})},onError:i=>{s==null||s(Vt(i))},...e===!0?{}:t}),d=(0,Wr.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],f,{onSuccess:i=>{v&&l(v),i!==!1&&!v&&(typeof i=="string"?a==="legacy"?l(i):o({to:i,type:"replace"}):a==="legacy"?l("/"):o({to:"/",type:"replace"})),c==null||c("login-error"),setTimeout(()=>{r()})},onError:i=>{s==null||s(Vt(i))},...e?t:{}});return e?d:m}var Vt=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),Br=b("@tanstack/react-query");function Na({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=cr(),a=V(),o=he(),{replace:l}=Pe(),{register:n}=fe(),{register:u}=we(),{close:p,open:c}=Fe(),s=(0,Br.useMutation)(["useRegister"],u,{onSuccess:({success:P,redirectTo:v,error:m})=>{P&&(p==null||p("register-error")),(m||!P)&&(c==null||c(Gt(m))),v?a==="legacy"?l(v):o({to:v,type:"replace"}):a==="legacy"&&l("/"),r()},onError:P=>{c==null||c(Gt(P))},...e===!0?{}:t}),f=(0,Br.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],n,{onSuccess:P=>{P!==!1&&(P?a==="legacy"?l(P):o({to:P,type:"replace"}):a==="legacy"?l("/"):o({to:"/",type:"replace"}),p==null||p("register-error")),r()},onError:P=>{c==null||c(Gt(P))},...e?t:{}});return e?f:s}var Gt=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),zr=b("@tanstack/react-query");function xa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=V(),a=he(),{replace:o}=Pe(),{forgotPassword:l}=fe(),{forgotPassword:n}=we(),{close:u,open:p}=Fe(),c=(0,zr.useMutation)(["useForgotPassword"],n,{onSuccess:({success:f,redirectTo:P,error:v})=>{f&&(u==null||u("forgot-password-error")),(v||!f)&&(p==null||p(Yt(v))),P&&(r==="legacy"?o(P):a({to:P,type:"replace"}))},onError:f=>{p==null||p(Yt(f))},...e===!0?{}:t}),s=(0,zr.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],l,{onSuccess:f=>{f!==!1&&f&&(r==="legacy"?o(f):a({to:f,type:"replace"})),u==null||u("forgot-password-error")},onError:f=>{p==null||p(Yt(f))},...e?t:{}});return e?s:c}var Yt=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),an=x(b("react")),Hr=b("@tanstack/react-query"),on=x(b("qs"));function Da({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=V(),a=he(),{replace:o}=Pe(),{updatePassword:l}=fe(),{updatePassword:n}=we(),{close:u,open:p}=Fe(),c=ye(),{useLocation:s}=re(),{search:f}=s(),P=an.default.useMemo(()=>{var d;if(r==="legacy"){let i=on.default.parse(f,{ignoreQueryPrefix:!0});return i!=null?i:{}}else return(d=c.params)!=null?d:{}},[f,c,r]),v=(0,Hr.useMutation)(["useUpdatePassword"],async d=>n==null?void 0:n({...P,...d}),{onSuccess:({success:d,redirectTo:i,error:g})=>{d&&(u==null||u("update-password-error")),(g||!d)&&(p==null||p(Jt(g))),i&&(r==="legacy"?o(i):a({to:i,type:"replace"}))},onError:d=>{p==null||p(Jt(d))},...e===!0?{}:t}),m=(0,Hr.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async d=>l==null?void 0:l({...P,...d}),{onSuccess:d=>{d!==!1&&d&&(r==="legacy"?o(d):a({to:d,type:"replace"})),u==null||u("update-password-error")},onError:d=>{p==null||p(Jt(d))},...e?t:{}});return e?m:v}var Jt=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),jr=b("@tanstack/react-query");function mr({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=fe(),{check:a}=we(),o=(0,jr.useQuery)(["useAuthenticated",t],async()=>{var n;return(n=await(a==null?void 0:a(t)))!=null?n:{}},{retry:!1,enabled:!e}),l=(0,jr.useQuery)(["useAuthenticated","v3LegacyAuthProviderCompatible",t],async()=>{var n;return(n=await(r==null?void 0:r(t)))!=null?n:{}},{retry:!1,enabled:e});return e?l:o}var nn=mr,Kr=b("@tanstack/react-query");function de({v3LegacyAuthProviderCompatible:e=!1}={}){let t=V(),r=he(),{replace:a}=Pe(),{checkError:o}=fe(),{onError:l}=we(),{mutate:n}=nr({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:u}=nr({v3LegacyAuthProviderCompatible:Boolean(e)}),p=(0,Kr.useMutation)(["useCheckError"],l,{onSuccess:({logout:s,redirectTo:f})=>{if(s){u({redirectPath:f});return}if(f){t==="legacy"?a(f):r({to:f,type:"replace"});return}}}),c=(0,Kr.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],o,{onError:s=>{n({redirectPath:s})}});return e?c:p}var ln=de,ka=()=>{let{isProvided:e}=fe(),{isProvided:t}=we();return Boolean(t||e)},un=b("@tanstack/react-query"),Zt=e=>e/1e3,sn=x(b("lodash/zip")),dn=x(b("lodash/fromPairs")),$a=(e,t=r=>r)=>{let[r,...a]=e;return a.map(o=>(0,dn.default)((0,sn.default)(r,o))).map((o,l,n)=>t.call(void 0,o,l,n))},_r=x(b("pluralize")),pr=x(b("qs")),Aa=x(b("lodash/unionWith")),Ra=x(b("lodash/differenceWith")),cn=x(b("warn-once")),fr=e=>{var t;let{current:r,pageSize:a,sorter:o,sorters:l,filters:n}=pr.default.parse(e.substring(1));return{parsedCurrent:r&&Number(r),parsedPageSize:a&&Number(a),parsedSorter:(t=q(l,o))!=null?t:[],parsedFilters:n!=null?n:[]}},vn=e=>{let t=pr.default.stringify(e);return fr(`/${t}`)},lr=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:o,filters:l,...n}=e;return pr.default.stringify({...n,...r||{},sorters:q(o,a),filters:l},t)},Oa=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Qa=(e,t)=>e.field==t.field,mt=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,cn.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,Aa.default)(e,t,r,Oa).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),ir=(e,t)=>(0,Aa.default)(e,t,Qa).filter(r=>r.order!==void 0&&r.order!==null),ur=(e,t)=>[...(0,Ra.default)(t,e,Oa),...e],sr=(e,t)=>[...(0,Ra.default)(t,e,Qa),...e],mn=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},pn=(e,t,r="eq")=>{let a=t==null?void 0:t.find(o=>{if(o.operator!=="or"&&o.operator!=="and"&&"field"in o){let{operator:l,field:n}=o;return n===e&&l===r}});if(a)return a.value||[]},fn=e=>new Promise((t,r)=>{let a=new FileReader,o=()=>{a.result&&(a.removeEventListener("load",o,!1),t(a.result))};a.addEventListener("load",o,!1),a.readAsDataURL(e.originFileObj),a.onerror=l=>(a.removeEventListener("load",o,!1),r(l))}),gr=(e="",t)=>{let r=Dt(e);return t==="singular"?_r.default.singular(r):_r.default.plural(r)},gn=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,q=(...e)=>e.find(t=>typeof t<"u"),ge=(e,t,r,a)=>{let o=t||"default",l={all:[o],resourceAll:[o,e||""],list:n=>[...l.resourceAll,"list",{...n,...q(r,a)||{}}],many:n=>[...l.resourceAll,"getMany",n&&n.map(String),{...q(r,a)||{}}].filter(u=>u!==void 0),detail:n=>[...l.resourceAll,"detail",n==null?void 0:n.toString(),{...q(r,a)||{}}],logList:n=>["logList",e,n,a].filter(u=>u!==void 0)};return l},yn=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),yr=e=>e.startsWith(":"),et=e=>e.split("/").filter(t=>t!==""),hn=(e,t)=>{let r=et(e),a=et(t);return r.length===a.length},$e=e=>e.replace(/^\/|\/$/g,""),Pn=(e,t)=>{let r=$e(e),a=$e(t);if(!hn(r,a))return!1;let o=et(r);return et(a).every((l,n)=>yr(l)||l===o[n])},bn=(e,t,r)=>{let a=$e(r||""),o=`${a}${a?"/":""}${e}`;return t==="list"?o=`${o}`:t==="create"?o=`${o}/create`:t==="edit"?o=`${o}/edit/:id`:t==="show"?o=`${o}/show/:id`:t==="clone"&&(o=`${o}/clone/:id`),`/${o.replace(/^\//,"")}`},Qe=(e,t)=>{var r,a;let o=q((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!o)return;let l=t.find(n=>{var u;return((u=n.identifier)!=null?u:n.name)===o});return l!=null?l:{name:o}},Ua=(e,t,r)=>{let a=[],o=Qe(e,t);for(;o;)a.push(o),o=Qe(o,t);if(a.length!==0)return`/${a.reverse().map(l=>{var n,u;let p=r&&(u=(n=l.options)==null?void 0:n.route)!=null?u:l.name;return $e(p)}).join("/")}`},se=(e,t,r)=>{let a=[],o=["list","show","edit","create","clone"],l=Ua(e,t,r);return o.forEach(n=>{var u,p,c,s;let f=r&&n==="clone"?e.create:e[n],P;typeof f=="function"||r?P=bn(r&&(s=(c=(u=e.meta)==null?void 0:u.route)!=null?c:(p=e.options)==null?void 0:p.route)!=null?s:e.name,n,r?l:void 0):typeof f=="string"?P=f:typeof f=="object"&&(P=f.path),P&&a.push({action:n,resource:e,route:`/${P.replace(/^\//,"")}`})}),a},En=e=>{var t,r;if(e.length===0)return;if(e.length===1)return e[0];let a=e.map(n=>({...n,splitted:et($e(n.route))})),o=(r=(t=a[0])==null?void 0:t.splitted.length)!=null?r:0,l=[...a];for(let n=0;n<o;n++){let u=l.filter(p=>!yr(p.splitted[n]));if(u.length!==0){if(u.length===1){l=u;break}l=u}}return l[0]},Cn=(e,t)=>{let r=t.flatMap(o=>se(o,t)).filter(o=>Pn(e,o.route)),a=En(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},Fa=(e,t)=>{var r,a,o;let l,n=Ua(e,t,!0);if(n){let u=q(e.meta,e.options);l=`${n}/${(r=u==null?void 0:u.route)!=null?r:e.name}`}else l=(o=(a=e.options)==null?void 0:a.route)!=null?o:e.name;return`/${l.replace(/^\//,"")}`},wn=e=>{var t,r,a;let o=[],l={},n={},u,p;for(let c=0;c<e.length;c++){u=e[c];let s=(a=(r=u.route)!=null?r:(t=q(u==null?void 0:u.meta,u.options))==null?void 0:t.route)!=null?a:"";l[s]=u,l[s].children=[],n[u.name]=u,n[u.name].children=[]}for(let c in l)l.hasOwnProperty(c)&&(p=l[c],p.parentName&&n[p.parentName]?n[p.parentName].children.push(p):o.push(p));return o},Dt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Ta=x(b("react")),Ln=x(b("react")),Ia=({children:e})=>Ln.default.createElement("div",null,e),De={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Ue=Ta.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Ia,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:De}),qn=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:o,children:l,DashboardPage:n,Title:u,Layout:p=Ia,Header:c,Sider:s,Footer:f,OffLayoutArea:P,LoginPage:v=go,catchAll:m,liveMode:d="off",onLiveEvent:i,options:g})=>Ta.default.createElement(Ue.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:u,undoableTimeout:o,Layout:p,Header:c,Sider:s,Footer:f,OffLayoutArea:P,DashboardPage:n,LoginPage:v,catchAll:m,liveMode:d,onLiveEvent:i,options:g}},l),Sn=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:o,reactQueryDevtoolConfig:l,syncWithLocation:n,undoableTimeout:u,warnWhenUnsavedChanges:p}={})=>{var c,s,f,P,v,m,d,i,g,C,y,w,h,E,S,L,M,N,k,U,A,$,O,D;let R={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(s=(c=e==null?void 0:e.mutationMode)!=null?c:a)!=null?s:De.mutationMode,undoableTimeout:(P=(f=e==null?void 0:e.undoableTimeout)!=null?f:u)!=null?P:De.undoableTimeout,syncWithLocation:(m=(v=e==null?void 0:e.syncWithLocation)!=null?v:n)!=null?m:De.syncWithLocation,warnWhenUnsavedChanges:(i=(d=e==null?void 0:e.warnWhenUnsavedChanges)!=null?d:p)!=null?i:De.warnWhenUnsavedChanges,liveMode:(C=(g=e==null?void 0:e.liveMode)!=null?g:r)!=null?C:De.liveMode,redirect:{afterCreate:(w=(y=e==null?void 0:e.redirect)==null?void 0:y.afterCreate)!=null?w:De.redirect.afterCreate,afterClone:(E=(h=e==null?void 0:e.redirect)==null?void 0:h.afterClone)!=null?E:De.redirect.afterClone,afterEdit:(L=(S=e==null?void 0:e.redirect)==null?void 0:S.afterEdit)!=null?L:De.redirect.afterEdit}},Q=(N=(M=e==null?void 0:e.disableTelemetry)!=null?M:t)!=null?N:!1,J={clientConfig:(A=(U=(k=e==null?void 0:e.reactQuery)==null?void 0:k.clientConfig)!=null?U:o)!=null?A:{},devtoolConfig:(D=(O=($=e==null?void 0:e.reactQuery)==null?void 0:$.devtoolConfig)!=null?O:l)!=null?D:{}};return{optionsWithDefaults:R,disableTelemetryWithDefault:Q,reactQueryWithDefaults:J}},Mn=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},Vr=async(e,t,r)=>{let a=[];for(let[o,l]of e.entries())try{let n=await l();a.push(t(n,o))}catch(n){a.push(r(n,o))}return a},_=(e,t=[],r=!1)=>{if(!!e)return r?t.find(o=>{var l;return $e((l=o.route)!=null?l:"")===$e(e)})||t.find(o=>o.name===e):t.find(a=>{var o;return((o=a.identifier)!=null?o:a.name)===e})},F=(e,t,r)=>{if(t)return t;let a=_(e,r),o=q(a==null?void 0:a.meta,a==null?void 0:a.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"},Ot=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),Wa=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,o=(t==null?void 0:t.pageSize)||10,l=Math.ceil((e.total||0)/o);return a<l?Number(a)+1:void 0},Ba=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},za=e=>{let t=[];return e==null||e.forEach(r=>{var a;t.push({...r,label:(a=r.options)==null?void 0:a.label,route:Fa(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},Nn=e=>et($e(e)).flatMap(t=>yr(t)?[t.slice(1)]:[]),xn=(e,t={},r={})=>e.reduce((a,o)=>{var l;let n=r[o]||((l=t.params)==null?void 0:l[o])||(o==="id"?t.id:void 0)||(o==="action"?t.action:void 0)||(o==="resource"?t.resource:void 0);return typeof n<"u"&&(a[o]=n),a},{}),pe=(e,t={},r={})=>{let a=Nn(e),o=xn(a,t,r);return e.replace(/:([^\/]+)/g,(l,n)=>{let u=o[n];return typeof u<"u"?`${u}`:l})},X=()=>{let e=fe(),t=we();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},Ha=({hasPagination:e,pagination:t,configPagination:r}={})=>{var a,o,l;let n=e===!1?"off":"server",u=(a=t==null?void 0:t.mode)!=null?a:n,p=(o=q(t==null?void 0:t.current,r==null?void 0:r.current))!=null?o:1,c=(l=q(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?l:10;return{current:p,pageSize:c,mode:u}},hr=({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:l,queryOptions:n,successNotification:u,errorNotification:p,meta:c,metaData:s,liveMode:f,onLiveEvent:P,liveParams:v,dataProviderName:m})=>{let{resources:d}=W(),i=te(),g=H(),C=X(),{mutate:y}=de({v3LegacyAuthProviderCompatible:Boolean(C==null?void 0:C.isLegacy)}),w=ce(),h=F(e,m,d),E=q(c,s),S=q(r,t==null?void 0:t.filters),L=q(l,t==null?void 0:t.sort),M=q(a,t==null?void 0:t.hasPagination),N=Ha({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:M}),k=N.mode==="server",U={meta:E,metaData:E,filters:S,hasPagination:k,pagination:N,sorters:L,config:{...t,sort:L}},A=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,$=ge(e,h,E,E),{getList:O}=i(h);return ft({resource:e,types:["*"],params:{meta:E,metaData:E,pagination:N,hasPagination:k,sort:L,sorters:L,filters:S,subscriptionType:"useList",...v},channel:`resources/${e}`,enabled:A,liveMode:f,onLiveEvent:P}),(0,un.useQuery)($.list({filters:S,hasPagination:k,...k&&{pagination:N},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:D,pageParam:R,signal:Q})=>O({resource:e,pagination:N,hasPagination:k,filters:S,sort:L,sorters:L,meta:{...E||{},queryContext:{queryKey:D,pageParam:R,signal:Q}},metaData:{...E||{},queryContext:{queryKey:D,pageParam:R,signal:Q}}}),{...n,enabled:typeof(n==null?void 0:n.enabled)<"u"?n==null?void 0:n.enabled:!!e,select:D=>{var R;let Q=D,{current:J,mode:ve,pageSize:G}=N;return ve==="client"&&(Q={...Q,data:Q.data.slice((J-1)*G,J*G),total:Q.total}),n!=null&&n.select?(R=n==null?void 0:n.select)==null?void 0:R.call(n,Q):Q},onSuccess:D=>{var R;(R=n==null?void 0:n.onSuccess)==null||R.call(n,D);let Q=typeof u=="function"?u(D,U,e):u;w(Q)},onError:D=>{var R;y(D),(R=n==null?void 0:n.onError)==null||R.call(n,D);let Q=typeof p=="function"?p(D,U,e):p;w(Q,{key:`${e}-useList-notification`,message:g("notifications.error",{statusCode:D.statusCode},`Error (status code: ${D.statusCode})`),description:D.message,type:"error"})}})},Dn=b("@tanstack/react-query"),Pr=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:o,meta:l,metaData:n,liveMode:u,onLiveEvent:p,liveParams:c,dataProviderName:s})=>{let{resources:f}=W(),P=te(),v=ge(e,F(e,s,f),q(l,n),q(l,n)),{getOne:m}=P(F(e,s,f)),d=H(),i=X(),{mutate:g}=de({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),C=ce();return ft({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:q(l,n),metaData:q(l,n),subscriptionType:"useOne",...c},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:u,onLiveEvent:p}),(0,Dn.useQuery)(v.detail(t),({queryKey:y,pageParam:w,signal:h})=>m({resource:e,id:t,meta:{...q(l,n)||{},queryContext:{queryKey:y,pageParam:w,signal:h}},metaData:{...q(l,n)||{},queryContext:{queryKey:y,pageParam:w,signal:h}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:y=>{var w;(w=r==null?void 0:r.onSuccess)==null||w.call(r,y);let h=typeof a=="function"?a(y,{id:t,...q(l,n)||{}},e):a;C(h)},onError:y=>{var w;g(y),(w=r==null?void 0:r.onError)==null||w.call(r,y);let h=typeof o=="function"?o(y,{id:t,...q(l,n)||{}},e):o;C(h,{key:`${t}-${e}-getOne-notification`,message:d("notifications.error",{statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}})},kn=b("@tanstack/react-query"),ja=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:o,meta:l,metaData:n,liveMode:u,onLiveEvent:p,liveParams:c,dataProviderName:s})=>{let{resources:f}=W(),P=te(),v=ge(e,F(e,s,f),q(l,n),q(l,n)),{getMany:m,getOne:d}=P(F(e,s,f)),i=H(),g=X(),{mutate:C}=de({v3LegacyAuthProviderCompatible:Boolean(g==null?void 0:g.isLegacy)}),y=ce(),w=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return ft({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:q(l,n),metaData:q(l,n),subscriptionType:"useMany",...c},channel:`resources/${e}`,enabled:w,liveMode:u,onLiveEvent:p}),(0,kn.useQuery)(v.many(t),({queryKey:h,pageParam:E,signal:S})=>m?m({resource:e,ids:t,metaData:{...q(l,n)||{},queryContext:{queryKey:h,pageParam:E,signal:S}}}):Ot(t.map(L=>d({resource:e,id:L,metaData:{...q(l,n)||{},queryContext:{queryKey:h,pageParam:E,signal:S}}}))),{...r,onSuccess:h=>{var E;(E=r==null?void 0:r.onSuccess)==null||E.call(r,h);let S=typeof a=="function"?a(h,t,e):a;y(S)},onError:h=>{var E;C(h),(E=r==null?void 0:r.onError)==null||E.call(r,h);let S=typeof o=="function"?o(h,t,e):o;y(S,{key:`${t[0]}-${e}-getMany-notification`,message:i("notifications.error",{statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}})},Gr=b("@tanstack/react-query"),kt=x(b("react")),Xt=x(b("lodash/isEqual")),Ka=kt.default.createContext({notifications:[],notificationDispatch:()=>!1}),$n=[],An=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,Xt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,Xt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,Xt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},Rn=({children:e})=>{let[t,r]=(0,kt.useReducer)(An,$n),a={notifications:t,notificationDispatch:r};return kt.default.createElement(Ka.Provider,{value:a},e,typeof window<"u"&&t.map(o=>kt.default.createElement(ho,{key:`${o.id}-${o.resource}-queue`,notification:o})))},Yr=x(b("pluralize")),_a=({mutationOptions:e}={})=>{let{resources:t}=W(),r=(0,Gr.useQueryClient)(),a=te(),{mutationMode:o,undoableTimeout:l}=ot(),n=H(),u=X(),{mutate:p}=de({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),c=_e(),{log:s}=Ve(),{notificationDispatch:f}=rt(),P=ce(),v=Ge();return(0,Gr.useMutation)(({id:m,values:d,resource:i,mutationMode:g,undoableTimeout:C,onCancel:y,meta:w,metaData:h,dataProviderName:E})=>{let S=g!=null?g:o,L=C!=null?C:l;return S!=="undoable"?a(F(i,E,t)).update({resource:i,id:m,variables:d,meta:q(w,h),metaData:q(w,h)}):new Promise((M,N)=>{let k=()=>{a(F(i,E,t)).update({resource:i,id:m,variables:d,meta:q(w,h),metaData:q(w,h)}).then(A=>M(A)).catch(A=>N(A))},U=()=>{N({message:"mutationCancelled"})};y&&y(U),f({type:"ADD",payload:{id:m,resource:i,cancelMutation:U,doMutation:k,seconds:L,isSilent:!!y}})})},{onMutate:async({resource:m,id:d,mutationMode:i,values:g,dataProviderName:C})=>{let y=ge(m,F(m,C,t)),w=r.getQueriesData(y.resourceAll),h=i!=null?i:o;return await r.cancelQueries(y.resourceAll,void 0,{silent:!0}),h!=="pessimistic"&&(r.setQueriesData(y.list(),E=>{if(!E)return null;let S=E.data.map(L=>{var M;return((M=L.id)==null?void 0:M.toString())===(d==null?void 0:d.toString())?{id:d,...L,...g}:L});return{...E,data:S}}),r.setQueriesData(y.many(),E=>{if(!E)return null;let S=E.data.map(L=>{var M;return((M=L.id)==null?void 0:M.toString())===(d==null?void 0:d.toString())&&(L={id:d,...L,...g}),L});return{...E,data:S}}),r.setQueriesData(y.detail(d),E=>E?{...E,data:{...E.data,...g}}:null)),{previousQueries:w,queryKey:y}},onSettled:(m,d,{id:i,resource:g,dataProviderName:C,invalidates:y=["list","many","detail"]})=>{v({resource:g,dataProviderName:F(g,C,t),invalidates:y,id:i}),f({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(m,{id:d,resource:i,successNotification:g,dataProviderName:C,values:y,meta:w,metaData:h},E)=>{var S;let L=Yr.default.singular(i),M=typeof g=="function"?g(m,{id:d,values:y},i):g;P(M,{key:`${d}-${i}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${i}.${i}`,L)},`Successfully updated ${L}`),type:"success"}),c==null||c({channel:`resources/${i}`,type:"updated",payload:{ids:(S=m.data)!=null&&S.id?[m.data.id]:void 0},date:new Date});let N;if(E){let O=r.getQueryData(E.queryKey.detail(d));N=Object.keys(y||{}).reduce((D,R)=>{var Q;return D[R]=(Q=O==null?void 0:O.data)==null?void 0:Q[R],D},{})}let{fields:k,operation:U,variables:A,...$}=q(w,h)||{};s==null||s.mutate({action:"update",resource:i,data:y,previousData:N,meta:{id:d,dataProviderName:F(i,C,t),...$}})},onError:(m,{id:d,resource:i,errorNotification:g,values:C},y)=>{if(y)for(let w of y.previousQueries)r.setQueryData(w[0],w[1]);if(m.message!=="mutationCancelled"){p==null||p(m);let w=Yr.default.singular(i),h=typeof g=="function"?g(m,{id:d,values:C},i):g;P(h,{key:`${d}-${i}-notification`,message:n("notifications.editError",{resource:n(`${i}.${i}`,w),statusCode:m.statusCode},`Error when updating ${w} (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},On=b("@tanstack/react-query"),Jr=x(b("pluralize")),br=({mutationOptions:e}={})=>{let t=X(),{mutate:r}=de({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=te(),o=Ge(),{resources:l}=W(),n=H(),u=_e(),{log:p}=Ve(),c=ce();return(0,On.useMutation)(({resource:s,values:f,meta:P,metaData:v,dataProviderName:m})=>a(F(s,m,l)).create({resource:s,variables:f,meta:q(P,v),metaData:q(P,v)}),{onSuccess:(s,{resource:f,successNotification:P,dataProviderName:v,invalidates:m=["list","many"],values:d,meta:i,metaData:g})=>{var C,y,w;let h=Jr.default.singular(f),E=typeof P=="function"?P(s,d,f):P;c(E,{key:`create-${f}-notification`,message:n("notifications.createSuccess",{resource:n(`${f}.${f}`,h)},`Successfully created ${h}`),description:n("notifications.success","Success"),type:"success"}),o({resource:f,dataProviderName:F(f,v,l),invalidates:m}),u==null||u({channel:`resources/${f}`,type:"created",payload:{ids:(C=s==null?void 0:s.data)!=null&&C.id?[s.data.id]:void 0},date:new Date});let{fields:S,operation:L,variables:M,...N}=q(i,g)||{};p==null||p.mutate({action:"create",resource:f,data:d,meta:{dataProviderName:F(f,v,l),id:(w=(y=s==null?void 0:s.data)==null?void 0:y.id)!=null?w:void 0,...N}})},onError:(s,{resource:f,errorNotification:P,values:v})=>{r(s);let m=Jr.default.singular(f),d=typeof P=="function"?P(s,v,f):P;c(d,{key:`create-${f}-notification`,description:s.message,message:n("notifications.createError",{resource:n(`${f}.${f}`,m),statusCode:s.statusCode},`There was an error creating ${m} (status code: ${s.statusCode})`),type:"error"})},...e})},Zr=b("@tanstack/react-query"),Xr=x(b("pluralize")),Qn=({mutationOptions:e}={})=>{let t=X(),{mutate:r}=de({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=te(),{resources:o}=W(),l=(0,Zr.useQueryClient)(),{mutationMode:n,undoableTimeout:u}=ot(),{notificationDispatch:p}=rt(),c=H(),s=_e(),{log:f}=Ve(),P=ce(),v=Ge();return(0,Zr.useMutation)(({id:m,mutationMode:d,undoableTimeout:i,resource:g,onCancel:C,meta:y,metaData:w,dataProviderName:h,values:E})=>{let S=d!=null?d:n,L=i!=null?i:u;return S!=="undoable"?a(F(g,h,o)).deleteOne({resource:g,id:m,meta:q(y,w),metaData:q(y,w),variables:E}):new Promise((M,N)=>{let k=()=>{a(F(g,h,o)).deleteOne({resource:g,id:m,meta:q(y,w),variables:E}).then(A=>M(A)).catch(A=>N(A))},U=()=>{N({message:"mutationCancelled"})};C&&C(U),p({type:"ADD",payload:{id:m,resource:g,cancelMutation:U,doMutation:k,seconds:L,isSilent:!!C}})})},{onMutate:async({id:m,resource:d,mutationMode:i,dataProviderName:g})=>{let C=ge(d,F(d,g,o)),y=i!=null?i:n;await l.cancelQueries(C.resourceAll,void 0,{silent:!0});let w=l.getQueriesData(C.resourceAll);return y!=="pessimistic"&&(l.setQueriesData(C.list(),h=>h?{data:h.data.filter(E=>{var S;return((S=E.id)==null?void 0:S.toString())!==m.toString()}),total:h.total-1}:null),l.setQueriesData(C.many(),h=>{if(!h)return null;let E=h.data.filter(S=>{var L;return((L=S.id)==null?void 0:L.toString())!==(m==null?void 0:m.toString())});return{...h,data:E}})),{previousQueries:w,queryKey:C}},onSettled:(m,d,{id:i,resource:g,dataProviderName:C,invalidates:y=["list","many"]})=>{v({resource:g,dataProviderName:F(g,C,o),invalidates:y}),p({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(m,{id:d,resource:i,successNotification:g,dataProviderName:C,meta:y,metaData:w},h)=>{let E=Xr.default.singular(i!=null?i:"");l.removeQueries(h==null?void 0:h.queryKey.detail(d));let S=typeof g=="function"?g(m,d,i):g;P(S,{key:`${d}-${i}-notification`,description:c("notifications.success","Success"),message:c("notifications.deleteSuccess",{resource:c(`${i}.${i}`,E)},`Successfully deleted a ${E}`),type:"success"}),s==null||s({channel:`resources/${i}`,type:"deleted",payload:{ids:d?[d]:[]},date:new Date});let{fields:L,operation:M,variables:N,...k}=q(y,w)||{};f==null||f.mutate({action:"delete",resource:i,meta:{id:d,dataProviderName:F(i,C,o),...k}}),l.removeQueries(h==null?void 0:h.queryKey.detail(d))},onError:(m,{id:d,resource:i,errorNotification:g},C)=>{if(C)for(let y of C.previousQueries)l.setQueryData(y[0],y[1]);if(m.message!=="mutationCancelled"){r(m);let y=Xr.default.singular(i!=null?i:""),w=typeof g=="function"?g(m,d,i):g;P(w,{key:`${d}-${i}-notification`,message:c("notifications.deleteError",{resource:y,statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},Un=b("@tanstack/react-query"),Fn=x(b("pluralize")),Va=({mutationOptions:e}={})=>{let t=te(),{resources:r}=W(),a=H(),o=_e(),l=ce(),n=Ge(),{log:u}=Ve();return(0,Un.useMutation)(({resource:p,values:c,meta:s,metaData:f,dataProviderName:P})=>{let v=t(F(p,P,r));return v.createMany?v.createMany({resource:p,variables:c,meta:q(s,f),metaData:q(s,f)}):Ot(c.map(m=>v.create({resource:p,variables:m,meta:q(s,f),metaData:q(s,f)})))},{onSuccess:(p,{resource:c,successNotification:s,dataProviderName:f,invalidates:P=["list","many"],values:v,meta:m,metaData:d})=>{let i=Fn.default.plural(c),g=typeof s=="function"?s(p,v,c):s;l(g,{key:`createMany-${c}-notification`,message:a("notifications.createSuccess",{resource:a(`${c}.${c}`,c)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),n({resource:c,dataProviderName:F(c,f,r),invalidates:P});let C=p==null?void 0:p.data.filter(S=>(S==null?void 0:S.id)!==void 0).map(S=>S.id);o==null||o({channel:`resources/${c}`,type:"created",payload:{ids:C},date:new Date});let{fields:y,operation:w,variables:h,...E}=q(m,d)||{};u==null||u.mutate({action:"createMany",resource:c,data:v,meta:{dataProviderName:F(c,f,r),ids:C,...E}})},onError:(p,{resource:c,errorNotification:s,values:f})=>{let P=typeof s=="function"?s(p,f,c):s;l(P,{key:`createMany-${c}-notification`,description:p.message,message:a("notifications.createError",{resource:a(`${c}.${c}`,c),statusCode:p.statusCode},`There was an error creating ${c} (status code: ${p.statusCode}`),type:"error"})},...e})},ea=b("@tanstack/react-query"),ta=x(b("pluralize")),Tn=({mutationOptions:e}={})=>{let{resources:t}=W(),r=(0,ea.useQueryClient)(),a=te(),o=H(),{mutationMode:l,undoableTimeout:n}=ot(),u=X(),{mutate:p}=de({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),{notificationDispatch:c}=rt(),s=_e(),f=ce(),P=Ge(),{log:v}=Ve();return(0,ea.useMutation)(({ids:m,values:d,resource:i,onCancel:g,mutationMode:C,undoableTimeout:y,meta:w,metaData:h,dataProviderName:E})=>{let S=C!=null?C:l,L=y!=null?y:n,M=a(F(i,E,t)),N=()=>M.updateMany?M.updateMany({resource:i,ids:m,variables:d,meta:q(w,h),metaData:q(w,h)}):Ot(m.map(k=>M.update({resource:i,id:k,variables:d,meta:q(w,h),metaData:q(w,h)})));return S!=="undoable"?N():new Promise((k,U)=>{let A=()=>{N().then(O=>k(O)).catch(O=>U(O))},$=()=>{U({message:"mutationCancelled"})};g&&g($),c({type:"ADD",payload:{id:m,resource:i,cancelMutation:$,doMutation:A,seconds:L,isSilent:!!g}})})},{onMutate:async({resource:m,ids:d,values:i,mutationMode:g,dataProviderName:C,meta:y,metaData:w})=>{let h=ge(m,F(m,C,t),q(y,w),q(y,w)),E=g!=null?g:l;await r.cancelQueries(h.resourceAll,void 0,{silent:!0});let S=r.getQueriesData(h.resourceAll);if(E!=="pessimistic"){r.setQueriesData(h.list(),L=>{if(!L)return null;let M=L.data.map(N=>N.id!==void 0&&d.filter(k=>k!==void 0).map(String).includes(N.id.toString())?{...N,...i}:N);return{...L,data:M}}),r.setQueriesData(h.many(),L=>{if(!L)return null;let M=L.data.map(N=>N.id!==void 0&&d.filter(k=>k!==void 0).map(String).includes(N.id.toString())?{...N,...i}:N);return{...L,data:M}});for(let L of d)r.setQueriesData(h.detail(L),M=>{if(!M)return null;let N={...M.data,...i};return{...M,data:N}})}return{previousQueries:S,queryKey:h}},onSettled:(m,d,{ids:i,resource:g,dataProviderName:C})=>{P({resource:g,invalidates:["list","many"],dataProviderName:F(g,C,t)}),i.forEach(y=>P({resource:g,invalidates:["detail"],dataProviderName:F(g,C,t),id:y})),c({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(m,{ids:d,resource:i,meta:g,metaData:C,dataProviderName:y,successNotification:w,values:h},E)=>{let S=ta.default.singular(i),L=typeof w=="function"?w(m,{ids:d,values:h},i):w;f(L,{key:`${d}-${i}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${i}.${i}`,i)},`Successfully updated ${S}`),type:"success"}),s==null||s({channel:`resources/${i}`,type:"updated",payload:{ids:d.map(String)},date:new Date});let M=[];E&&d.forEach($=>{let O=r.getQueryData(E.queryKey.detail($));M.push(Object.keys(h||{}).reduce((D,R)=>{var Q;return D[R]=(Q=O==null?void 0:O.data)==null?void 0:Q[R],D},{}))});let{fields:N,operation:k,variables:U,...A}=q(g,C)||{};v==null||v.mutate({action:"updateMany",resource:i,data:h,previousData:M,meta:{ids:d,dataProviderName:F(i,y,t),...A}})},onError:(m,{ids:d,resource:i,errorNotification:g,values:C},y)=>{if(y)for(let w of y.previousQueries)r.setQueryData(w[0],w[1]);if(m.message!=="mutationCancelled"){p==null||p(m);let w=ta.default.singular(i),h=typeof g=="function"?g(m,{ids:d,values:C},i):g;f(h,{key:`${d}-${i}-updateMany-error-notification`,message:o("notifications.editError",{resource:w,statusCode:m.statusCode},`Error when updating ${w} (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},ra=b("@tanstack/react-query"),In=x(b("pluralize")),Wn=({mutationOptions:e}={})=>{let t=X(),{mutate:r}=de({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:a,undoableTimeout:o}=ot(),l=te(),{notificationDispatch:n}=rt(),u=H(),p=_e(),c=ce(),s=Ge(),{log:f}=Ve(),{resources:P}=W(),v=(0,ra.useQueryClient)();return(0,ra.useMutation)(({resource:m,ids:d,mutationMode:i,undoableTimeout:g,onCancel:C,meta:y,metaData:w,dataProviderName:h,values:E})=>{let S=i!=null?i:a,L=g!=null?g:o,M=l(F(m,h,P)),N=()=>M.deleteMany?M.deleteMany({resource:m,ids:d,meta:q(y,w),metaData:q(y,w),variables:E}):Ot(d.map(k=>M.deleteOne({resource:m,id:k,meta:q(y,w),metaData:q(y,w),variables:E})));return S!=="undoable"?N():new Promise((k,U)=>{let A=()=>{N().then(O=>k(O)).catch(O=>U(O))},$=()=>{U({message:"mutationCancelled"})};C&&C($),n({type:"ADD",payload:{id:d,resource:m,cancelMutation:$,doMutation:A,seconds:L,isSilent:!!C}})})},{onMutate:async({ids:m,resource:d,mutationMode:i,dataProviderName:g})=>{let C=ge(d,F(d,g,P)),y=i!=null?i:a;await v.cancelQueries(C.resourceAll,void 0,{silent:!0});let w=v.getQueriesData(C.resourceAll);if(y!=="pessimistic"){v.setQueriesData(C.list(),h=>h?{data:h.data.filter(E=>E.id&&!m.map(String).includes(E.id.toString())),total:h.total-1}:null),v.setQueriesData(C.many(),h=>{if(!h)return null;let E=h.data.filter(S=>S.id?!m.map(String).includes(S.id.toString()):!1);return{...h,data:E}});for(let h of m)v.setQueriesData(C.detail(h),E=>!E||E.data.id==h?null:{...E})}return{previousQueries:w,queryKey:C}},onSettled:(m,d,{resource:i,ids:g,dataProviderName:C,invalidates:y=["list","many"]})=>{s({resource:i,dataProviderName:F(i,C,P),invalidates:y}),n({type:"REMOVE",payload:{id:g,resource:i}})},onSuccess:(m,{ids:d,resource:i,meta:g,metaData:C,dataProviderName:y,successNotification:w},h)=>{d.forEach(k=>v.removeQueries(h==null?void 0:h.queryKey.detail(k)));let E=typeof w=="function"?w(m,d,i):w;c(E,{key:`${d}-${i}-notification`,description:u("notifications.success","Success"),message:u("notifications.deleteSuccess",{resource:u(`${i}.${i}`,i)},`Successfully deleted ${i}`),type:"success"}),p==null||p({channel:`resources/${i}`,type:"deleted",payload:{ids:d},date:new Date});let{fields:S,operation:L,variables:M,...N}=q(g,C)||{};f==null||f.mutate({action:"deleteMany",resource:i,meta:{ids:d,dataProviderName:F(i,y,P),...N}}),d.forEach(k=>v.removeQueries(h==null?void 0:h.queryKey.detail(k)))},onError:(m,{ids:d,resource:i,errorNotification:g},C)=>{if(C)for(let y of C.previousQueries)v.setQueryData(y[0],y[1]);if(m.message!=="mutationCancelled"){r(m);let y=In.default.singular(i),w=typeof g=="function"?g(m,d,i):g;c(w,{key:`${d}-${i}-notification`,message:u("notifications.deleteError",{resource:y,statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},Bn=e=>{let t=te(),{getApiUrl:r}=t(e);return r()},zn=b("@tanstack/react-query"),Hn=({url:e,method:t,config:r,queryOptions:a,successNotification:o,errorNotification:l,meta:n,metaData:u,dataProviderName:p})=>{let c=te(),{custom:s}=c(p),f=X(),{mutate:P}=de({v3LegacyAuthProviderCompatible:Boolean(f==null?void 0:f.isLegacy)}),v=H(),m=ce();if(s)return(0,zn.useQuery)([p,"custom",t,e,{...r,...q(n,u)||{}}],({queryKey:d,pageParam:i,signal:g})=>s({url:e,method:t,...r,metaData:{...q(n,u)||{},queryContext:{queryKey:d,pageParam:i,signal:g}}}),{...a,onSuccess:d=>{var i;(i=a==null?void 0:a.onSuccess)==null||i.call(a,d);let g=typeof o=="function"?o(d,{...r,...q(n,u)||{}}):o;m(g)},onError:d=>{var i;P(d),(i=a==null?void 0:a.onError)==null||i.call(a,d);let g=typeof l=="function"?l(d,{...r,...q(n,u)||{}}):l;m(g,{key:`${t}-notification`,message:v("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},jn=b("@tanstack/react-query"),Kn=({mutationOptions:e}={})=>{let t=X(),{mutate:r}=de({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ce(),o=te(),l=H();return(0,jn.useMutation)(({url:n,method:u,values:p,meta:c,metaData:s,dataProviderName:f,config:P})=>{let{custom:v}=o(f);if(v)return v({url:n,method:u,payload:p,meta:q(c,s),metaData:q(c,s),headers:{...P==null?void 0:P.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(n,{successNotification:u,config:p,meta:c,metaData:s})=>{let f=typeof u=="function"?u(n,{...p,...q(c,s)||{}}):u;a(f)},onError:(n,{errorNotification:u,method:p,config:c,meta:s,metaData:f})=>{r(n);let P=typeof u=="function"?u(n,{...c,...q(s,f)||{}}):u;a(P,{key:`${p}-notification`,message:l("notifications.error",{statusCode:n.statusCode},`Error (status code: ${n.statusCode})`),description:n.message,type:"error"})},...e})},aa=b("react"),Ga=x(b("react")),_n=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Er=Ga.default.createContext(_n()),Vn=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Ga.default.createElement(Er.Provider,{value:r},e)},te=()=>{let e=(0,aa.useContext)(Er);return(0,aa.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},Gn=b("@tanstack/react-query"),Yn=({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:l,queryOptions:n,successNotification:u,errorNotification:p,meta:c,metaData:s,liveMode:f,onLiveEvent:P,liveParams:v,dataProviderName:m})=>{let{resources:d}=W(),i=te(),g=H(),C=X(),{mutate:y}=de({v3LegacyAuthProviderCompatible:Boolean(C==null?void 0:C.isLegacy)}),w=ce(),h=F(e,m,d),E=q(c,s),S=q(r,t==null?void 0:t.filters),L=q(l,t==null?void 0:t.sort),M=q(a,t==null?void 0:t.hasPagination),N=Ha({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:M}),k=N.mode==="server",U={meta:E,metaData:E,filters:S,hasPagination:k,pagination:N,sorters:L,config:{...t,sort:L}},A=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,$=ge(e,h,E,E),{getList:O}=i(h);return ft({resource:e,types:["*"],params:{meta:E,metaData:E,pagination:N,hasPagination:k,sort:L,sorters:L,filters:S,subscriptionType:"useList",...v},channel:`resources/${e}`,enabled:A,liveMode:f,onLiveEvent:P}),(0,Gn.useInfiniteQuery)($.list({filters:S,hasPagination:k,...k&&{pagination:N},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:D,pageParam:R,signal:Q})=>{let J={...N,current:R};return O({resource:e,pagination:J,hasPagination:k,filters:S,sort:L,sorters:L,meta:{...E||{},queryContext:{queryKey:D,pageParam:R,signal:Q}},metaData:{...E||{},queryContext:{queryKey:D,pageParam:R,signal:Q}}}).then(({data:ve,total:G,...B})=>({data:ve,total:G,pagination:J,...B}))},{getNextPageParam:D=>Wa(D),getPreviousPageParam:D=>Ba(D),...n,onSuccess:D=>{var R;(R=n==null?void 0:n.onSuccess)==null||R.call(n,D);let Q=typeof u=="function"?u(D,U,e):u;w(Q)},onError:D=>{var R;y(D),(R=n==null?void 0:n.onError)==null||R.call(n,D);let Q=typeof p=="function"?p(D,U,e):p;w(Q,{key:`${e}-useInfiniteList-notification`,message:g("notifications.error",{statusCode:D.statusCode},`Error (status code: ${D.statusCode})`),description:D.message,type:"error"})}})},er=b("react"),Jn=b("@tanstack/react-query"),Ya=x(b("react")),pt=Ya.default.createContext(void 0),Zn=({liveProvider:e,children:t})=>Ya.default.createElement(pt.Provider,{value:e},t),ft=({resource:e,params:t,channel:r,types:a,enabled:o=!0,liveMode:l,onLiveEvent:n})=>{let u=(0,Jn.useQueryClient)(),p=ge(e),c=(0,er.useContext)(pt),{liveMode:s,onLiveEvent:f}=(0,er.useContext)(Ue),P=l!=null?l:s;(0,er.useEffect)(()=>{let v;return P&&P!=="off"&&o&&(v=c==null?void 0:c.subscribe({channel:r,params:{resource:e,...t},types:a,callback:m=>{P==="auto"&&u.invalidateQueries(p.resourceAll),n==null||n(m),f==null||f(m)}})),()=>{v&&(c==null||c.unsubscribe(v))}},[o])},Xn=b("react"),Ja=e=>{let{liveMode:t}=(0,Xn.useContext)(Ue);return e!=null?e:t},oa=b("react"),el=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:o})=>{let l=(0,oa.useContext)(pt);(0,oa.useEffect)(()=>{let n;return a&&(n=l==null?void 0:l.subscribe({channel:t,params:e,types:r,callback:o})),()=>{n&&(l==null||l.unsubscribe(n))}},[a])},tl=b("react"),_e=()=>{let e=(0,tl.useContext)(pt);return e==null?void 0:e.publish},rl=b("react"),Za=x(b("react")),al=b("react"),ol=b("react"),nl=x(b("lodash/isEqual")),ll=e=>{let t=(0,ol.useRef)(e);return(0,nl.default)(t.current,e)||(t.current=e),t.current},Xa=(e,t)=>{let r=ll(t);return(0,al.useMemo)(e,r)},gt=Za.default.createContext({resources:[]}),il=({resources:e,children:t})=>{let r=Xa(()=>za(e!=null?e:[]),[e]);return Za.default.createElement(gt.Provider,{value:{resources:r}},t)},eo=x(b("react")),to=eo.default.createContext("new"),ul=to.Provider,V=()=>eo.default.useContext(to),sl=x(b("react")),ro=x(b("react")),ao={},yt=(0,ro.createContext)(ao),dl=({children:e,router:t})=>ro.default.createElement(yt.Provider,{value:t!=null?t:ao},e),na=x(b("react")),oo=()=>{let e=(0,na.useContext)(yt);return na.default.useMemo(()=>{var t;return(t=e==null?void 0:e.parse)!=null?t:()=>()=>({})},[e==null?void 0:e.parse])()},ye=()=>{let e=oo();return sl.default.useMemo(()=>e(),[e])};function W(e){var t,r;let{resources:a}=(0,rl.useContext)(gt),o=V(),l=ye(),n={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},u=Qt(),{useParams:p}=re(),c=p();if(o==="legacy"){let P=n.resourceNameOrRouteName?n.resourceNameOrRouteName:c.resource,v=P?u(P):void 0,m=(t=n==null?void 0:n.recordItemId)!=null?t:c.id,d=c.action,i=(r=n==null?void 0:n.resourceName)!=null?r:v==null?void 0:v.name;return{resources:a,resource:v,resourceName:i,id:m,action:d}}let s,f=typeof e=="string"?e:n==null?void 0:n.resourceNameOrRouteName;if(f){let P=_(f,a);P?s=P:s={name:f}}else l!=null&&l.resource&&(s=l.resource);return{resources:a,resource:s,resourceName:s==null?void 0:s.name,id:l.id,action:l.action}}var la=b("react"),Qt=()=>{let{resources:e}=(0,la.useContext)(gt);return(0,la.useCallback)(t=>_(t,e,!0)||{name:t,route:t},[e])},cl=b("react"),rt=()=>{let{notifications:e,notificationDispatch:t}=(0,cl.useContext)(Ka);return{notifications:e,notificationDispatch:t}},vl=b("react"),no=x(b("react")),Cr=(0,no.createContext)({}),ml=({open:e,close:t,children:r})=>no.default.createElement(Cr.Provider,{value:{open:e,close:t}},r),Fe=()=>{let{open:e,close:t}=(0,vl.useContext)(Cr);return{open:e,close:t}},pl=b("react"),ce=()=>{let{open:e}=Fe();return(0,pl.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},ia=b("react"),lo=x(b("react")),at=lo.default.createContext({}),fl=({children:e,i18nProvider:t})=>lo.default.createElement(at.Provider,{value:{i18nProvider:t}},e),gl=()=>{let{i18nProvider:e}=(0,ia.useContext)(at);return(0,ia.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},ua=b("react"),H=()=>{let{i18nProvider:e}=(0,ua.useContext)(at);return(0,ua.useMemo)(()=>{function t(r,a,o){var l,n;return(n=(l=e==null?void 0:e.translate(r,a,o))!=null?l:o)!=null?n:typeof a=="string"&&typeof o>"u"?a:r}return t},[e])},sa=b("react"),yl=()=>{let{i18nProvider:e}=(0,sa.useContext)(at);return(0,sa.useCallback)(()=>e==null?void 0:e.getLocale(),[])},hl=b("react"),ot=()=>{let{mutationMode:e,undoableTimeout:t}=(0,hl.useContext)(Ue);return{mutationMode:e,undoableTimeout:t}},da=b("react"),dr=x(b("react")),io=dr.default.createContext({}),Pl=({children:e})=>{let[t,r]=(0,dr.useState)(!1);return dr.default.createElement(io.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},wr=()=>{let{warnWhenUnsavedChanges:e}=(0,da.useContext)(Ue),{warnWhen:t,setWarnWhen:r}=(0,da.useContext)(io);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},bl=b("react"),uo=()=>{let{syncWithLocation:e}=(0,bl.useContext)(Ue);return{syncWithLocation:e}},El=b("react"),Cl=()=>{let{Title:e}=(0,El.useContext)(Ue);return e},wl=b("react"),Lr=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:l,hasDashboard:n,mutationMode:u,syncWithLocation:p,undoableTimeout:c,warnWhenUnsavedChanges:s,DashboardPage:f,LoginPage:P,catchAll:v,options:m}=(0,wl.useContext)(Ue);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:l,hasDashboard:n,mutationMode:u,syncWithLocation:p,undoableTimeout:c,warnWhenUnsavedChanges:s,DashboardPage:f,LoginPage:P,catchAll:v,options:m}},Ll=b("react"),ql=b("export-to-csv-fix-source-map"),Sl=({resourceName:e,resource:t,sorter:r,sorters:a,filters:o,maxItemCount:l,pageSize:n=20,mapData:u=v=>v,exportOptions:p,meta:c,metaData:s,dataProviderName:f,onError:P}={})=>{var v;let[m,d]=(0,Ll.useState)(!1),i=te(),{resource:g,resources:C}=W(),y=`${gr(g==null?void 0:g.name,"plural")}-${new Date().toLocaleString()}`,{getList:w}=i(F((v=g==null?void 0:g.identifier)!=null?v:g==null?void 0:g.name,f,C));return{isLoading:m,triggerExport:async()=>{var h;d(!0);let E=[],S=1,L=!0;for(;L;)try{let{data:M,total:N}=await w({resource:(h=g==null?void 0:g.name)!=null?h:"",filters:o,sort:q(a,r),sorters:q(a,r),pagination:{current:S,pageSize:n,mode:"server"},meta:q(c,s),metaData:q(c,s)});S++,E.push(...M),l&&E.length>=l&&(E=E.slice(0,l),L=!1),N===E.length&&(L=!1)}catch(M){d(!1),L=!1,P==null||P(M);return}new ql.ExportToCsv({filename:y,useKeysAsHeaders:!0,...p}).generateCsv(E.map(u)),d(!1)}}},ca=x(b("react")),Ml=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:o,redirect:l,successNotification:n,errorNotification:u,meta:p,metaData:c,mutationMode:s,liveMode:f,onLiveEvent:P,liveParams:v,undoableTimeout:m,dataProviderName:d,invalidates:i,queryOptions:g,createMutationOptions:C,updateMutationOptions:y}={})=>{let{options:w}=Lr(),{resources:h}=W(),E=V(),{resource:S,id:L,action:M}=ye(),{useParams:N}=re(),{resource:k,action:U,id:A}=N(),$=typeof S=="string"?S:S==null?void 0:S.name,O=!e||e===(E==="legacy"?k:$)?r!=null?r:E==="legacy"?A:L:r,[D,R]=ca.default.useState(O);ca.default.useEffect(()=>{O!==D&&R(r)},[r]);let Q=e!=null?e:E==="legacy"?k:$,J=E==="legacy"?U:M,ve=t!=null?t:J==="edit"||J==="clone"?J:"create",G=Qt(),B;if(E==="legacy")Q&&(B=G(Q));else if(e){let z=_(e,h);z?B=z:B={name:e,route:e}}else if(typeof S=="string"){let z=_(S,h);z?B=z:B={name:S,route:S}}else B=S;let{mutationMode:ae}=ot(),Le=s!=null?s:ae,Te=ve==="create",Y=ve==="edit",ee=ve==="clone",it=Mn({redirectFromProps:l,action:ve,redirectOptions:w.redirect}),jt=D!==void 0&&(Y||ee),bt=Pr({resource:B==null?void 0:B.name,id:D!=null?D:"",queryOptions:{enabled:jt,...g},liveMode:f,onLiveEvent:P,liveParams:v,meta:q(p,c),metaData:q(p,c),dataProviderName:d}),{isFetching:ut}=bt,st=br({mutationOptions:C}),{mutate:Et,isLoading:qe}=st,dt=_a({mutationOptions:y}),{mutate:Ae,isLoading:Kt}=dt,{setWarnWhen:Ie}=wr(),Re=so();return{...Te||ee?{formLoading:ut||qe,mutationResult:st,onFinish:async z=>{Ie(!1);let oe=Se=>{Re({redirect:it,resource:B,id:Se,meta:c})};return Le!=="pessimistic"&&setTimeout(()=>{oe()}),new Promise((Se,We)=>{if(Le!=="pessimistic"&&Se(),!!B)return Et({values:z,resource:B.name,successNotification:n,errorNotification:u,meta:q(p,c),metaData:q(p,c),dataProviderName:d,invalidates:i},{onSuccess:(be,Me,ne)=>{var xe;a&&a(be,z,ne);let Be=(xe=be==null?void 0:be.data)==null?void 0:xe.id;oe(Be),Se(be)},onError:(be,Me,ne)=>{if(o)return o(be,z,ne);We()}})})}}:{formLoading:ut||Kt,mutationResult:dt,onFinish:async z=>{if(Ie(!1),!B)return;let oe={id:D!=null?D:"",values:z,resource:B.name,mutationMode:Le,undoableTimeout:m,successNotification:n,errorNotification:u,meta:q(p,c),metaData:q(p,c),dataProviderName:d,invalidates:i},Se=()=>{R(O),Re({redirect:it,resource:B,id:D,meta:c})};return Le!=="pessimistic"&&setTimeout(()=>{Se()}),new Promise((We,be)=>(Le!=="pessimistic"&&We(),setTimeout(()=>{Ae(oe,{onSuccess:(Me,ne,xe)=>{a&&a(Me,z,xe),Le==="pessimistic"&&Se(),We(Me)},onError:(Me,ne,xe)=>{if(o)return o(Me,z,xe);be()}})})))}},queryResult:bt,id:D,setId:R,redirect:(z,oe)=>{Re({redirect:z!==void 0?z:Y?"list":"edit",resource:B,id:oe!=null?oe:D,meta:c})}}},Nl=b("react"),so=()=>{let{show:e,edit:t,list:r,create:a}=Pe();return(0,Nl.useCallback)(({redirect:o,resource:l,id:n,meta:u={}})=>{if(o&&l)return!!l.show&&o==="show"&&n?e(l,n,void 0,u):!!l.edit&&o==="edit"&&n?t(l,n,void 0,u):!!l.create&&o==="create"?a(l,void 0,u):r(l,"push",u)},[])},va=x(b("react")),he=()=>{let e=(0,va.useContext)(yt);return va.default.useMemo(()=>{var t;return(t=e==null?void 0:e.go)!=null?t:()=>()=>{}},[e==null?void 0:e.go])()},ma=x(b("react")),co=()=>{let e=(0,ma.useContext)(yt);return ma.default.useMemo(()=>{var t;return(t=e==null?void 0:e.back)!=null?t:()=>()=>{}},[e==null?void 0:e.back])()},Pe=()=>{let{resources:e}=W(),t=V(),{useHistory:r}=re(),a=r(),o=ye(),l=he(),n=co(),u=(v,m="push")=>{t==="legacy"?a[m](v):l({to:v,type:m})},p=(v,m={})=>{var d,i,g;if(t==="legacy"){let C=typeof v=="string"?(d=_(v,e,!0))!=null?d:{name:v,route:v}:v,y=se(C,e,!0).find(w=>w.action==="create");return y?pe(y.route,o,m):""}else{let C=typeof v=="string"?(i=_(v,e))!=null?i:{name:v}:v,y=(g=se(C,e).find(w=>w.action==="create"))==null?void 0:g.route;return y?l({to:pe(y,o,m),type:"path"}):""}},c=(v,m,d={})=>{var i,g,C;let y=encodeURIComponent(m);if(t==="legacy"){let w=typeof v=="string"?(i=_(v,e,!0))!=null?i:{name:v,route:v}:v,h=se(w,e,!0).find(E=>E.action==="edit");return h?pe(h.route,o,{...d,id:y}):""}else{let w=typeof v=="string"?(g=_(v,e))!=null?g:{name:v}:v,h=(C=se(w,e).find(E=>E.action==="edit"))==null?void 0:C.route;return h?l({to:pe(h,o,{...d,id:y}),type:"path"}):""}},s=(v,m,d={})=>{var i,g,C;let y=encodeURIComponent(m);if(t==="legacy"){let w=typeof v=="string"?(i=_(v,e,!0))!=null?i:{name:v,route:v}:v,h=se(w,e,!0).find(E=>E.action==="clone");return h?pe(h.route,o,{...d,id:y}):""}else{let w=typeof v=="string"?(g=_(v,e))!=null?g:{name:v}:v,h=(C=se(w,e).find(E=>E.action==="clone"))==null?void 0:C.route;return h?l({to:pe(h,o,{...d,id:y}),type:"path"}):""}},f=(v,m,d={})=>{var i,g,C;let y=encodeURIComponent(m);if(t==="legacy"){let w=typeof v=="string"?(i=_(v,e,!0))!=null?i:{name:v,route:v}:v,h=se(w,e,!0).find(E=>E.action==="show");return h?pe(h.route,o,{...d,id:y}):""}else{let w=typeof v=="string"?(g=_(v,e))!=null?g:{name:v}:v,h=(C=se(w,e).find(E=>E.action==="show"))==null?void 0:C.route;return h?l({to:pe(h,o,{...d,id:y}),type:"path"}):""}},P=(v,m={})=>{var d,i,g;if(t==="legacy"){let C=typeof v=="string"?(d=_(v,e,!0))!=null?d:{name:v,route:v}:v,y=se(C,e,!0).find(w=>w.action==="list");return y?pe(y.route,o,m):""}else{let C=typeof v=="string"?(i=_(v,e))!=null?i:{name:v}:v,y=(g=se(C,e).find(w=>w.action==="list"))==null?void 0:g.route;return y?l({to:pe(y,o,m),type:"path"}):""}};return{create:(v,m="push",d={})=>{u(p(v,d),m)},createUrl:p,edit:(v,m,d="push",i={})=>{u(c(v,m,i),d)},editUrl:c,clone:(v,m,d="push",i={})=>{u(s(v,m,i),d)},cloneUrl:s,show:(v,m,d="push",i={})=>{u(f(v,m,i),d)},showUrl:f,list:(v,m="push",d={})=>{u(P(v,d),m)},listUrl:P,push:(v,...m)=>{t==="legacy"?a.push(v,...m):l({to:v,type:"push"})},replace:(v,...m)=>{t==="legacy"?a.replace(v,...m):l({to:v,type:"replace"})},goBack:()=>{t==="legacy"?a.goBack():n()}}},pa=x(b("react")),xl=({resource:e,id:t,successNotification:r,errorNotification:a,meta:o,metaData:l,liveMode:n,onLiveEvent:u,dataProviderName:p,queryOptions:c}={})=>{let s=V(),{resources:f}=W(),{useParams:P}=re(),{resource:v,id:m}=ye(),{resource:d,id:i}=P(),g=v==null?void 0:v.name,C=!e||e===(s==="legacy"?d:g)?t!=null?t:s==="legacy"?i:m:t,[y,w]=(0,pa.useState)(C);pa.default.useEffect(()=>{C!==y&&w(C)},[C]);let h=e!=null?e:s==="legacy"?d:g,E,S=Qt();if(s==="legacy")h&&(E=S(h));else if(e){let L=_(e,f);L?E=L:E={name:e,route:e}}else if(typeof v=="string"){let L=_(v,f);L?E=L:E={name:v,route:v}}else E=v;return{queryResult:Pr({resource:E==null?void 0:E.name,id:y!=null?y:"",queryOptions:{enabled:y!==void 0,...c},successNotification:r,errorNotification:a,meta:q(o,l),metaData:q(o,l),liveMode:n,onLiveEvent:u,dataProviderName:p}),showId:y,setShowId:w}},St=b("react"),Dl=b("papaparse"),kl=x(b("lodash/chunk")),$l=({resourceName:e,resource:t,mapData:r=s=>s,paparseOptions:a,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:l,meta:n,metaData:u,onProgress:p,dataProviderName:c}={})=>{let[s,f]=(0,St.useState)(0),[P,v]=(0,St.useState)(0),[m,d]=(0,St.useState)(!1),{resource:i}=W(t!=null?t:e),g=Va(),C=br(),y;o===1?y=C:y=g;let w=()=>{v(0),f(0),d(!1)},h=S=>{let L={succeeded:S.filter(M=>M.type==="success"),errored:S.filter(M=>M.type==="error")};l==null||l(L),d(!1)};(0,St.useEffect)(()=>{p==null||p({totalAmount:P,processedAmount:s})},[P,s]);let E=({file:S})=>(w(),new Promise(L=>{d(!0),(0,Dl.parse)(S,{complete:async({data:M})=>{let N=$a(M,r);if(v(N.length),o===1){let k=N.map(A=>async()=>{var $;return{response:await C.mutateAsync({resource:($=i==null?void 0:i.name)!=null?$:"",values:A,successNotification:!1,errorNotification:!1,dataProviderName:c,meta:q(n,u),metaData:q(n,u)}),value:A}}),U=await Vr(k,({response:A,value:$})=>(f(O=>O+1),{response:[A.data],type:"success",request:[$]}),(A,$)=>({response:[A],type:"error",request:[N[$]]}));L(U)}else{let k=(0,kl.default)(N,o),U=k.map($=>async()=>{var O;return{response:await g.mutateAsync({resource:(O=i==null?void 0:i.name)!=null?O:"",values:$,successNotification:!1,errorNotification:!1,dataProviderName:c,meta:q(n,u),metaData:q(n,u)}),value:$,currentBatchLength:$.length}}),A=await Vr(U,({response:$,currentBatchLength:O,value:D})=>(f(R=>R+O),{response:$.data,type:"success",request:D}),($,O)=>({response:[$],type:"error",request:k[O]}));L(A)}},...a})}).then(L=>(h(L),L)));return{inputProps:{type:"file",accept:".csv",onChange:S=>{S.target.files&&S.target.files.length>0&&E({file:S.target.files[0]})}},mutationResult:y,isLoading:m,handleChange:E}},tr=b("react"),Al=({defaultVisible:e=!1}={})=>{let[t,r]=(0,tr.useState)(e),a=(0,tr.useCallback)(()=>r(!0),[t]),o=(0,tr.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:o}},Rl=x(b("react")),qr=()=>{let e=V(),{resource:t,resources:r}=W(),a=ye();return Rl.default.useCallback(({resource:o,action:l,meta:n})=>{var u;let p=o||t;if(!p)return;let c=(u=se(p,r,e==="legacy").find(s=>s.action===l))==null?void 0:u.route;return c?pe(c,a,n):void 0},[r,t,a])},Ol=({resource:e,action:t,meta:r,legacy:a})=>qr()({resource:e,action:t,meta:r,legacy:a}),fa=x(b("react")),Ut=()=>{let e=(0,fa.useContext)(yt);return e!=null&&e.Link?e.Link:({to:t,...r})=>fa.default.createElement("a",{href:t,...r})},Ql=b("react"),vo=x(b("react")),Oe={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Ul=vo.default.createContext(Oe),Sr=Ul,Fl=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:l,routes:n})=>vo.default.createElement(Sr.Provider,{value:{useHistory:t!=null?t:Oe.useHistory,useLocation:r!=null?r:Oe.useLocation,useParams:a!=null?a:Oe.useParams,Prompt:o!=null?o:Oe.Prompt,Link:l!=null?l:Oe.Link,routes:n!=null?n:Oe.routes}},e),re=()=>{let e=(0,Ql.useContext)(Sr),{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:l,routes:n}=e!=null?e:Oe;return{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:l,routes:n}},Tl=b("react"),Il=b("@tanstack/react-query"),mo=x(b("react")),Ft=mo.default.createContext({}),Wl=({can:e,children:t})=>mo.default.createElement(Ft.Provider,{value:{can:e}},t),Bl=e=>{let{icon:t,list:r,edit:a,create:o,show:l,clone:n,children:u,meta:p,options:c,...s}=e,{icon:f,...P}=p!=null?p:{},{icon:v,...m}=c!=null?c:{};return{...s,...p?{meta:P}:{},...c?{options:m}:{}}},po=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:o}=(0,Tl.useContext)(Ft),{resource:l,...n}=r!=null?r:{},u=Bl(l!=null?l:{}),p=(0,Il.useQuery)(["useCan",{action:e,resource:t,params:{...n,resource:u},enabled:a==null?void 0:a.enabled}],()=>{var c;return(c=o==null?void 0:o({action:e,resource:t,params:r}))!=null?c:Promise.resolve({can:!0})},{enabled:typeof o<"u",...a,retry:!1});return typeof o>"u"?{data:{can:!0}}:p},zl=b("react"),Hl=()=>{let{can:e}=(0,zl.useContext)(Ft);return{can:e}},Ye=b("react"),jl=x(b("lodash/uniqBy")),Kl=x(b("lodash/debounce")),Mt=x(b("lodash/get")),_l=e=>{var t,r,a;let[o,l]=(0,Ye.useState)([]),[n,u]=(0,Ye.useState)([]),[p,c]=(0,Ye.useState)([]),{resource:s,sort:f,sorters:P,filters:v=[],optionLabel:m="title",optionValue:d="id",debounce:i=300,successNotification:g,errorNotification:C,defaultValueQueryOptions:y,queryOptions:w,fetchSize:h,pagination:E,hasPagination:S=!1,liveMode:L,defaultValue:M=[],onLiveEvent:N,onSearch:k,liveParams:U,meta:A,metaData:$,dataProviderName:O}=e,{resources:D}=W(),R=_(s,D),Q=(t=R==null?void 0:R.name)!=null?t:s,J=Array.isArray(M)?M:[M],ve=(0,Ye.useCallback)(Y=>{c(Y.data.map(ee=>({label:(0,Mt.default)(ee,m),value:(0,Mt.default)(ee,d)})))},[m,d]),G=y!=null?y:w,B=ja({resource:Q,ids:J,queryOptions:{...G,enabled:J.length>0&&((r=y==null?void 0:y.enabled)!=null?r:!0),onSuccess:Y=>{var ee;ve(Y),(ee=G==null?void 0:G.onSuccess)==null||ee.call(G,Y)}},meta:q(A,$),metaData:q(A,$),liveMode:"off",dataProviderName:O}),ae=(0,Ye.useCallback)(Y=>{u(Y.data.map(ee=>({label:(0,Mt.default)(ee,m),value:(0,Mt.default)(ee,d)})))},[m,d]),Le=hr({resource:Q,sorters:q(P,f),filters:v.concat(o),pagination:{current:E==null?void 0:E.current,pageSize:(a=E==null?void 0:E.pageSize)!=null?a:h,mode:E==null?void 0:E.mode},hasPagination:S,queryOptions:{...w,onSuccess:Y=>{var ee;ae(Y),(ee=w==null?void 0:w.onSuccess)==null||ee.call(w,Y)}},successNotification:g,errorNotification:C,meta:q(A,$),metaData:q(A,$),liveMode:L,liveParams:U,onLiveEvent:N,dataProviderName:O}),Te=Y=>{if(k){l(k(Y));return}if(Y)l([{field:m,operator:"contains",value:Y}]);else{l([]);return}};return{queryResult:Le,defaultValueQueryResult:B,options:(0,Ye.useMemo)(()=>(0,jl.default)([...n,...p],"value"),[n,p]),onSearch:(0,Kl.default)(Te,i)}},je=x(b("react")),ga=x(b("qs")),Nt=x(b("lodash/differenceWith")),xt=x(b("lodash/isEqual")),Vl=x(b("warn-once")),ya=[],ha=[];function Gl({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:o,permanentSorter:l=ha,defaultSetFilterBehavior:n,initialFilter:u,permanentFilter:p=ya,filters:c,sorters:s,syncWithLocation:f,resource:P,successNotification:v,errorNotification:m,queryOptions:d,liveMode:i,onLiveEvent:g,liveParams:C,meta:y,metaData:w,dataProviderName:h}={}){var E,S,L,M,N,k,U,A,$,O;let{syncWithLocation:D}=uo(),R=f!=null?f:D,Q=Ja(i),J=V(),{useLocation:ve}=re(),{search:G,pathname:B}=ve(),ae=ye(),Le=r===!1?"off":"server",Te=((E=a==null?void 0:a.mode)!=null?E:Le)!=="off",Y=q(a==null?void 0:a.current,e),ee=q(a==null?void 0:a.pageSize,t),it=q(y,w),{parsedCurrent:jt,parsedPageSize:bt,parsedSorter:ut,parsedFilters:st}=fr(G!=null?G:"?"),Et=q(c==null?void 0:c.initial,u),qe=(S=q(c==null?void 0:c.permanent,p))!=null?S:ya,dt=q(s==null?void 0:s.initial,o),Ae=(L=q(s==null?void 0:s.permanent,l))!=null?L:ha,Kt=(M=q(c==null?void 0:c.defaultBehavior,n))!=null?M:"merge",Ie,Re,z,oe;R?(Ie=((N=ae==null?void 0:ae.params)==null?void 0:N.current)||jt||Y||1,Re=((k=ae==null?void 0:ae.params)==null?void 0:k.pageSize)||bt||ee||10,z=((U=ae==null?void 0:ae.params)==null?void 0:U.sorters)||(ut.length?ut:dt),oe=((A=ae==null?void 0:ae.params)==null?void 0:A.filters)||(st.length?st:Et)):(Ie=Y||1,Re=ee||10,z=dt,oe=Et);let{replace:Se}=Pe(),We=he(),{resource:be}=W(P),Me=be==null?void 0:be.name;je.default.useEffect(()=>{(0,Vl.default)(typeof Me>"u","useTable: `resource` is not defined.")},[Me]);let[ne,xe]=(0,je.useState)(sr(Ae,z!=null?z:[])),[Be,Ct]=(0,je.useState)(ur(qe,oe!=null?oe:[])),[ct,kr]=(0,je.useState)(Ie),[ze,$r]=(0,je.useState)(Re),$o=({pagination:{current:j,pageSize:me},sorter:wt,filters:Lt})=>{var qt;if(J==="new")return(qt=We({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...Te?{current:j,pageSize:me}:{},sorters:wt,filters:Lt,...Ar()}}))!=null?qt:"";{let vt=ga.default.parse(G==null?void 0:G.substring(1)),Qr=lr({pagination:{pageSize:me,current:j},sorters:ne!=null?ne:wt,filters:Lt,...vt});return`${B!=null?B:""}?${Qr!=null?Qr:""}`}};(0,je.useEffect)(()=>{G===""&&(kr(Ie),$r(Re),xe(sr(Ae,z!=null?z:[])),Ct(ur(qe,oe!=null?oe:[])))},[G]);let Ar=()=>{var j;if(J==="new"){let{sorters:me,filters:wt,pageSize:Lt,current:qt,...vt}=(j=ae==null?void 0:ae.params)!=null?j:{};return vt}else{let{sorter:me,filters:wt,pageSize:Lt,current:qt,...vt}=ga.default.parse(G,{ignoreQueryPrefix:!0});return vt}};(0,je.useEffect)(()=>{if(R){let j=Ar();if(J==="new")We({type:"replace",options:{keepQuery:!0},query:{...Te?{pageSize:ze,current:ct}:{},sorters:(0,Nt.default)(ne,Ae,xt.default),filters:(0,Nt.default)(Be,qe,xt.default)}});else{let me=lr({...Te?{pagination:{pageSize:ze,current:ct}}:{},sorters:(0,Nt.default)(ne,Ae,xt.default),filters:(0,Nt.default)(Be,qe,xt.default),...j});return Se==null?void 0:Se(`${B}?${me}`,void 0,{shallow:!0})}}},[R,ct,ze,ne,Be]);let Rr=hr({resource:Me,hasPagination:r,pagination:{current:ct,pageSize:ze,mode:a==null?void 0:a.mode},filters:mt(qe,Be),sorters:ir(Ae,ne),queryOptions:d,successNotification:v,errorNotification:m,meta:it,metaData:it,liveMode:Q,liveParams:C,onLiveEvent:g,dataProviderName:h}),Ao=j=>{Ct(me=>mt(qe,j,me))},Ro=j=>{Ct(mt(qe,j))},Oo=j=>{Ct(me=>mt(qe,j(me)))},Qo=(j,me=Kt)=>{typeof j=="function"?Oo(j):me==="replace"?Ro(j):Ao(j)},Or=j=>{xe(()=>ir(Ae,j))};return{tableQueryResult:Rr,sorters:ne,setSorters:Or,sorter:ne,setSorter:Or,filters:Be,setFilters:Qo,current:ct,setCurrent:kr,pageSize:ze,setPageSize:$r,pageCount:ze?Math.ceil(((O=($=Rr.data)==null?void 0:$.total)!=null?O:0)/ze):1,createLinkForSyncWithLocation:$o}}var Pa=b("react"),rr=b("@tanstack/react-query"),fo=x(b("react")),Tt=fo.default.createContext({}),Yl=({create:e,get:t,update:r,children:a})=>fo.default.createElement(Tt.Provider,{value:{create:e,get:t,update:r}},a),Ve=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,rr.useQueryClient)(),a=(0,Pa.useContext)(Tt),o=X(),{resources:l}=(0,Pa.useContext)(gt),{data:n,refetch:u,isLoading:p}=Ma({v3LegacyAuthProviderCompatible:Boolean(o==null?void 0:o.isLegacy),queryOptions:{enabled:!!a}}),c=(0,rr.useMutation)(async f=>{var P,v,m,d,i;let g=_(f.resource,l),C=q((P=g==null?void 0:g.meta)==null?void 0:P.audit,(v=g==null?void 0:g.options)==null?void 0:v.audit,(d=(m=g==null?void 0:g.options)==null?void 0:m.auditLog)==null?void 0:d.permissions);if(C&&!yn(C,f.action))return;let y;return p&&(y=await u()),await((i=a.create)==null?void 0:i.call(a,{...f,author:n!=null?n:y==null?void 0:y.data}))},e),s=(0,rr.useMutation)(async f=>{var P;return await((P=a.update)==null?void 0:P.call(a,f))},{onSuccess:f=>{if(f!=null&&f.resource){let P=ge(f==null?void 0:f.resource);r.invalidateQueries(P.logList())}},...t});return{log:c,rename:s}},Jl=b("react"),Zl=b("@tanstack/react-query"),Xl=({resource:e,action:t,meta:r,author:a,metaData:o,queryOptions:l})=>{let{get:n}=(0,Jl.useContext)(Tt),u=ge(e,void 0,o);return(0,Zl.useQuery)(u.logList(r),()=>{var p;return(p=n==null?void 0:n({resource:e,action:t,author:a,meta:r,metaData:o}))!=null?p:Promise.resolve([])},{enabled:typeof n<"u",...l,retry:!1})},ei=b("react"),ti=b("@tanstack/react-query"),Ge=()=>{let{resources:e}=W(),t=(0,ti.useQueryClient)();return(0,ei.useCallback)(({resource:r,dataProviderName:a,invalidates:o,id:l})=>{if(o===!1)return;let n=ge(r,F(r,a,e));o.forEach(u=>{switch(u){case"all":t.invalidateQueries(n.all);break;case"list":t.invalidateQueries(n.list());break;case"many":t.invalidateQueries(n.many());break;case"resourceAll":t.invalidateQueries(n.resourceAll);break;case"detail":t.invalidateQueries(n.detail(l||""));break;default:break}})},[])},ri=b("react"),ai=x(b("warn-once")),oi=({meta:e={}}={})=>{let t=V(),{i18nProvider:r}=(0,ri.useContext)(at),a=ye(),o=H(),{resources:l,resource:n,action:u}=W(),p=[];if(!(n!=null&&n.name))return{breadcrumbs:p};let c=s=>{var f,P,v,m,d,i,g,C;let y=typeof s=="string"?(f=_(s,l,t==="legacy"))!=null?f:{name:s}:s;if(y){let w=q((P=y==null?void 0:y.meta)==null?void 0:P.parent,y==null?void 0:y.parentName);w&&c(w);let h=se(y,l,t==="legacy").find(L=>L.action==="list"),E=(v=h==null?void 0:h.resource)!=null&&v.list?h==null?void 0:h.route:void 0,S=E?t==="legacy"?E:pe(E,a,e):void 0;p.push({label:(i=q((m=y.meta)==null?void 0:m.label,(d=y.options)==null?void 0:d.label))!=null?i:o(`${y.name}.${y.name}`,Dt(y.name)),href:S,icon:q((g=y.meta)==null?void 0:g.icon,(C=y.options)==null?void 0:C.icon,y.icon)})}};if(c(n),u&&u!=="list"){let s=`actions.${u}`,f=o(s);typeof r<"u"&&f===s?((0,ai.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${u}" action. Please add "actions.${u}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),p.push({label:o(`buttons.${u}`,Dt(u))})):p.push({label:o(s,Dt(u))})}return{breadcrumbs:p}},ar=x(b("react")),$t=(e,t,r=!1)=>{let a=[],o=Qe(e,t);for(;o;)a.push(o),o=Qe(o,t);return a.reverse(),`/${[...a,e].map(l=>{var n,u;return $e((u=(n=r?l.route:void 0)!=null?n:l.identifier)!=null?u:l.name)}).join("/").replace(/^\//,"")}`},ni=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(o=>{var l,n;let u=[],p=Qe(o,e);for(;p;)u.push(p),p=Qe(p,e);u.reverse();let c=r;u.forEach(f=>{var P,v;let m=(v=(P=t?f.route:void 0)!=null?P:f.identifier)!=null?v:f.name;c.children[m]||(c.children[m]={item:f,children:{}}),c=c.children[m]});let s=(n=(l=t?o.route:void 0)!=null?l:o.identifier)!=null?n:o.name;c.children[s]||(c.children[s]={item:o,children:{}})});let a=o=>{let l=[];return Object.keys(o.children).forEach(n=>{let u=$t(o.children[n].item,e,t),p={...o.children[n].item,key:u,children:a(o.children[n])};l.push(p)}),l};return a(r)},ba=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),li=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=H(),a=qr(),o=V(),{resource:l,resources:n}=W(),{pathname:u}=ye(),{useLocation:p}=re(),{pathname:c}=p(),s=o==="legacy"?ba(c):u?ba(u):void 0,f=`/${(s!=null?s:"").replace(/^\//,"")}`,P=l?$t(l,n,o==="legacy"):f!=null?f:"",v=ar.default.useMemo(()=>{if(!l)return[];let i=Qe(l,n),g=[$t(l,n)];for(;i;)g.push($t(i,n)),i=Qe(i,n);return g},[]),m=ar.default.useCallback(i=>{var g,C,y,w,h,E,S,L;if(((y=(g=i==null?void 0:i.meta)==null?void 0:g.hide)!=null?y:(C=i==null?void 0:i.options)==null?void 0:C.hide)||!(i!=null&&i.list)&&i.children.length===0)return;let M=i.list?a({resource:i,action:"list",legacy:o==="legacy",meta:e}):void 0;if(!(t&&M&&M.match(/(\/|^):(.+?)(\/|$){1}/)))return{...i,route:M,icon:q((w=i.meta)==null?void 0:w.icon,(h=i.options)==null?void 0:h.icon,i.icon),label:(L=q((E=i==null?void 0:i.meta)==null?void 0:E.label,(S=i==null?void 0:i.options)==null?void 0:S.label))!=null?L:r(`${i.name}.${i.name}`,gr(i.name,"plural"))}},[o,e,r,t]),d=ar.default.useMemo(()=>{let i=ni(n,o==="legacy"),g=C=>C.flatMap(y=>{let w=g(y.children),h=m({...y,children:w});return h?[h]:[]});return g(i)},[n,o,m]);return{defaultOpenKeys:v,selectedKey:P,menuItems:d}},ii=()=>{let[e,t]=(0,He.useState)(),r=H(),{push:a}=Pe(),o=he(),l=V(),{resource:n,action:u}=W();return(0,He.useEffect)(()=>{n&&u&&t(r("pages.error.info",{action:u,resource:n==null?void 0:n.name},`You may have forgotten to add the "${u}" component to "${n==null?void 0:n.name}" resource.`))},[n,u]),He.default.createElement(He.default.Fragment,null,He.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&He.default.createElement("p",null,e),He.default.createElement("button",{onClick:()=>{l==="legacy"?a("/"):o({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},Z=x(b("react")),go=()=>{let[e,t]=(0,Z.useState)(""),[r,a]=(0,Z.useState)(""),o=H(),l=X(),{mutate:n}=vr({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)});return Z.default.createElement(Z.default.Fragment,null,Z.default.createElement("h1",null,o("pages.login.title","Sign in your account")),Z.default.createElement("form",{onSubmit:u=>{u.preventDefault(),n({username:e,password:r})}},Z.default.createElement("table",null,Z.default.createElement("tbody",null,Z.default.createElement("tr",null,Z.default.createElement("td",null,o("pages.login.username",void 0,"username"),":"),Z.default.createElement("td",null,Z.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:u=>t(u.target.value)}))),Z.default.createElement("tr",null,Z.default.createElement("td",null,o("pages.login.password",void 0,"password"),":"),Z.default.createElement("td",null,Z.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:u=>a(u.target.value)}))))),Z.default.createElement("br",null),Z.default.createElement("input",{type:"submit",value:"login"})))},Je=x(b("react")),T=x(b("react")),ui=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:o,wrapperProps:l,renderContent:n,formProps:u})=>{let p=V(),c=Ut(),{Link:s}=re(),f=p==="legacy"?s:c,[P,v]=(0,T.useState)(""),[m,d]=(0,T.useState)(""),[i,g]=(0,T.useState)(!1),C=H(),y=X(),{mutate:w}=vr({v3LegacyAuthProviderCompatible:Boolean(y==null?void 0:y.isLegacy)}),h=(L,M)=>L?typeof L=="string"?T.default.createElement(f,{to:L},M):L:null,E=()=>e?e.map(L=>{var M;return T.default.createElement("div",{key:L.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},T.default.createElement("button",{onClick:()=>w({providerName:L.name}),style:{display:"flex",alignItems:"center"}},L==null?void 0:L.icon,(M=L.label)!=null?M:T.default.createElement("label",null,L.label)))}):null,S=T.default.createElement("div",{...o},T.default.createElement("h1",{style:{textAlign:"center"}},C("pages.login.title","Sign in to your account")),E(),T.default.createElement("hr",null),T.default.createElement("form",{onSubmit:L=>{L.preventDefault(),w({email:P,password:m,remember:i})},...u},T.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},T.default.createElement("label",null,C("pages.login.fields.email","Email")),T.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:P,onChange:L=>v(L.target.value)}),T.default.createElement("label",null,C("pages.login.fields.password","Password")),T.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:m,onChange:L=>d(L.target.value)}),a!=null?a:T.default.createElement(T.default.Fragment,null,T.default.createElement("label",null,C("pages.login.buttons.rememberMe","Remember me"),T.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:i,value:i.toString(),onChange:()=>{g(!i)}}))),T.default.createElement("br",null),r!=null?r:h("/forgot-password",C("pages.login.buttons.forgotPassword","Forgot password?")),T.default.createElement("input",{type:"submit",value:C("pages.login.signin","Sign in")}),t!=null?t:T.default.createElement("span",null,C("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",h("/register",C("pages.login.register","Sign up"))))));return T.default.createElement("div",{...l},n?n(S):S)},K=x(b("react")),si=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:o,formProps:l})=>{let n=V(),u=Ut(),{Link:p}=re(),c=n==="legacy"?p:u,[s,f]=(0,K.useState)(""),[P,v]=(0,K.useState)(""),m=H(),d=X(),{mutate:i,isLoading:g}=Na({v3LegacyAuthProviderCompatible:Boolean(d==null?void 0:d.isLegacy)}),C=(h,E)=>h?typeof h=="string"?K.default.createElement(c,{to:h},E):h:null,y=()=>e?e.map(h=>{var E;return K.default.createElement("div",{key:h.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},K.default.createElement("button",{onClick:()=>i({providerName:h.name}),style:{display:"flex",alignItems:"center"}},h==null?void 0:h.icon,(E=h.label)!=null?E:K.default.createElement("label",null,h.label)))}):null,w=K.default.createElement("div",{...a},K.default.createElement("h1",{style:{textAlign:"center"}},m("pages.register.title","Sign up for your account")),y(),K.default.createElement("hr",null),K.default.createElement("form",{onSubmit:h=>{h.preventDefault(),i({email:s,password:P})},...l},K.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},K.default.createElement("label",null,m("pages.register.fields.email","Email")),K.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:s,onChange:h=>f(h.target.value)}),K.default.createElement("label",null,m("pages.register.fields.password","Password")),K.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:P,onChange:h=>v(h.target.value)}),K.default.createElement("input",{type:"submit",value:m("pages.register.buttons.submit","Sign up"),disabled:g}),t!=null?t:K.default.createElement(K.default.Fragment,null,K.default.createElement("span",null,m("pages.login.buttons.haveAccount","Have an account?")," ",C("/login",m("pages.login.signin","Sign in")))))));return K.default.createElement("div",{...r},o?o(w):w)},ie=x(b("react")),di=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:o})=>{let l=H(),n=V(),u=Ut(),{Link:p}=re(),c=n==="legacy"?p:u,[s,f]=(0,ie.useState)(""),{mutate:P,isLoading:v}=xa(),m=(i,g)=>i?typeof i=="string"?ie.default.createElement(c,{to:i},g):i:null,d=ie.default.createElement("div",{...r},ie.default.createElement("h1",{style:{textAlign:"center"}},l("pages.forgotPassword.title","Forgot your password?")),ie.default.createElement("hr",null),ie.default.createElement("form",{onSubmit:i=>{i.preventDefault(),P({email:s})},...o},ie.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ie.default.createElement("label",null,l("pages.forgotPassword.fields.email","Email")),ie.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:s,onChange:i=>f(i.target.value)}),ie.default.createElement("input",{type:"submit",disabled:v,value:l("pages.forgotPassword.buttons.submit","Send reset instructions")}),ie.default.createElement("br",null),e!=null?e:ie.default.createElement("span",null,l("pages.register.buttons.haveAccount","Have an account? ")," ",m("/login",l("pages.login.signin","Sign in"))))));return ie.default.createElement("div",{...t},a?a(d):d)},ue=x(b("react")),ci=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let o=H(),l=X(),{mutate:n,isLoading:u}=Da({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)}),[p,c]=(0,ue.useState)(""),[s,f]=(0,ue.useState)(""),P=ue.default.createElement("div",{...t},ue.default.createElement("h1",{style:{textAlign:"center"}},o("pages.updatePassword.title","Update Password")),ue.default.createElement("hr",null),ue.default.createElement("form",{onSubmit:v=>{v.preventDefault(),n({password:p,confirmPassword:s})},...a},ue.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ue.default.createElement("label",null,o("pages.updatePassword.fields.password","New Password")),ue.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:p,onChange:v=>c(v.target.value)}),ue.default.createElement("label",null,o("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ue.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:s,onChange:v=>f(v.target.value)}),ue.default.createElement("input",{type:"submit",disabled:u,value:o("pages.updatePassword.buttons.submit","Update")}))));return ue.default.createElement("div",{...e},r?r(P):P)},vi=e=>{let{type:t}=e;return Je.default.createElement(Je.default.Fragment,null,(()=>{switch(t){case"register":return Je.default.createElement(si,{...e});case"forgotPassword":return Je.default.createElement(di,{...e});case"updatePassword":return Je.default.createElement(ci,{...e});default:return Je.default.createElement(ui,{...e})}})())},le=x(b("react")),yo=()=>le.default.createElement(le.default.Fragment,null,le.default.createElement("h1",null,"Welcome on board"),le.default.createElement("p",null,"Your configuration is completed."),le.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",le.default.createElement("code",null,"`resources`")," property of ",le.default.createElement("code",null,"`<Refine>`")),le.default.createElement("div",{style:{display:"flex",gap:8}},le.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},le.default.createElement("button",null,"Documentation")),le.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},le.default.createElement("button",null,"Examples")),le.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},le.default.createElement("button",null,"Community")))),Ce=x(b("react")),mi=()=>Ce.default.createElement(Ce.default.Fragment,null,Ce.default.createElement("h1",null,"Welcome on board"),Ce.default.createElement("p",null,"Your configuration is completed."),Ce.default.createElement("div",{style:{display:"flex",gap:8}},Ce.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},Ce.default.createElement("button",null,"Documentation")),Ce.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},Ce.default.createElement("button",null,"Examples")),Ce.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},Ce.default.createElement("button",null,"Community")))),I=x(b("react")),or=b("@tanstack/react-query"),pi=b("@tanstack/react-query-devtools"),fi=b("react"),Ke=b("react"),gi="4.1.0",yi=()=>{let e=ka(),t=(0,Ke.useContext)(Tt),r=(0,Ke.useContext)(pt),a=(0,Ke.useContext)(Sr),o=(0,Ke.useContext)(Er),{i18nProvider:l}=(0,Ke.useContext)(at),n=(0,Ke.useContext)(Cr),u=(0,Ke.useContext)(Ft),{resources:p}=W(),c=!!t.create||!!t.get||!!t.update,s=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),f=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,P=!!o,v=!!(l!=null&&l.changeLocale)||!!(l!=null&&l.getLocale)||!!(l!=null&&l.translate),m=!!n.close||!!n.open,d=!!u.can;return{providers:{auth:e,auditLog:c,live:s,router:f,data:P,i18n:v,notification:m,accessControl:d},version:gi,resourceCount:p.length}},hi=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Pi=()=>{let e=yi();return(0,fi.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${hi(e)}`},[]),null},bi=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},Ea=x(b("react")),Ei=e=>{let t=Ea.default.useRef(!1);Ea.default.useEffect(()=>{t.current===!1&&e&&bi(e)&&(t.current=!0)},[e])},Ci=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:o,notificationProvider:l,accessControlProvider:n,auditLogProvider:u,resources:p,DashboardPage:c,ReadyPage:s,LoginPage:f,catchAll:P,children:v,liveProvider:m,i18nProvider:d,Title:i,Layout:g,Sider:C,Header:y,Footer:w,OffLayoutArea:h,onLiveEvent:E,options:S})=>{let{optionsWithDefaults:L,disableTelemetryWithDefault:M,reactQueryWithDefaults:N}=Sn({options:S}),k=Xa(()=>{var $;return N.clientConfig instanceof or.QueryClient?N.clientConfig:new or.QueryClient({...N.clientConfig,defaultOptions:{...N.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...($=N.clientConfig.defaultOptions)==null?void 0:$.queries}}})},[N.clientConfig]),U=I.default.useMemo(()=>typeof l=="function"?l:()=>l!=null?l:{},[l])();if(Ei(o),a&&!o&&(p!=null?p:[]).length===0)return s?I.default.createElement(s,null):I.default.createElement(yo,null);let{RouterComponent:A=I.default.Fragment}=o?{}:a!=null?a:{};return I.default.createElement(or.QueryClientProvider,{client:k},I.default.createElement(ml,{...U},I.default.createElement(Jo,{...e!=null?e:{},isProvided:Boolean(e)},I.default.createElement(Zo,{...t!=null?t:{},isProvided:Boolean(t)},I.default.createElement(Vn,{...r},I.default.createElement(Zn,{liveProvider:m},I.default.createElement(ul,{value:a&&!o?"legacy":"new"},I.default.createElement(dl,{router:o},I.default.createElement(Fl,{...a},I.default.createElement(il,{resources:p!=null?p:[]},I.default.createElement(fl,{i18nProvider:d},I.default.createElement(Wl,{...n!=null?n:{}},I.default.createElement(Yl,{...u!=null?u:{}},I.default.createElement(Rn,null,I.default.createElement(qn,{mutationMode:L.mutationMode,warnWhenUnsavedChanges:L.warnWhenUnsavedChanges,syncWithLocation:L.syncWithLocation,Title:i,undoableTimeout:L.undoableTimeout,catchAll:P,DashboardPage:c,LoginPage:f,Layout:g,Sider:C,Footer:w,Header:y,OffLayoutArea:h,hasDashboard:!!c,liveMode:L.liveMode,onLiveEvent:E,options:L},I.default.createElement(Pl,null,I.default.createElement(A,null,v,!M&&I.default.createElement(Pi,null),I.default.createElement(Po,null))))))))))))))))),N.devtoolConfig===!1?null:I.default.createElement(pi.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...N.devtoolConfig}))},Ca=b("react"),ho=({notification:e})=>{let t=H(),{notificationDispatch:r}=rt(),{open:a}=Fe(),[o,l]=(0,Ca.useState)(),n=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Zt(e.seconds)},`You have ${Zt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Zt(e.seconds)}),e.seconds>0)){o&&clearTimeout(o);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);l(u)}};return(0,Ca.useEffect)(()=>{n()},[e]),null},At=x(b("react")),wi=({children:e,Layout:t,Sider:r,Header:a,Title:o,Footer:l,OffLayoutArea:n})=>{let{Layout:u,Footer:p,Header:c,Sider:s,Title:f,OffLayoutArea:P}=Lr(),v=t!=null?t:u;return At.default.createElement(v,{Sider:r!=null?r:s,Header:a!=null?a:c,Footer:l!=null?l:p,Title:o!=null?o:f,OffLayoutArea:n!=null?n:P},e,At.default.createElement(Li,null))},Li=()=>{let{Prompt:e}=re(),t=H(),{warnWhen:r,setWarnWhen:a}=wr(),o=l=>(l.preventDefault(),l.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),l.returnValue);return(0,At.useEffect)(()=>(r&&window.addEventListener("beforeunload",o),window.removeEventListener("beforeunload",o)),[r]),At.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},ke=x(b("react")),qi=()=>{let e=he(),[t,r]=ke.default.useState(void 0);return ke.default.useEffect(()=>{t&&e(t)},[t]),ke.default.useCallback(a=>{t||r(a)},[t])};function Si({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:o}){var l,n,u,p,c;let s=X(),f=Boolean(s==null?void 0:s.isLegacy),P=mr({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy)}),v=V(),m=ye(),d=he(),i=qi(),{replace:g}=Pe(),{useLocation:C}=re(),{pathname:y,search:w}=C(),h=P.isLoading,E=s!=null&&s.isProvided?f?P.isSuccess:(l=P.data)==null?void 0:l.authenticated:!0,S=f?typeof e=="string"?e:"/login":typeof e=="string"?e:(n=P.data)==null?void 0:n.redirectTo;if(h)return o?ke.default.createElement(ke.default.Fragment,null,o):null;if(E)return ke.default.createElement(ke.default.Fragment,null,r!=null?r:null);if(typeof a>"u"){if(v==="legacy"){let L=t&&y?`?to=${encodeURIComponent(`${y}${w!=null?w:""}`)}`:"",M=y==null?void 0:y.split(/[?#]/)[0];!(M!=null&&M.includes("/login"))&&M!==e&&g(`/${(S!=null?S:"/login").replace(/^\//,"")}${L}`)}else{if(((u=m.pathname)==null?void 0:u.split(/[?#]/)[0])===S)return null;let L=(p=m.params)!=null&&p.to?(c=m.params)==null?void 0:c.to:d({to:m.pathname||"/",options:{keepQuery:!0},type:"path"});S&&i({to:`/${S.replace(/^\//,"")}`,query:L&&typeof L=="string"&&L.length>1?{to:L}:{}})}return null}return ke.default.createElement(ke.default.Fragment,null,a)}var Mi=b("react"),Po=()=>{let{useLocation:e}=re(),{checkAuth:t}=fe(),r=e();return(0,Mi.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},Ze=x(b("react")),Ni=({resource:e,action:t,params:r,fallback:a,children:o,...l})=>{let{data:n}=po({resource:e,action:t,params:r});return n!=null&&n.can?Ze.default.isValidElement(o)?Ze.default.cloneElement(o,l):Ze.default.createElement(Ze.default.Fragment,null,o):(n==null?void 0:n.can)===!1?Ze.default.createElement(Ze.default.Fragment,null,a!=null?a:null):null},Xe=x(b("react")),xi=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],Di=()=>((0,Xe.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),xi.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),Xe.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},Xe.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},Xe.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},Xe.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),Xe.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var It=Ee(b("react")),Wt=Ee(ht()),nt=b("react"),Pt=b("qs"),Ne=b("react-router-dom");var Mr=e=>{if(typeof e>"u")return e;let t=Number(e);return`${t}`===e?t:e};var Eo={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},ki={go:()=>{let{search:e,hash:t}=(0,Ne.useLocation)(),r=(0,Ne.useNavigate)();return(0,nt.useCallback)(({to:o,type:l,query:n,hash:u,options:{keepQuery:p,keepHash:c}={}})=>{let s={...p&&e&&(0,Pt.parse)(e,{ignoreQueryPrefix:!0}),...n};s.to&&(s.to=encodeURIComponent(`${s.to}`));let f=Object.keys(s).length>0,P=`#${(u||c&&t||"").replace(/^#/,"")}`,v=P.length>1,d=`${o||""}${f?(0,Pt.stringify)(s,Eo):""}${v?P:""}`;return l==="path"?d:r(d,{replace:l==="replace"})},[t,e,r])},back:()=>{let e=(0,Ne.useNavigate)();return(0,nt.useCallback)(()=>{e(-1)},[e])},parse:()=>{let e=(0,Ne.useParams)(),{pathname:t,search:r}=(0,Ne.useLocation)(),{resources:a}=(0,nt.useContext)(Wt.ResourceContext),{resource:o,action:l}=It.default.useMemo(()=>(0,Wt.matchResourceFromRoute)(t,a),[a,t]);return(0,nt.useCallback)(()=>{let u=(0,Pt.parse)(r,{ignoreQueryPrefix:!0}),p={...e,...u};return{...o&&{resource:o},...l&&{action:l},...(e==null?void 0:e.id)&&{id:decodeURIComponent(e.id)},pathname:t,params:{...p,current:Mr(p.current),pageSize:Mr(p.pageSize),to:p.to?decodeURIComponent(p.to):void 0}}},[t,r,e,o,l])},Link:It.default.forwardRef(function(t,r){return It.default.createElement(Ne.Link,{...t,ref:r})})};var xr=Ee(b("react")),Lo=Ee(ht());var Nr=Ee(b("react")),Co=b("react-router-dom"),$i=(e,t)=>{let{name:r,list:a,create:o,show:l,edit:n}=e;if(typeof a=="string"&&t==="list")return a;if(typeof a=="object"&&t==="list")return a.path;if(typeof o=="string"&&t==="create")return o;if(typeof o=="object"&&t==="create")return o.path;if(typeof l=="string"&&t==="show")return l;if(typeof l=="object"&&t==="show")return l.path;if(typeof n=="string"&&t==="edit")return n;if(typeof n=="object"&&t==="edit")return n.path;let u=`/${r}`,p=`${["edit","create","clone","show"].includes(t)?t:""}`,c=`${["edit","show","clone"].includes(t)?":id":""}`;return[u,p,c].filter(Boolean).join("/")},wo=e=>e.flatMap(r=>{let a=[];return["list","show","edit","create"].forEach(o=>{let l=r[o];if(typeof l<"u"&&typeof l!="string"){let n=typeof l=="function"?l:l.component,u=$i(r,o);a.push({action:o,element:n,path:u}),o==="create"&&a.push({action:"clone",element:n,path:u})}}),a.map(({action:o,element:l,path:n})=>{let u=Nr.default.createElement(l,null);return Nr.default.createElement(Co.Route,{key:`${o}-${n}`,path:n,element:u})})});var qo=b("react-router-dom"),Ai=({children:e})=>{let{resources:t}=(0,Lo.useResource)(),r=xr.default.useMemo(()=>wo(t),[t]);return e?e(r):xr.default.createElement(qo.Routes,null,r)};var Bt=Ee(ht()),So=Ee(b("react")),Mo=b("react-router-dom"),Ri=({resource:e,meta:t})=>{let r=(0,Bt.useGetToPath)(),{resource:a,resources:o}=(0,Bt.useResource)(e),l=a||o.find(n=>n.list);if(l){let n=r({resource:l,action:"list",meta:t});return n?So.default.createElement(Mo.Navigate,{to:n}):(console.warn("No resource is found to navigate to."),null)}else return console.warn("No resource is found to navigate to."),null};var Dr=Ee(b("react")),zt=Ee(ht());var lt=Ee(b("react")),No=b("react-router-dom");function Oi(e,t=!0){let{navigator:r}=lt.default.useContext(No.UNSAFE_NavigationContext);lt.default.useEffect(()=>{if(!t)return;let a=r.go,o=r.push;return r.push=(...l)=>{e()!==!1&&o(...l)},r.go=(...l)=>{e()!==!1&&a(...l)},()=>{r.push=o,r.go=a}},[r,e,t])}function xo(e,t=!0,r,a=!1){let o=lt.default.useCallback(n=>(n.preventDefault(),n.returnValue=e,n.returnValue),[e]);lt.default.useEffect(()=>(t&&!a&&window.addEventListener("beforeunload",o),()=>{window.removeEventListener("beforeunload",o)}),[o,t,a]);let l=lt.default.useCallback(()=>{let n=window.confirm(e);return n&&r&&r(),n},[e]);Oi(l,t)}var Do=b("react-router-dom"),Qi=({translationKey:e="warnWhenUnsavedChanges",message:t="Are you sure you want to leave? You have unsaved changes."})=>{let r=(0,zt.useTranslate)(),{pathname:a}=(0,Do.useLocation)(),{warnWhen:o,setWarnWhen:l}=(0,zt.useWarnAboutChange)();Dr.default.useEffect(()=>()=>l==null?void 0:l(!1),[a]);let n=Dr.default.useMemo(()=>r(e,t),[e,t,r]);return xo(n,o,()=>{l==null||l(!1)}),null};var ko=Ee(b("react")),Ht=b("react-router-dom"),Ui=({to:e})=>{let{pathname:t,search:r}=(0,Ht.useLocation)(),a=`${t}${r}`,o=a.length>1?`?to=${encodeURIComponent(a)}`:"";return ko.default.createElement(Ht.Navigate,{to:`${e}${o}`})};})();
//# sourceMappingURL=index.js.map