(()=>{var Mo=Object.create;var Or=Object.defineProperty;var Do=Object.getOwnPropertyDescriptor;var xo=Object.getOwnPropertyNames;var ko=Object.getPrototypeOf,No=Object.prototype.hasOwnProperty;var C=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var $o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Oo=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of xo(t))!No.call(e,n)&&n!==r&&Or(e,n,{get:()=>t[n],enumerable:!(a=Do(t,n))||a.enumerable});return e};var gt=(e,t,r)=>(r=e!=null?Mo(ko(e)):{},Oo(t||!e||!e.__esModule?Or(r,"default",{value:e,enumerable:!0}):r,e));var Sr=$o((Si,go)=>{var Ao=Object.create,Qt=Object.defineProperty,Ro=Object.getOwnPropertyDescriptor,Qo=Object.getOwnPropertyNames,Uo=Object.getPrototypeOf,Fo=Object.prototype.hasOwnProperty,Io=(e,t)=>{for(var r in t)Qt(e,r,{get:t[r],enumerable:!0})},Pa=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Qo(t))!Fo.call(e,n)&&n!==r&&Qt(e,n,{get:()=>t[n],enumerable:!(a=Ro(t,n))||a.enumerable});return e},x=(e,t,r)=>(r=e!=null?Ao(Uo(e)):{},Pa(t||!e||!e.__esModule?Qt(r,"default",{value:e,enumerable:!0}):r,e)),To=e=>Pa(Qt({},"__esModule",{value:!0}),e),ba={};Io(ba,{AuthPage:()=>ri,Authenticated:()=>gi,CanAccess:()=>hi,ErrorComponent:()=>Gl,GitHubBanner:()=>bi,LayoutWrapper:()=>vi,LoginPage:()=>mo,ReadyPage:()=>vo,Refine:()=>mi,ResourceContext:()=>bt,RouteChangeHandler:()=>fo,UndoableQueue:()=>po,WelcomePage:()=>ai,createTreeView:()=>vn,file2Base64:()=>on,getDefaultFilter:()=>an,getDefaultSortOrder:()=>rn,getNextPageParam:()=>Ua,getPreviousPageParam:()=>Fa,handleUseParams:()=>nn,importCSVMapper:()=>Da,legacyResourceTransform:()=>Ia,matchResourceFromRoute:()=>mn,parseTableParams:()=>pr,parseTableParamsFromQuery:()=>tn,pickNotDeprecated:()=>q,routeGenerator:()=>Aa,setInitialFilters:()=>ir,setInitialSorters:()=>ur,stringifyTableParams:()=>nr,unionFilters:()=>yt,unionSorters:()=>lr,useActiveAuthProvider:()=>re,useApiUrl:()=>$n,useAuthenticated:()=>Yo,useBack:()=>lo,useBreadcrumb:()=>Vl,useCan:()=>so,useCanWithoutCache:()=>Al,useCancelNotification:()=>nt,useCheckError:()=>Jo,useCreate:()=>Pr,useCreateMany:()=>Ha,useCustom:()=>An,useCustomMutation:()=>Qn,useDataProvider:()=>oe,useDelete:()=>Sn,useDeleteMany:()=>Nn,useExport:()=>gl,useForgotPassword:()=>qa,useForm:()=>yl,useGetIdentity:()=>La,useGetLocale:()=>il,useGetToPath:()=>wr,useGo:()=>Ee,useHandleNotification:()=>pe,useImport:()=>Cl,useInfiniteList:()=>Tn,useInvalidate:()=>Ge,useIsAuthenticated:()=>mr,useIsExistAuthentication:()=>Ma,useLink:()=>It,useList:()=>yr,useLiveMode:()=>_a,useLog:()=>Je,useLogList:()=>zl,useLogin:()=>cr,useLogout:()=>or,useMany:()=>Wa,useMenu:()=>Jl,useModal:()=>Ll,useMutationMode:()=>it,useNavigation:()=>Ce,useNotification:()=>Te,useOnError:()=>ve,useOne:()=>hr,useParse:()=>eo,useParsed:()=>be,usePermissions:()=>zo,usePublish:()=>Ye,useRedirectionAfterSubmission:()=>no,useRefineContext:()=>Lr,useRegister:()=>wa,useResource:()=>z,useResourceSubscription:()=>Pt,useResourceWithRoute:()=>Ft,useRouterContext:()=>ne,useRouterType:()=>G,useSelect:()=>Ul,useSetLocale:()=>ll,useShow:()=>Pl,useSubscription:()=>Hn,useSyncWithLocation:()=>oo,useTable:()=>Il,useTitle:()=>ml,useToPath:()=>ql,useTranslate:()=>_,useUpdate:()=>za,useUpdateMany:()=>xn,useUpdatePassword:()=>Sa,useWarnAboutChange:()=>Cr,userFriendlyResourceName:()=>fr});go.exports=To(ba);var Ke=x(C("react")),ot=x(C("react")),Ea=ot.default.createContext({}),Wo=({children:e,isProvided:t,...r})=>{let{replace:a}=Ce(),n=async f=>{var s;try{return await((s=r.login)==null?void 0:s.call(r,f))}catch(v){return Promise.reject(v)}},l=async f=>{var s;try{return await((s=r.register)==null?void 0:s.call(r,f))}catch(v){return Promise.reject(v)}},o=async f=>{var s;try{return await((s=r.logout)==null?void 0:s.call(r,f))}catch(v){return Promise.reject(v)}},d=async f=>{var s;try{return await((s=r.checkAuth)==null?void 0:s.call(r,f)),Promise.resolve()}catch(v){return v!=null&&v.redirectPath&&a(v.redirectPath),Promise.reject(v)}};return ot.default.createElement(Ea.Provider,{value:{...r,login:n,logout:o,checkAuth:d,register:l,isProvided:t}},e)},Ca=ot.default.createContext({}),Bo=({children:e,isProvided:t,...r})=>{let a=async s=>{var v;try{return await((v=r.login)==null?void 0:v.call(r,s))}catch(p){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",p),Promise.reject(p)}},n=async s=>{var v;try{return await((v=r.register)==null?void 0:v.call(r,s))}catch(p){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",p),Promise.reject(p)}},l=async s=>{var v;try{return await((v=r.logout)==null?void 0:v.call(r,s))}catch(p){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",p),Promise.reject(p)}},o=async s=>{var v;try{let p=await((v=r.check)==null?void 0:v.call(r,s));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",p),Promise.reject(p)}},d=async s=>{var v;try{let p=await((v=r.forgotPassword)==null?void 0:v.call(r,s));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",p),Promise.reject(p)}},f=async s=>{var v;try{let p=await((v=r.updatePassword)==null?void 0:v.call(r,s));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",p),Promise.reject(p)}};return ot.default.createElement(Ca.Provider,{value:{...r,login:a,logout:l,check:o,register:n,forgotPassword:d,updatePassword:f,isProvided:t}},e)},he=()=>ot.default.useContext(Ea),qe=()=>ot.default.useContext(Ca),Ar=C("@tanstack/react-query");function zo({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=he(),{getPermissions:a}=qe(),n=(0,Ar.useQuery)(["usePermissions"],a!=null?a:()=>Promise.resolve(void 0),{enabled:!e&&!!a,...e?{}:t}),l=(0,Ar.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?l:n}var Rr=C("@tanstack/react-query");function La({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=he(),{getIdentity:a}=qe(),n=(0,Rr.useQuery)(["getUserIdentity"],a!=null?a:()=>Promise.resolve({}),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t}),l=(0,Rr.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?l:n}var Qr=C("@tanstack/react-query"),Ho=C("@tanstack/react-query"),dr=()=>{let e=(0,Ho.useQueryClient)();return()=>{e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])}};function or({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=dr(),a=G(),n=Ee(),{push:l}=Ce(),{open:o,close:d}=Te(),{logout:f}=he(),{logout:s}=qe(),v=(0,Qr.useMutation)(["useLogout"],s,{onSuccess:(b,c)=>{let{success:m,error:u,redirectTo:i}=b,{redirectPath:g}=c!=null?c:{},P=g!=null?g:i;m&&(d==null||d("useLogout-error")),(u||!m)&&(o==null||o(Kt(u))),P!==!1&&(a==="legacy"?l(P!=null?P:"/login"):P&&n({to:P})),r()},onError:b=>{o==null||o(Kt(b))},...e===!0?{}:t}),p=(0,Qr.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],f,{onSuccess:(b,c)=>{var m;let u=(m=c==null?void 0:c.redirectPath)!=null?m:b;if(u!==!1){if(u){a==="legacy"?l(u):n({to:u});return}a==="legacy"?l("/login"):n({to:"/login"}),r()}},onError:b=>{o==null||o(Kt(b))},...e?t:{}});return e?p:v}var Kt=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),Ur=C("@tanstack/react-query"),jo=x(C("qs")),Ko=x(C("react"));function cr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=dr(),a=G(),n=Ee(),{replace:l}=Ce(),o=be(),{useLocation:d}=ne(),{search:f}=d(),{close:s,open:v}=Te(),{login:p}=he(),{login:b}=qe(),c=Ko.default.useMemo(()=>{var i;return a==="legacy"?jo.default.parse(f,{ignoreQueryPrefix:!0}).to:(i=o.params)==null?void 0:i.to},[a,o.params,f]),m=(0,Ur.useMutation)(["useLogin"],b,{onSuccess:({success:i,redirectTo:g,error:P})=>{i&&(s==null||s("login-error")),(P||!i)&&(v==null||v(_t(P))),c&&i?a==="legacy"?l(c):n({to:c,type:"replace"}):g?a==="legacy"?l(g):n({to:g,type:"replace"}):a==="legacy"&&l("/"),setTimeout(()=>{r()})},onError:i=>{v==null||v(_t(i))},...e===!0?{}:t}),u=(0,Ur.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],p,{onSuccess:i=>{c&&l(c),i!==!1&&!c&&(typeof i=="string"?a==="legacy"?l(i):n({to:i,type:"replace"}):a==="legacy"?l("/"):n({to:"/",type:"replace"})),s==null||s("login-error"),setTimeout(()=>{r()})},onError:i=>{v==null||v(_t(i))},...e?t:{}});return e?u:m}var _t=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),Fr=C("@tanstack/react-query");function wa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=dr(),a=G(),n=Ee(),{replace:l}=Ce(),{register:o}=he(),{register:d}=qe(),{close:f,open:s}=Te(),v=(0,Fr.useMutation)(["useRegister"],d,{onSuccess:({success:b,redirectTo:c,error:m})=>{b&&(f==null||f("register-error")),(m||!b)&&(s==null||s(Vt(m))),c?a==="legacy"?l(c):n({to:c,type:"replace"}):a==="legacy"&&l("/"),r()},onError:b=>{s==null||s(Vt(b))},...e===!0?{}:t}),p=(0,Fr.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],o,{onSuccess:b=>{b!==!1&&(b?a==="legacy"?l(b):n({to:b,type:"replace"}):a==="legacy"?l("/"):n({to:"/",type:"replace"}),f==null||f("register-error")),r()},onError:b=>{s==null||s(Vt(b))},...e?t:{}});return e?p:v}var Vt=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),Ir=C("@tanstack/react-query");function qa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=G(),a=Ee(),{replace:n}=Ce(),{forgotPassword:l}=he(),{forgotPassword:o}=qe(),{close:d,open:f}=Te(),s=(0,Ir.useMutation)(["useForgotPassword"],o,{onSuccess:({success:p,redirectTo:b,error:c})=>{p&&(d==null||d("forgot-password-error")),(c||!p)&&(f==null||f(Yt(c))),b&&(r==="legacy"?n(b):a({to:b,type:"replace"}))},onError:p=>{f==null||f(Yt(p))},...e===!0?{}:t}),v=(0,Ir.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],l,{onSuccess:p=>{p!==!1&&p&&(r==="legacy"?n(p):a({to:p,type:"replace"})),d==null||d("forgot-password-error")},onError:p=>{f==null||f(Yt(p))},...e?t:{}});return e?v:s}var Yt=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),_o=x(C("react")),Tr=C("@tanstack/react-query"),Vo=x(C("qs"));function Sa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=G(),a=Ee(),{replace:n}=Ce(),{updatePassword:l}=he(),{updatePassword:o}=qe(),{close:d,open:f}=Te(),s=be(),{useLocation:v}=ne(),{search:p}=v(),b=_o.default.useMemo(()=>{var u;if(r==="legacy"){let i=Vo.default.parse(p,{ignoreQueryPrefix:!0});return i!=null?i:{}}else return(u=s.params)!=null?u:{}},[p,s,r]),c=(0,Tr.useMutation)(["useUpdatePassword"],async u=>o==null?void 0:o({...b,...u}),{onSuccess:({success:u,redirectTo:i,error:g})=>{u&&(d==null||d("update-password-error")),(g||!u)&&(f==null||f(Jt(g))),i&&(r==="legacy"?n(i):a({to:i,type:"replace"}))},onError:u=>{f==null||f(Jt(u))},...e===!0?{}:t}),m=(0,Tr.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async u=>l==null?void 0:l({...b,...u}),{onSuccess:u=>{u!==!1&&u&&(r==="legacy"?n(u):a({to:u,type:"replace"})),d==null||d("update-password-error")},onError:u=>{f==null||f(Jt(u))},...e?t:{}});return e?m:c}var Jt=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),Wr=C("@tanstack/react-query");function mr({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=he(),{check:a}=qe(),n=(0,Wr.useQuery)(["useAuthenticated",t],async()=>{var o;return(o=await(a==null?void 0:a(t)))!=null?o:{}},{retry:!1,enabled:!e}),l=(0,Wr.useQuery)(["useAuthenticated","v3LegacyAuthProviderCompatible",t],async()=>{var o;return(o=await(r==null?void 0:r(t)))!=null?o:{}},{retry:!1,enabled:e});return e?l:n}var Yo=mr,Br=C("@tanstack/react-query");function ve({v3LegacyAuthProviderCompatible:e=!1}={}){let t=G(),r=Ee(),{replace:a}=Ce(),{checkError:n}=he(),{onError:l}=qe(),{mutate:o}=or({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:d}=or({v3LegacyAuthProviderCompatible:Boolean(e)}),f=(0,Br.useMutation)(["useCheckError"],l,{onSuccess:({logout:v,redirectTo:p})=>{if(v){d({redirectPath:p});return}if(p){t==="legacy"?a(p):r({to:p,type:"replace"});return}}}),s=(0,Br.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],n,{onError:v=>{o({redirectPath:v})}});return e?s:f}var Jo=ve,Ma=()=>{let{isProvided:e}=he(),{isProvided:t}=qe();return Boolean(t||e)},Go=C("@tanstack/react-query"),Gt=e=>e/1e3,Xo=x(C("lodash/zip")),Zo=x(C("lodash/fromPairs")),Da=(e,t=r=>r)=>{let[r,...a]=e;return a.map(n=>(0,Zo.default)((0,Xo.default)(r,n))).map((n,l,o)=>t.call(void 0,n,l,o))},zr=x(C("pluralize")),vr=x(C("qs")),xa=x(C("lodash/unionWith")),ka=x(C("lodash/differenceWith")),en=x(C("warn-once")),pr=e=>{var t;let{current:r,pageSize:a,sorter:n,sorters:l,filters:o}=vr.default.parse(e.substring(1));return{parsedCurrent:r&&Number(r),parsedPageSize:a&&Number(a),parsedSorter:(t=q(l,n))!=null?t:[],parsedFilters:o!=null?o:[]}},tn=e=>{let t=vr.default.stringify(e);return pr(`/${t}`)},nr=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:n,filters:l,...o}=e;return vr.default.stringify({...o,...r||{},sorters:q(n,a),filters:l},t)},Na=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,$a=(e,t)=>e.field==t.field,yt=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,en.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,xa.default)(e,t,r,Na).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),lr=(e,t)=>(0,xa.default)(e,t,$a).filter(r=>r.order!==void 0&&r.order!==null),ir=(e,t)=>[...(0,ka.default)(t,e,Na),...e],ur=(e,t)=>[...(0,ka.default)(t,e,$a),...e],rn=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},an=(e,t,r="eq")=>{let a=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:l,field:o}=n;return o===e&&l===r}});if(a)return a.value||[]},on=e=>new Promise((t,r)=>{let a=new FileReader,n=()=>{a.result&&(a.removeEventListener("load",n,!1),t(a.result))};a.addEventListener("load",n,!1),a.readAsDataURL(e.originFileObj),a.onerror=l=>(a.removeEventListener("load",n,!1),r(l))}),fr=(e="",t)=>{let r=$t(e);return t==="singular"?zr.default.singular(r):zr.default.plural(r)},nn=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,q=(...e)=>e.find(t=>typeof t<"u"),Pe=(e,t,r,a)=>{let n=t||"default",l={all:[n],resourceAll:[n,e||""],list:o=>[...l.resourceAll,"list",{...o,...q(r,a)||{}}],many:o=>[...l.resourceAll,"getMany",o&&o.map(String),{...q(r,a)||{}}].filter(d=>d!==void 0),detail:o=>[...l.resourceAll,"detail",o==null?void 0:o.toString(),{...q(r,a)||{}}],logList:o=>["logList",e,o,a].filter(d=>d!==void 0)};return l},ln=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),gr=e=>e.startsWith(":"),at=e=>e.split("/").filter(t=>t!==""),un=(e,t)=>{let r=at(e),a=at(t);return r.length===a.length},Oe=e=>e.replace(/^\/|\/$/g,""),sn=(e,t)=>{let r=Oe(e),a=Oe(t);if(!un(r,a))return!1;let n=at(r);return at(a).every((l,o)=>gr(l)||l===n[o])},dn=(e,t,r)=>{let a=Oe(r||""),n=`${a}${a?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`},Fe=(e,t)=>{var r,a;let n=q((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!n)return;let l=t.find(o=>{var d;return((d=o.identifier)!=null?d:o.name)===n});return l!=null?l:{name:n}},Oa=(e,t,r)=>{let a=[],n=Fe(e,t);for(;n;)a.push(n),n=Fe(n,t);if(a.length!==0)return`/${a.reverse().map(l=>{var o,d;let f=r&&(d=(o=l.options)==null?void 0:o.route)!=null?d:l.name;return Oe(f)}).join("/")}`},me=(e,t,r)=>{let a=[],n=["list","show","edit","create","clone"],l=Oa(e,t,r);return n.forEach(o=>{var d,f,s,v;let p=r&&o==="clone"?e.create:e[o],b;typeof p=="function"||r?b=dn(r&&(v=(s=(d=e.meta)==null?void 0:d.route)!=null?s:(f=e.options)==null?void 0:f.route)!=null?v:e.name,o,r?l:void 0):typeof p=="string"?b=p:typeof p=="object"&&(b=p.path),b&&a.push({action:o,resource:e,route:`/${b.replace(/^\//,"")}`})}),a},cn=e=>{var t,r;if(e.length===0)return;if(e.length===1)return e[0];let a=e.map(o=>({...o,splitted:at(Oe(o.route))})),n=(r=(t=a[0])==null?void 0:t.splitted.length)!=null?r:0,l=[...a];for(let o=0;o<n;o++){let d=l.filter(f=>!gr(f.splitted[o]));if(d.length!==0){if(d.length===1){l=d;break}l=d}}return l[0]},mn=(e,t)=>{let r=t.flatMap(n=>me(n,t)).filter(n=>sn(e,n.route)),a=cn(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},Aa=(e,t)=>{var r,a,n;let l,o=Oa(e,t,!0);if(o){let d=q(e.meta,e.options);l=`${o}/${(r=d==null?void 0:d.route)!=null?r:e.name}`}else l=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;return`/${l.replace(/^\//,"")}`},vn=e=>{var t,r,a;let n=[],l={},o={},d,f;for(let s=0;s<e.length;s++){d=e[s];let v=(a=(r=d.route)!=null?r:(t=q(d==null?void 0:d.meta,d.options))==null?void 0:t.route)!=null?a:"";l[v]=d,l[v].children=[],o[d.name]=d,o[d.name].children=[]}for(let s in l)l.hasOwnProperty(s)&&(f=l[s],f.parentName&&o[f.parentName]?o[f.parentName].children.push(f):n.push(f));return n},$t=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Ra=x(C("react")),pn=x(C("react")),Qa=({children:e})=>pn.default.createElement("div",null,e),Ne={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Ie=Ra.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Qa,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Ne}),fn=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:n,children:l,DashboardPage:o,Title:d,Layout:f=Qa,Header:s,Sider:v,Footer:p,OffLayoutArea:b,LoginPage:c=mo,catchAll:m,liveMode:u="off",onLiveEvent:i,options:g})=>Ra.default.createElement(Ie.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:d,undoableTimeout:n,Layout:f,Header:s,Sider:v,Footer:p,OffLayoutArea:b,DashboardPage:o,LoginPage:c,catchAll:m,liveMode:u,onLiveEvent:i,options:g}},l),gn=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:n,reactQueryDevtoolConfig:l,syncWithLocation:o,undoableTimeout:d,warnWhenUnsavedChanges:f}={})=>{var s,v,p,b,c,m,u,i,g,P,y,L,h,E,S,w,M,D,$,F,A,O,Q,k;let R={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(v=(s=e==null?void 0:e.mutationMode)!=null?s:a)!=null?v:Ne.mutationMode,undoableTimeout:(b=(p=e==null?void 0:e.undoableTimeout)!=null?p:d)!=null?b:Ne.undoableTimeout,syncWithLocation:(m=(c=e==null?void 0:e.syncWithLocation)!=null?c:o)!=null?m:Ne.syncWithLocation,warnWhenUnsavedChanges:(i=(u=e==null?void 0:e.warnWhenUnsavedChanges)!=null?u:f)!=null?i:Ne.warnWhenUnsavedChanges,liveMode:(P=(g=e==null?void 0:e.liveMode)!=null?g:r)!=null?P:Ne.liveMode,redirect:{afterCreate:(L=(y=e==null?void 0:e.redirect)==null?void 0:y.afterCreate)!=null?L:Ne.redirect.afterCreate,afterClone:(E=(h=e==null?void 0:e.redirect)==null?void 0:h.afterClone)!=null?E:Ne.redirect.afterClone,afterEdit:(w=(S=e==null?void 0:e.redirect)==null?void 0:S.afterEdit)!=null?w:Ne.redirect.afterEdit}},U=(D=(M=e==null?void 0:e.disableTelemetry)!=null?M:t)!=null?D:!1,ee={clientConfig:(A=(F=($=e==null?void 0:e.reactQuery)==null?void 0:$.clientConfig)!=null?F:n)!=null?A:{},devtoolConfig:(k=(Q=(O=e==null?void 0:e.reactQuery)==null?void 0:O.devtoolConfig)!=null?Q:l)!=null?k:{}};return{optionsWithDefaults:R,disableTelemetryWithDefault:U,reactQueryWithDefaults:ee}},yn=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},Hr=async(e,t,r)=>{let a=[];for(let[n,l]of e.entries())try{let o=await l();a.push(t(o,n))}catch(o){a.push(r(o,n))}return a},J=(e,t=[],r=!1)=>{if(!!e)return r?t.find(n=>{var l;return Oe((l=n.route)!=null?l:"")===Oe(e)})||t.find(n=>n.name===e):t.find(a=>{var n;return((n=a.identifier)!=null?n:a.name)===e})},T=(e,t,r)=>{if(t)return t;let a=J(e,r),n=q(a==null?void 0:a.meta,a==null?void 0:a.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"},Ut=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),Ua=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,l=Math.ceil((e.total||0)/n);return a<l?Number(a)+1:void 0},Fa=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},Ia=e=>{let t=[];return e==null||e.forEach(r=>{var a;t.push({...r,label:(a=r.options)==null?void 0:a.label,route:Aa(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},hn=e=>at(Oe(e)).flatMap(t=>gr(t)?[t.slice(1)]:[]),Pn=(e,t={},r={})=>e.reduce((a,n)=>{var l;let o=r[n]||((l=t.params)==null?void 0:l[n])||(n==="id"?t.id:void 0)||(n==="action"?t.action:void 0)||(n==="resource"?t.resource:void 0);return typeof o<"u"&&(a[n]=o),a},{}),ye=(e,t={},r={})=>{let a=hn(e),n=Pn(a,t,r);return e.replace(/:([^\/]+)/g,(l,o)=>{let d=n[o];return typeof d<"u"?`${d}`:l})},re=()=>{let e=he(),t=qe();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},Ta=({hasPagination:e,pagination:t,configPagination:r}={})=>{var a,n,l;let o=e===!1?"off":"server",d=(a=t==null?void 0:t.mode)!=null?a:o,f=(n=q(t==null?void 0:t.current,r==null?void 0:r.current))!=null?n:1,s=(l=q(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?l:10;return{current:f,pageSize:s,mode:d}},yr=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:l,queryOptions:o,successNotification:d,errorNotification:f,meta:s,metaData:v,liveMode:p,onLiveEvent:b,liveParams:c,dataProviderName:m})=>{let{resources:u}=z(),i=oe(),g=_(),P=re(),{mutate:y}=ve({v3LegacyAuthProviderCompatible:Boolean(P==null?void 0:P.isLegacy)}),L=pe(),h=T(e,m,u),E=q(s,v),S=q(r,t==null?void 0:t.filters),w=q(l,t==null?void 0:t.sort),M=q(a,t==null?void 0:t.hasPagination),D=Ta({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:M}),$=D.mode==="server",F={meta:E,metaData:E,filters:S,hasPagination:$,pagination:D,sorters:w,config:{...t,sort:w}},A=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,O=Pe(e,h,E,E),{getList:Q}=i(h);return Pt({resource:e,types:["*"],params:{meta:E,metaData:E,pagination:D,hasPagination:$,sort:w,sorters:w,filters:S,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:A,liveMode:p,onLiveEvent:b}),(0,Go.useQuery)(O.list({filters:S,hasPagination:$,...$&&{pagination:D},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:R,signal:U})=>Q({resource:e,pagination:D,hasPagination:$,filters:S,sort:w,sorters:w,meta:{...E||{},queryContext:{queryKey:k,pageParam:R,signal:U}},metaData:{...E||{},queryContext:{queryKey:k,pageParam:R,signal:U}}}),{...o,enabled:typeof(o==null?void 0:o.enabled)<"u"?o==null?void 0:o.enabled:!!e,select:k=>{var R;let U=k,{current:ee,mode:fe,pageSize:X}=D;return fe==="client"&&(U={...U,data:U.data.slice((ee-1)*X,ee*X),total:U.total}),o!=null&&o.select?(R=o==null?void 0:o.select)==null?void 0:R.call(o,U):U},onSuccess:k=>{var R;(R=o==null?void 0:o.onSuccess)==null||R.call(o,k);let U=typeof d=="function"?d(k,F,e):d;L(U)},onError:k=>{var R;y(k),(R=o==null?void 0:o.onError)==null||R.call(o,k);let U=typeof f=="function"?f(k,F,e):f;L(U,{key:`${e}-useList-notification`,message:g("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}})},bn=C("@tanstack/react-query"),hr=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:n,meta:l,metaData:o,liveMode:d,onLiveEvent:f,liveParams:s,dataProviderName:v})=>{let{resources:p}=z(),b=oe(),c=Pe(e,T(e,v,p),q(l,o),q(l,o)),{getOne:m}=b(T(e,v,p)),u=_(),i=re(),{mutate:g}=ve({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),P=pe();return Pt({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:q(l,o),metaData:q(l,o),subscriptionType:"useOne",...s},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:d,onLiveEvent:f}),(0,bn.useQuery)(c.detail(t),({queryKey:y,pageParam:L,signal:h})=>m({resource:e,id:t,meta:{...q(l,o)||{},queryContext:{queryKey:y,pageParam:L,signal:h}},metaData:{...q(l,o)||{},queryContext:{queryKey:y,pageParam:L,signal:h}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:y=>{var L;(L=r==null?void 0:r.onSuccess)==null||L.call(r,y);let h=typeof a=="function"?a(y,{id:t,...q(l,o)||{}},e):a;P(h)},onError:y=>{var L;g(y),(L=r==null?void 0:r.onError)==null||L.call(r,y);let h=typeof n=="function"?n(y,{id:t,...q(l,o)||{}},e):n;P(h,{key:`${t}-${e}-getOne-notification`,message:u("notifications.error",{statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}})},En=C("@tanstack/react-query"),Wa=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:n,meta:l,metaData:o,liveMode:d,onLiveEvent:f,liveParams:s,dataProviderName:v})=>{let{resources:p}=z(),b=oe(),c=Pe(e,T(e,v,p),q(l,o),q(l,o)),{getMany:m,getOne:u}=b(T(e,v,p)),i=_(),g=re(),{mutate:P}=ve({v3LegacyAuthProviderCompatible:Boolean(g==null?void 0:g.isLegacy)}),y=pe(),L=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Pt({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:q(l,o),metaData:q(l,o),subscriptionType:"useMany",...s},channel:`resources/${e}`,enabled:L,liveMode:d,onLiveEvent:f}),(0,En.useQuery)(c.many(t),({queryKey:h,pageParam:E,signal:S})=>m?m({resource:e,ids:t,metaData:{...q(l,o)||{},queryContext:{queryKey:h,pageParam:E,signal:S}}}):Ut(t.map(w=>u({resource:e,id:w,metaData:{...q(l,o)||{},queryContext:{queryKey:h,pageParam:E,signal:S}}}))),{...r,onSuccess:h=>{var E;(E=r==null?void 0:r.onSuccess)==null||E.call(r,h);let S=typeof a=="function"?a(h,t,e):a;y(S)},onError:h=>{var E;P(h),(E=r==null?void 0:r.onError)==null||E.call(r,h);let S=typeof n=="function"?n(h,t,e):n;y(S,{key:`${t[0]}-${e}-getMany-notification`,message:i("notifications.error",{statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}})},jr=C("@tanstack/react-query"),Ot=x(C("react")),Xt=x(C("lodash/isEqual")),Ba=Ot.default.createContext({notifications:[],notificationDispatch:()=>!1}),Cn=[],Ln=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,Xt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,Xt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,Xt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},wn=({children:e})=>{let[t,r]=(0,Ot.useReducer)(Ln,Cn),a={notifications:t,notificationDispatch:r};return Ot.default.createElement(Ba.Provider,{value:a},e,typeof window<"u"&&t.map(n=>Ot.default.createElement(po,{key:`${n.id}-${n.resource}-queue`,notification:n})))},Kr=x(C("pluralize")),za=({mutationOptions:e}={})=>{let{resources:t}=z(),r=(0,jr.useQueryClient)(),a=oe(),{mutationMode:n,undoableTimeout:l}=it(),o=_(),d=re(),{mutate:f}=ve({v3LegacyAuthProviderCompatible:Boolean(d==null?void 0:d.isLegacy)}),s=Ye(),{log:v}=Je(),{notificationDispatch:p}=nt(),b=pe(),c=Ge();return(0,jr.useMutation)(({id:m,values:u,resource:i,mutationMode:g,undoableTimeout:P,onCancel:y,meta:L,metaData:h,dataProviderName:E})=>{let S=g!=null?g:n,w=P!=null?P:l;return S!=="undoable"?a(T(i,E,t)).update({resource:i,id:m,variables:u,meta:q(L,h),metaData:q(L,h)}):new Promise((M,D)=>{let $=()=>{a(T(i,E,t)).update({resource:i,id:m,variables:u,meta:q(L,h),metaData:q(L,h)}).then(A=>M(A)).catch(A=>D(A))},F=()=>{D({message:"mutationCancelled"})};y&&y(F),p({type:"ADD",payload:{id:m,resource:i,cancelMutation:F,doMutation:$,seconds:w,isSilent:!!y}})})},{onMutate:async({resource:m,id:u,mutationMode:i,values:g,dataProviderName:P})=>{let y=Pe(m,T(m,P,t)),L=r.getQueriesData(y.resourceAll),h=i!=null?i:n;return await r.cancelQueries(y.resourceAll,void 0,{silent:!0}),h!=="pessimistic"&&(r.setQueriesData(y.list(),E=>{if(!E)return null;let S=E.data.map(w=>{var M;return((M=w.id)==null?void 0:M.toString())===(u==null?void 0:u.toString())?{id:u,...w,...g}:w});return{...E,data:S}}),r.setQueriesData(y.many(),E=>{if(!E)return null;let S=E.data.map(w=>{var M;return((M=w.id)==null?void 0:M.toString())===(u==null?void 0:u.toString())&&(w={id:u,...w,...g}),w});return{...E,data:S}}),r.setQueriesData(y.detail(u),E=>E?{...E,data:{...E.data,...g}}:null)),{previousQueries:L,queryKey:y}},onSettled:(m,u,{id:i,resource:g,dataProviderName:P,invalidates:y=["list","many","detail"]})=>{c({resource:g,dataProviderName:T(g,P,t),invalidates:y,id:i}),p({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(m,{id:u,resource:i,successNotification:g,dataProviderName:P,values:y,meta:L,metaData:h},E)=>{var S;let w=Kr.default.singular(i),M=typeof g=="function"?g(m,{id:u,values:y},i):g;b(M,{key:`${u}-${i}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${i}.${i}`,w)},`Successfully updated ${w}`),type:"success"}),s==null||s({channel:`resources/${i}`,type:"updated",payload:{ids:(S=m.data)!=null&&S.id?[m.data.id]:void 0},date:new Date});let D;if(E){let Q=r.getQueryData(E.queryKey.detail(u));D=Object.keys(y||{}).reduce((k,R)=>{var U;return k[R]=(U=Q==null?void 0:Q.data)==null?void 0:U[R],k},{})}let{fields:$,operation:F,variables:A,...O}=q(L,h)||{};v==null||v.mutate({action:"update",resource:i,data:y,previousData:D,meta:{id:u,dataProviderName:T(i,P,t),...O}})},onError:(m,{id:u,resource:i,errorNotification:g,values:P},y)=>{if(y)for(let L of y.previousQueries)r.setQueryData(L[0],L[1]);if(m.message!=="mutationCancelled"){f==null||f(m);let L=Kr.default.singular(i),h=typeof g=="function"?g(m,{id:u,values:P},i):g;b(h,{key:`${u}-${i}-notification`,message:o("notifications.editError",{resource:o(`${i}.${i}`,L),statusCode:m.statusCode},`Error when updating ${L} (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},qn=C("@tanstack/react-query"),_r=x(C("pluralize")),Pr=({mutationOptions:e}={})=>{let t=re(),{mutate:r}=ve({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=oe(),n=Ge(),{resources:l}=z(),o=_(),d=Ye(),{log:f}=Je(),s=pe();return(0,qn.useMutation)(({resource:v,values:p,meta:b,metaData:c,dataProviderName:m})=>a(T(v,m,l)).create({resource:v,variables:p,meta:q(b,c),metaData:q(b,c)}),{onSuccess:(v,{resource:p,successNotification:b,dataProviderName:c,invalidates:m=["list","many"],values:u,meta:i,metaData:g})=>{var P,y,L;let h=_r.default.singular(p),E=typeof b=="function"?b(v,u,p):b;s(E,{key:`create-${p}-notification`,message:o("notifications.createSuccess",{resource:o(`${p}.${p}`,h)},`Successfully created ${h}`),description:o("notifications.success","Success"),type:"success"}),n({resource:p,dataProviderName:T(p,c,l),invalidates:m}),d==null||d({channel:`resources/${p}`,type:"created",payload:{ids:(P=v==null?void 0:v.data)!=null&&P.id?[v.data.id]:void 0},date:new Date});let{fields:S,operation:w,variables:M,...D}=q(i,g)||{};f==null||f.mutate({action:"create",resource:p,data:u,meta:{dataProviderName:T(p,c,l),id:(L=(y=v==null?void 0:v.data)==null?void 0:y.id)!=null?L:void 0,...D}})},onError:(v,{resource:p,errorNotification:b,values:c})=>{r(v);let m=_r.default.singular(p),u=typeof b=="function"?b(v,c,p):b;s(u,{key:`create-${p}-notification`,description:v.message,message:o("notifications.createError",{resource:o(`${p}.${p}`,m),statusCode:v.statusCode},`There was an error creating ${m} (status code: ${v.statusCode})`),type:"error"})},...e})},Vr=C("@tanstack/react-query"),Yr=x(C("pluralize")),Sn=({mutationOptions:e}={})=>{let t=re(),{mutate:r}=ve({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=oe(),{resources:n}=z(),l=(0,Vr.useQueryClient)(),{mutationMode:o,undoableTimeout:d}=it(),{notificationDispatch:f}=nt(),s=_(),v=Ye(),{log:p}=Je(),b=pe(),c=Ge();return(0,Vr.useMutation)(({id:m,mutationMode:u,undoableTimeout:i,resource:g,onCancel:P,meta:y,metaData:L,dataProviderName:h,values:E})=>{let S=u!=null?u:o,w=i!=null?i:d;return S!=="undoable"?a(T(g,h,n)).deleteOne({resource:g,id:m,meta:q(y,L),metaData:q(y,L),variables:E}):new Promise((M,D)=>{let $=()=>{a(T(g,h,n)).deleteOne({resource:g,id:m,meta:q(y,L),variables:E}).then(A=>M(A)).catch(A=>D(A))},F=()=>{D({message:"mutationCancelled"})};P&&P(F),f({type:"ADD",payload:{id:m,resource:g,cancelMutation:F,doMutation:$,seconds:w,isSilent:!!P}})})},{onMutate:async({id:m,resource:u,mutationMode:i,dataProviderName:g})=>{let P=Pe(u,T(u,g,n)),y=i!=null?i:o;await l.cancelQueries(P.resourceAll,void 0,{silent:!0});let L=l.getQueriesData(P.resourceAll);return y!=="pessimistic"&&(l.setQueriesData(P.list(),h=>h?{data:h.data.filter(E=>{var S;return((S=E.id)==null?void 0:S.toString())!==m.toString()}),total:h.total-1}:null),l.setQueriesData(P.many(),h=>{if(!h)return null;let E=h.data.filter(S=>{var w;return((w=S.id)==null?void 0:w.toString())!==(m==null?void 0:m.toString())});return{...h,data:E}})),{previousQueries:L,queryKey:P}},onSettled:(m,u,{id:i,resource:g,dataProviderName:P,invalidates:y=["list","many"]})=>{c({resource:g,dataProviderName:T(g,P,n),invalidates:y}),f({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(m,{id:u,resource:i,successNotification:g,dataProviderName:P,meta:y,metaData:L},h)=>{let E=Yr.default.singular(i!=null?i:"");l.removeQueries(h==null?void 0:h.queryKey.detail(u));let S=typeof g=="function"?g(m,u,i):g;b(S,{key:`${u}-${i}-notification`,description:s("notifications.success","Success"),message:s("notifications.deleteSuccess",{resource:s(`${i}.${i}`,E)},`Successfully deleted a ${E}`),type:"success"}),v==null||v({channel:`resources/${i}`,type:"deleted",payload:{ids:u?[u]:[]},date:new Date});let{fields:w,operation:M,variables:D,...$}=q(y,L)||{};p==null||p.mutate({action:"delete",resource:i,meta:{id:u,dataProviderName:T(i,P,n),...$}}),l.removeQueries(h==null?void 0:h.queryKey.detail(u))},onError:(m,{id:u,resource:i,errorNotification:g},P)=>{if(P)for(let y of P.previousQueries)l.setQueryData(y[0],y[1]);if(m.message!=="mutationCancelled"){r(m);let y=Yr.default.singular(i!=null?i:""),L=typeof g=="function"?g(m,u,i):g;b(L,{key:`${u}-${i}-notification`,message:s("notifications.deleteError",{resource:y,statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},Mn=C("@tanstack/react-query"),Dn=x(C("pluralize")),Ha=({mutationOptions:e}={})=>{let t=oe(),{resources:r}=z(),a=_(),n=Ye(),l=pe(),o=Ge(),{log:d}=Je();return(0,Mn.useMutation)(({resource:f,values:s,meta:v,metaData:p,dataProviderName:b})=>{let c=t(T(f,b,r));return c.createMany?c.createMany({resource:f,variables:s,meta:q(v,p),metaData:q(v,p)}):Ut(s.map(m=>c.create({resource:f,variables:m,meta:q(v,p),metaData:q(v,p)})))},{onSuccess:(f,{resource:s,successNotification:v,dataProviderName:p,invalidates:b=["list","many"],values:c,meta:m,metaData:u})=>{let i=Dn.default.plural(s),g=typeof v=="function"?v(f,c,s):v;l(g,{key:`createMany-${s}-notification`,message:a("notifications.createSuccess",{resource:a(`${s}.${s}`,s)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),o({resource:s,dataProviderName:T(s,p,r),invalidates:b});let P=f==null?void 0:f.data.filter(S=>(S==null?void 0:S.id)!==void 0).map(S=>S.id);n==null||n({channel:`resources/${s}`,type:"created",payload:{ids:P},date:new Date});let{fields:y,operation:L,variables:h,...E}=q(m,u)||{};d==null||d.mutate({action:"createMany",resource:s,data:c,meta:{dataProviderName:T(s,p,r),ids:P,...E}})},onError:(f,{resource:s,errorNotification:v,values:p})=>{let b=typeof v=="function"?v(f,p,s):v;l(b,{key:`createMany-${s}-notification`,description:f.message,message:a("notifications.createError",{resource:a(`${s}.${s}`,s),statusCode:f.statusCode},`There was an error creating ${s} (status code: ${f.statusCode}`),type:"error"})},...e})},Jr=C("@tanstack/react-query"),Gr=x(C("pluralize")),xn=({mutationOptions:e}={})=>{let{resources:t}=z(),r=(0,Jr.useQueryClient)(),a=oe(),n=_(),{mutationMode:l,undoableTimeout:o}=it(),d=re(),{mutate:f}=ve({v3LegacyAuthProviderCompatible:Boolean(d==null?void 0:d.isLegacy)}),{notificationDispatch:s}=nt(),v=Ye(),p=pe(),b=Ge(),{log:c}=Je();return(0,Jr.useMutation)(({ids:m,values:u,resource:i,onCancel:g,mutationMode:P,undoableTimeout:y,meta:L,metaData:h,dataProviderName:E})=>{let S=P!=null?P:l,w=y!=null?y:o,M=a(T(i,E,t)),D=()=>M.updateMany?M.updateMany({resource:i,ids:m,variables:u,meta:q(L,h),metaData:q(L,h)}):Ut(m.map($=>M.update({resource:i,id:$,variables:u,meta:q(L,h),metaData:q(L,h)})));return S!=="undoable"?D():new Promise(($,F)=>{let A=()=>{D().then(Q=>$(Q)).catch(Q=>F(Q))},O=()=>{F({message:"mutationCancelled"})};g&&g(O),s({type:"ADD",payload:{id:m,resource:i,cancelMutation:O,doMutation:A,seconds:w,isSilent:!!g}})})},{onMutate:async({resource:m,ids:u,values:i,mutationMode:g,dataProviderName:P,meta:y,metaData:L})=>{let h=Pe(m,T(m,P,t),q(y,L),q(y,L)),E=g!=null?g:l;await r.cancelQueries(h.resourceAll,void 0,{silent:!0});let S=r.getQueriesData(h.resourceAll);if(E!=="pessimistic"){r.setQueriesData(h.list(),w=>{if(!w)return null;let M=w.data.map(D=>D.id!==void 0&&u.filter($=>$!==void 0).map(String).includes(D.id.toString())?{...D,...i}:D);return{...w,data:M}}),r.setQueriesData(h.many(),w=>{if(!w)return null;let M=w.data.map(D=>D.id!==void 0&&u.filter($=>$!==void 0).map(String).includes(D.id.toString())?{...D,...i}:D);return{...w,data:M}});for(let w of u)r.setQueriesData(h.detail(w),M=>{if(!M)return null;let D={...M.data,...i};return{...M,data:D}})}return{previousQueries:S,queryKey:h}},onSettled:(m,u,{ids:i,resource:g,dataProviderName:P})=>{b({resource:g,invalidates:["list","many"],dataProviderName:T(g,P,t)}),i.forEach(y=>b({resource:g,invalidates:["detail"],dataProviderName:T(g,P,t),id:y})),s({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(m,{ids:u,resource:i,meta:g,metaData:P,dataProviderName:y,successNotification:L,values:h},E)=>{let S=Gr.default.singular(i),w=typeof L=="function"?L(m,{ids:u,values:h},i):L;p(w,{key:`${u}-${i}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${i}.${i}`,i)},`Successfully updated ${S}`),type:"success"}),v==null||v({channel:`resources/${i}`,type:"updated",payload:{ids:u.map(String)},date:new Date});let M=[];E&&u.forEach(O=>{let Q=r.getQueryData(E.queryKey.detail(O));M.push(Object.keys(h||{}).reduce((k,R)=>{var U;return k[R]=(U=Q==null?void 0:Q.data)==null?void 0:U[R],k},{}))});let{fields:D,operation:$,variables:F,...A}=q(g,P)||{};c==null||c.mutate({action:"updateMany",resource:i,data:h,previousData:M,meta:{ids:u,dataProviderName:T(i,y,t),...A}})},onError:(m,{ids:u,resource:i,errorNotification:g,values:P},y)=>{if(y)for(let L of y.previousQueries)r.setQueryData(L[0],L[1]);if(m.message!=="mutationCancelled"){f==null||f(m);let L=Gr.default.singular(i),h=typeof g=="function"?g(m,{ids:u,values:P},i):g;p(h,{key:`${u}-${i}-updateMany-error-notification`,message:n("notifications.editError",{resource:L,statusCode:m.statusCode},`Error when updating ${L} (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},Xr=C("@tanstack/react-query"),kn=x(C("pluralize")),Nn=({mutationOptions:e}={})=>{let t=re(),{mutate:r}=ve({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:a,undoableTimeout:n}=it(),l=oe(),{notificationDispatch:o}=nt(),d=_(),f=Ye(),s=pe(),v=Ge(),{log:p}=Je(),{resources:b}=z(),c=(0,Xr.useQueryClient)();return(0,Xr.useMutation)(({resource:m,ids:u,mutationMode:i,undoableTimeout:g,onCancel:P,meta:y,metaData:L,dataProviderName:h,values:E})=>{let S=i!=null?i:a,w=g!=null?g:n,M=l(T(m,h,b)),D=()=>M.deleteMany?M.deleteMany({resource:m,ids:u,meta:q(y,L),metaData:q(y,L),variables:E}):Ut(u.map($=>M.deleteOne({resource:m,id:$,meta:q(y,L),metaData:q(y,L),variables:E})));return S!=="undoable"?D():new Promise(($,F)=>{let A=()=>{D().then(Q=>$(Q)).catch(Q=>F(Q))},O=()=>{F({message:"mutationCancelled"})};P&&P(O),o({type:"ADD",payload:{id:u,resource:m,cancelMutation:O,doMutation:A,seconds:w,isSilent:!!P}})})},{onMutate:async({ids:m,resource:u,mutationMode:i,dataProviderName:g})=>{let P=Pe(u,T(u,g,b)),y=i!=null?i:a;await c.cancelQueries(P.resourceAll,void 0,{silent:!0});let L=c.getQueriesData(P.resourceAll);if(y!=="pessimistic"){c.setQueriesData(P.list(),h=>h?{data:h.data.filter(E=>E.id&&!m.map(String).includes(E.id.toString())),total:h.total-1}:null),c.setQueriesData(P.many(),h=>{if(!h)return null;let E=h.data.filter(S=>S.id?!m.map(String).includes(S.id.toString()):!1);return{...h,data:E}});for(let h of m)c.setQueriesData(P.detail(h),E=>!E||E.data.id==h?null:{...E})}return{previousQueries:L,queryKey:P}},onSettled:(m,u,{resource:i,ids:g,dataProviderName:P,invalidates:y=["list","many"]})=>{v({resource:i,dataProviderName:T(i,P,b),invalidates:y}),o({type:"REMOVE",payload:{id:g,resource:i}})},onSuccess:(m,{ids:u,resource:i,meta:g,metaData:P,dataProviderName:y,successNotification:L},h)=>{u.forEach($=>c.removeQueries(h==null?void 0:h.queryKey.detail($)));let E=typeof L=="function"?L(m,u,i):L;s(E,{key:`${u}-${i}-notification`,description:d("notifications.success","Success"),message:d("notifications.deleteSuccess",{resource:d(`${i}.${i}`,i)},`Successfully deleted ${i}`),type:"success"}),f==null||f({channel:`resources/${i}`,type:"deleted",payload:{ids:u},date:new Date});let{fields:S,operation:w,variables:M,...D}=q(g,P)||{};p==null||p.mutate({action:"deleteMany",resource:i,meta:{ids:u,dataProviderName:T(i,y,b),...D}}),u.forEach($=>c.removeQueries(h==null?void 0:h.queryKey.detail($)))},onError:(m,{ids:u,resource:i,errorNotification:g},P)=>{if(P)for(let y of P.previousQueries)c.setQueryData(y[0],y[1]);if(m.message!=="mutationCancelled"){r(m);let y=kn.default.singular(i),L=typeof g=="function"?g(m,u,i):g;s(L,{key:`${u}-${i}-notification`,message:d("notifications.deleteError",{resource:y,statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})},$n=e=>{let t=oe(),{getApiUrl:r}=t(e);return r()},On=C("@tanstack/react-query"),An=({url:e,method:t,config:r,queryOptions:a,successNotification:n,errorNotification:l,meta:o,metaData:d,dataProviderName:f})=>{let s=oe(),{custom:v}=s(f),p=re(),{mutate:b}=ve({v3LegacyAuthProviderCompatible:Boolean(p==null?void 0:p.isLegacy)}),c=_(),m=pe();if(v)return(0,On.useQuery)([f,"custom",t,e,{...r,...q(o,d)||{}}],({queryKey:u,pageParam:i,signal:g})=>v({url:e,method:t,...r,metaData:{...q(o,d)||{},queryContext:{queryKey:u,pageParam:i,signal:g}}}),{...a,onSuccess:u=>{var i;(i=a==null?void 0:a.onSuccess)==null||i.call(a,u);let g=typeof n=="function"?n(u,{...r,...q(o,d)||{}}):n;m(g)},onError:u=>{var i;b(u),(i=a==null?void 0:a.onError)==null||i.call(a,u);let g=typeof l=="function"?l(u,{...r,...q(o,d)||{}}):l;m(g,{key:`${t}-notification`,message:c("notifications.error",{statusCode:u.statusCode},`Error (status code: ${u.statusCode})`),description:u.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},Rn=C("@tanstack/react-query"),Qn=({mutationOptions:e}={})=>{let t=re(),{mutate:r}=ve({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=pe(),n=oe(),l=_();return(0,Rn.useMutation)(({url:o,method:d,values:f,meta:s,metaData:v,dataProviderName:p,config:b})=>{let{custom:c}=n(p);if(c)return c({url:o,method:d,payload:f,meta:q(s,v),metaData:q(s,v),headers:{...b==null?void 0:b.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(o,{successNotification:d,config:f,meta:s,metaData:v})=>{let p=typeof d=="function"?d(o,{...f,...q(s,v)||{}}):d;a(p)},onError:(o,{errorNotification:d,method:f,config:s,meta:v,metaData:p})=>{r(o);let b=typeof d=="function"?d(o,{...s,...q(v,p)||{}}):d;a(b,{key:`${f}-notification`,message:l("notifications.error",{statusCode:o.statusCode},`Error (status code: ${o.statusCode})`),description:o.message,type:"error"})},...e})},Zr=C("react"),ja=x(C("react")),Un=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),br=ja.default.createContext(Un()),Fn=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},ja.default.createElement(br.Provider,{value:r},e)},oe=()=>{let e=(0,Zr.useContext)(br);return(0,Zr.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},In=C("@tanstack/react-query"),Tn=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:l,queryOptions:o,successNotification:d,errorNotification:f,meta:s,metaData:v,liveMode:p,onLiveEvent:b,liveParams:c,dataProviderName:m})=>{let{resources:u}=z(),i=oe(),g=_(),P=re(),{mutate:y}=ve({v3LegacyAuthProviderCompatible:Boolean(P==null?void 0:P.isLegacy)}),L=pe(),h=T(e,m,u),E=q(s,v),S=q(r,t==null?void 0:t.filters),w=q(l,t==null?void 0:t.sort),M=q(a,t==null?void 0:t.hasPagination),D=Ta({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:M}),$=D.mode==="server",F={meta:E,metaData:E,filters:S,hasPagination:$,pagination:D,sorters:w,config:{...t,sort:w}},A=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,O=Pe(e,h,E,E),{getList:Q}=i(h);return Pt({resource:e,types:["*"],params:{meta:E,metaData:E,pagination:D,hasPagination:$,sort:w,sorters:w,filters:S,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:A,liveMode:p,onLiveEvent:b}),(0,In.useInfiniteQuery)(O.list({filters:S,hasPagination:$,...$&&{pagination:D},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:R,signal:U})=>{let ee={...D,current:R};return Q({resource:e,pagination:ee,hasPagination:$,filters:S,sort:w,sorters:w,meta:{...E||{},queryContext:{queryKey:k,pageParam:R,signal:U}},metaData:{...E||{},queryContext:{queryKey:k,pageParam:R,signal:U}}}).then(({data:fe,total:X,...j})=>({data:fe,total:X,pagination:ee,...j}))},{getNextPageParam:k=>Ua(k),getPreviousPageParam:k=>Fa(k),...o,onSuccess:k=>{var R;(R=o==null?void 0:o.onSuccess)==null||R.call(o,k);let U=typeof d=="function"?d(k,F,e):d;L(U)},onError:k=>{var R;y(k),(R=o==null?void 0:o.onError)==null||R.call(o,k);let U=typeof f=="function"?f(k,F,e):f;L(U,{key:`${e}-useInfiniteList-notification`,message:g("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}})},Zt=C("react"),Wn=C("@tanstack/react-query"),Ka=x(C("react")),ht=Ka.default.createContext(void 0),Bn=({liveProvider:e,children:t})=>Ka.default.createElement(ht.Provider,{value:e},t),Pt=({resource:e,params:t,channel:r,types:a,enabled:n=!0,liveMode:l,onLiveEvent:o})=>{let d=(0,Wn.useQueryClient)(),f=Pe(e),s=(0,Zt.useContext)(ht),{liveMode:v,onLiveEvent:p}=(0,Zt.useContext)(Ie),b=l!=null?l:v;(0,Zt.useEffect)(()=>{let c;return b&&b!=="off"&&n&&(c=s==null?void 0:s.subscribe({channel:r,params:{resource:e,...t},types:a,callback:m=>{b==="auto"&&d.invalidateQueries(f.resourceAll),o==null||o(m),p==null||p(m)}})),()=>{c&&(s==null||s.unsubscribe(c))}},[n])},zn=C("react"),_a=e=>{let{liveMode:t}=(0,zn.useContext)(Ie);return e!=null?e:t},ea=C("react"),Hn=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:n})=>{let l=(0,ea.useContext)(ht);(0,ea.useEffect)(()=>{let o;return a&&(o=l==null?void 0:l.subscribe({channel:t,params:e,types:r,callback:n})),()=>{o&&(l==null||l.unsubscribe(o))}},[a])},jn=C("react"),Ye=()=>{let e=(0,jn.useContext)(ht);return e==null?void 0:e.publish},Kn=C("react"),Va=x(C("react")),_n=C("react"),Vn=C("react"),Yn=x(C("lodash/isEqual")),Jn=e=>{let t=(0,Vn.useRef)(e);return(0,Yn.default)(t.current,e)||(t.current=e),t.current},Ya=(e,t)=>{let r=Jn(t);return(0,_n.useMemo)(e,r)},bt=Va.default.createContext({resources:[]}),Gn=({resources:e,children:t})=>{let r=Ya(()=>Ia(e!=null?e:[]),[e]);return Va.default.createElement(bt.Provider,{value:{resources:r}},t)},Ja=x(C("react")),Ga=Ja.default.createContext("new"),Xn=Ga.Provider,G=()=>Ja.default.useContext(Ga),Zn=x(C("react")),Xa=x(C("react")),Za={},Et=(0,Xa.createContext)(Za),el=({children:e,router:t})=>Xa.default.createElement(Et.Provider,{value:t!=null?t:Za},e),ta=x(C("react")),eo=()=>{let e=(0,ta.useContext)(Et);return ta.default.useMemo(()=>{var t;return(t=e==null?void 0:e.parse)!=null?t:()=>()=>({})},[e==null?void 0:e.parse])()},be=()=>{let e=eo();return Zn.default.useMemo(()=>e(),[e])};function z(e){var t,r;let{resources:a}=(0,Kn.useContext)(bt),n=G(),l=be(),o={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},d=Ft(),{useParams:f}=ne(),s=f();if(n==="legacy"){let b=o.resourceNameOrRouteName?o.resourceNameOrRouteName:s.resource,c=b?d(b):void 0,m=(t=o==null?void 0:o.recordItemId)!=null?t:s.id,u=s.action,i=(r=o==null?void 0:o.resourceName)!=null?r:c==null?void 0:c.name;return{resources:a,resource:c,resourceName:i,id:m,action:u}}let v,p=typeof e=="string"?e:o==null?void 0:o.resourceNameOrRouteName;if(p){let b=J(p,a);b?v=b:v={name:p}}else l!=null&&l.resource&&(v=l.resource);return{resources:a,resource:v,resourceName:v==null?void 0:v.name,id:l.id,action:l.action}}var ra=C("react"),Ft=()=>{let{resources:e}=(0,ra.useContext)(bt);return(0,ra.useCallback)(t=>J(t,e,!0)||{name:t,route:t},[e])},tl=C("react"),nt=()=>{let{notifications:e,notificationDispatch:t}=(0,tl.useContext)(Ba);return{notifications:e,notificationDispatch:t}},rl=C("react"),to=x(C("react")),Er=(0,to.createContext)({}),al=({open:e,close:t,children:r})=>to.default.createElement(Er.Provider,{value:{open:e,close:t}},r),Te=()=>{let{open:e,close:t}=(0,rl.useContext)(Er);return{open:e,close:t}},ol=C("react"),pe=()=>{let{open:e}=Te();return(0,ol.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},aa=C("react"),ro=x(C("react")),lt=ro.default.createContext({}),nl=({children:e,i18nProvider:t})=>ro.default.createElement(lt.Provider,{value:{i18nProvider:t}},e),ll=()=>{let{i18nProvider:e}=(0,aa.useContext)(lt);return(0,aa.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},oa=C("react"),_=()=>{let{i18nProvider:e}=(0,oa.useContext)(lt);return(0,oa.useMemo)(()=>{function t(r,a,n){var l,o;return(o=(l=e==null?void 0:e.translate(r,a,n))!=null?l:n)!=null?o:typeof a=="string"&&typeof n>"u"?a:r}return t},[e])},na=C("react"),il=()=>{let{i18nProvider:e}=(0,na.useContext)(lt);return(0,na.useCallback)(()=>e==null?void 0:e.getLocale(),[])},ul=C("react"),it=()=>{let{mutationMode:e,undoableTimeout:t}=(0,ul.useContext)(Ie);return{mutationMode:e,undoableTimeout:t}},la=C("react"),sr=x(C("react")),ao=sr.default.createContext({}),sl=({children:e})=>{let[t,r]=(0,sr.useState)(!1);return sr.default.createElement(ao.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},Cr=()=>{let{warnWhenUnsavedChanges:e}=(0,la.useContext)(Ie),{warnWhen:t,setWarnWhen:r}=(0,la.useContext)(ao);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},dl=C("react"),oo=()=>{let{syncWithLocation:e}=(0,dl.useContext)(Ie);return{syncWithLocation:e}},cl=C("react"),ml=()=>{let{Title:e}=(0,cl.useContext)(Ie);return e},vl=C("react"),Lr=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:l,hasDashboard:o,mutationMode:d,syncWithLocation:f,undoableTimeout:s,warnWhenUnsavedChanges:v,DashboardPage:p,LoginPage:b,catchAll:c,options:m}=(0,vl.useContext)(Ie);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:l,hasDashboard:o,mutationMode:d,syncWithLocation:f,undoableTimeout:s,warnWhenUnsavedChanges:v,DashboardPage:p,LoginPage:b,catchAll:c,options:m}},pl=C("react"),fl=C("export-to-csv-fix-source-map"),gl=({resourceName:e,resource:t,sorter:r,sorters:a,filters:n,maxItemCount:l,pageSize:o=20,mapData:d=c=>c,exportOptions:f,meta:s,metaData:v,dataProviderName:p,onError:b}={})=>{var c;let[m,u]=(0,pl.useState)(!1),i=oe(),{resource:g,resources:P}=z(),y=`${fr(g==null?void 0:g.name,"plural")}-${new Date().toLocaleString()}`,{getList:L}=i(T((c=g==null?void 0:g.identifier)!=null?c:g==null?void 0:g.name,p,P));return{isLoading:m,triggerExport:async()=>{var h;u(!0);let E=[],S=1,w=!0;for(;w;)try{let{data:M,total:D}=await L({resource:(h=g==null?void 0:g.name)!=null?h:"",filters:n,sort:q(a,r),sorters:q(a,r),pagination:{current:S,pageSize:o,mode:"server"},meta:q(s,v),metaData:q(s,v)});S++,E.push(...M),l&&E.length>=l&&(E=E.slice(0,l),w=!1),D===E.length&&(w=!1)}catch(M){u(!1),w=!1,b==null||b(M);return}new fl.ExportToCsv({filename:y,useKeysAsHeaders:!0,...f}).generateCsv(E.map(d)),u(!1)}}},ia=x(C("react")),yl=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:n,redirect:l,successNotification:o,errorNotification:d,meta:f,metaData:s,mutationMode:v,liveMode:p,onLiveEvent:b,liveParams:c,undoableTimeout:m,dataProviderName:u,invalidates:i,queryOptions:g,createMutationOptions:P,updateMutationOptions:y}={})=>{let{options:L}=Lr(),{resources:h}=z(),E=G(),{resource:S,id:w,action:M}=be(),{useParams:D}=ne(),{resource:$,action:F,id:A}=D(),O=typeof S=="string"?S:S==null?void 0:S.name,Q=!e||e===(E==="legacy"?$:O)?r!=null?r:E==="legacy"?A:w:r,[k,R]=ia.default.useState(Q);ia.default.useEffect(()=>{Q!==k&&R(r)},[r]);let U=e!=null?e:E==="legacy"?$:O,ee=E==="legacy"?F:M,fe=t!=null?t:ee==="edit"||ee==="clone"?ee:"create",X=Ft(),j;if(E==="legacy")U&&(j=X(U));else if(e){let K=J(e,h);K?j=K:j={name:e,route:e}}else if(typeof S=="string"){let K=J(S,h);K?j=K:j={name:S,route:S}}else j=S;let{mutationMode:le}=it(),Se=v!=null?v:le,We=fe==="create",Z=fe==="edit",ae=fe==="clone",dt=yn({redirectFromProps:l,action:fe,redirectOptions:L.redirect}),Ht=k!==void 0&&(Z||ae),Ct=hr({resource:j==null?void 0:j.name,id:k!=null?k:"",queryOptions:{enabled:Ht,...g},liveMode:p,onLiveEvent:b,liveParams:c,meta:q(f,s),metaData:q(f,s),dataProviderName:u}),{isFetching:ct}=Ct,mt=Pr({mutationOptions:P}),{mutate:Lt,isLoading:Me}=mt,vt=za({mutationOptions:y}),{mutate:Re,isLoading:jt}=vt,{setWarnWhen:Be}=Cr(),Qe=no();return{...We||ae?{formLoading:ct||Me,mutationResult:mt,onFinish:async K=>{Be(!1);let ie=De=>{Qe({redirect:dt,resource:j,id:De,meta:s})};return Se!=="pessimistic"&&setTimeout(()=>{ie()}),new Promise((De,ze)=>{if(Se!=="pessimistic"&&De(),!!j)return Lt({values:K,resource:j.name,successNotification:o,errorNotification:d,meta:q(f,s),metaData:q(f,s),dataProviderName:u,invalidates:i},{onSuccess:(Le,xe,ue)=>{var ke;a&&a(Le,K,ue);let He=(ke=Le==null?void 0:Le.data)==null?void 0:ke.id;ie(He),De(Le)},onError:(Le,xe,ue)=>{if(n)return n(Le,K,ue);ze()}})})}}:{formLoading:ct||jt,mutationResult:vt,onFinish:async K=>{if(Be(!1),!j)return;let ie={id:k!=null?k:"",values:K,resource:j.name,mutationMode:Se,undoableTimeout:m,successNotification:o,errorNotification:d,meta:q(f,s),metaData:q(f,s),dataProviderName:u,invalidates:i},De=()=>{R(Q),Qe({redirect:dt,resource:j,id:k,meta:s})};return Se!=="pessimistic"&&setTimeout(()=>{De()}),new Promise((ze,Le)=>(Se!=="pessimistic"&&ze(),setTimeout(()=>{Re(ie,{onSuccess:(xe,ue,ke)=>{a&&a(xe,K,ke),Se==="pessimistic"&&De(),ze(xe)},onError:(xe,ue,ke)=>{if(n)return n(xe,K,ke);Le()}})})))}},queryResult:Ct,id:k,setId:R,redirect:(K,ie)=>{Qe({redirect:K!==void 0?K:Z?"list":"edit",resource:j,id:ie!=null?ie:k,meta:s})}}},hl=C("react"),no=()=>{let{show:e,edit:t,list:r,create:a}=Ce();return(0,hl.useCallback)(({redirect:n,resource:l,id:o,meta:d={}})=>{if(n&&l)return!!l.show&&n==="show"&&o?e(l,o,void 0,d):!!l.edit&&n==="edit"&&o?t(l,o,void 0,d):!!l.create&&n==="create"?a(l,void 0,d):r(l,"push",d)},[])},ua=x(C("react")),Ee=()=>{let e=(0,ua.useContext)(Et);return ua.default.useMemo(()=>{var t;return(t=e==null?void 0:e.go)!=null?t:()=>()=>{}},[e==null?void 0:e.go])()},sa=x(C("react")),lo=()=>{let e=(0,sa.useContext)(Et);return sa.default.useMemo(()=>{var t;return(t=e==null?void 0:e.back)!=null?t:()=>()=>{}},[e==null?void 0:e.back])()},Ce=()=>{let{resources:e}=z(),t=G(),{useHistory:r}=ne(),a=r(),n=be(),l=Ee(),o=lo(),d=(c,m="push")=>{t==="legacy"?a[m](c):l({to:c,type:m})},f=(c,m={})=>{var u,i,g;if(t==="legacy"){let P=typeof c=="string"?(u=J(c,e,!0))!=null?u:{name:c,route:c}:c,y=me(P,e,!0).find(L=>L.action==="create");return y?ye(y.route,n,m):""}else{let P=typeof c=="string"?(i=J(c,e))!=null?i:{name:c}:c,y=(g=me(P,e).find(L=>L.action==="create"))==null?void 0:g.route;return y?l({to:ye(y,n,m),type:"path"}):""}},s=(c,m,u={})=>{var i,g,P;let y=encodeURIComponent(m);if(t==="legacy"){let L=typeof c=="string"?(i=J(c,e,!0))!=null?i:{name:c,route:c}:c,h=me(L,e,!0).find(E=>E.action==="edit");return h?ye(h.route,n,{...u,id:y}):""}else{let L=typeof c=="string"?(g=J(c,e))!=null?g:{name:c}:c,h=(P=me(L,e).find(E=>E.action==="edit"))==null?void 0:P.route;return h?l({to:ye(h,n,{...u,id:y}),type:"path"}):""}},v=(c,m,u={})=>{var i,g,P;let y=encodeURIComponent(m);if(t==="legacy"){let L=typeof c=="string"?(i=J(c,e,!0))!=null?i:{name:c,route:c}:c,h=me(L,e,!0).find(E=>E.action==="clone");return h?ye(h.route,n,{...u,id:y}):""}else{let L=typeof c=="string"?(g=J(c,e))!=null?g:{name:c}:c,h=(P=me(L,e).find(E=>E.action==="clone"))==null?void 0:P.route;return h?l({to:ye(h,n,{...u,id:y}),type:"path"}):""}},p=(c,m,u={})=>{var i,g,P;let y=encodeURIComponent(m);if(t==="legacy"){let L=typeof c=="string"?(i=J(c,e,!0))!=null?i:{name:c,route:c}:c,h=me(L,e,!0).find(E=>E.action==="show");return h?ye(h.route,n,{...u,id:y}):""}else{let L=typeof c=="string"?(g=J(c,e))!=null?g:{name:c}:c,h=(P=me(L,e).find(E=>E.action==="show"))==null?void 0:P.route;return h?l({to:ye(h,n,{...u,id:y}),type:"path"}):""}},b=(c,m={})=>{var u,i,g;if(t==="legacy"){let P=typeof c=="string"?(u=J(c,e,!0))!=null?u:{name:c,route:c}:c,y=me(P,e,!0).find(L=>L.action==="list");return y?ye(y.route,n,m):""}else{let P=typeof c=="string"?(i=J(c,e))!=null?i:{name:c}:c,y=(g=me(P,e).find(L=>L.action==="list"))==null?void 0:g.route;return y?l({to:ye(y,n,m),type:"path"}):""}};return{create:(c,m="push",u={})=>{d(f(c,u),m)},createUrl:f,edit:(c,m,u="push",i={})=>{d(s(c,m,i),u)},editUrl:s,clone:(c,m,u="push",i={})=>{d(v(c,m,i),u)},cloneUrl:v,show:(c,m,u="push",i={})=>{d(p(c,m,i),u)},showUrl:p,list:(c,m="push",u={})=>{d(b(c,u),m)},listUrl:b,push:(c,...m)=>{t==="legacy"?a.push(c,...m):l({to:c,type:"push"})},replace:(c,...m)=>{t==="legacy"?a.replace(c,...m):l({to:c,type:"replace"})},goBack:()=>{t==="legacy"?a.goBack():o()}}},da=x(C("react")),Pl=({resource:e,id:t,successNotification:r,errorNotification:a,meta:n,metaData:l,liveMode:o,onLiveEvent:d,dataProviderName:f,queryOptions:s}={})=>{let v=G(),{resources:p}=z(),{useParams:b}=ne(),{resource:c,id:m}=be(),{resource:u,id:i}=b(),g=c==null?void 0:c.name,P=!e||e===(v==="legacy"?u:g)?t!=null?t:v==="legacy"?i:m:t,[y,L]=(0,da.useState)(P);da.default.useEffect(()=>{P!==y&&L(P)},[P]);let h=e!=null?e:v==="legacy"?u:g,E,S=Ft();if(v==="legacy")h&&(E=S(h));else if(e){let w=J(e,p);w?E=w:E={name:e,route:e}}else if(typeof c=="string"){let w=J(c,p);w?E=w:E={name:c,route:c}}else E=c;return{queryResult:hr({resource:E==null?void 0:E.name,id:y!=null?y:"",queryOptions:{enabled:y!==void 0,...s},successNotification:r,errorNotification:a,meta:q(n,l),metaData:q(n,l),liveMode:o,onLiveEvent:d,dataProviderName:f}),showId:y,setShowId:L}},Dt=C("react"),bl=C("papaparse"),El=x(C("lodash/chunk")),Cl=({resourceName:e,resource:t,mapData:r=v=>v,paparseOptions:a,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:l,meta:o,metaData:d,onProgress:f,dataProviderName:s}={})=>{let[v,p]=(0,Dt.useState)(0),[b,c]=(0,Dt.useState)(0),[m,u]=(0,Dt.useState)(!1),{resource:i}=z(t!=null?t:e),g=Ha(),P=Pr(),y;n===1?y=P:y=g;let L=()=>{c(0),p(0),u(!1)},h=S=>{let w={succeeded:S.filter(M=>M.type==="success"),errored:S.filter(M=>M.type==="error")};l==null||l(w),u(!1)};(0,Dt.useEffect)(()=>{f==null||f({totalAmount:b,processedAmount:v})},[b,v]);let E=({file:S})=>(L(),new Promise(w=>{u(!0),(0,bl.parse)(S,{complete:async({data:M})=>{let D=Da(M,r);if(c(D.length),n===1){let $=D.map(A=>async()=>{var O;return{response:await P.mutateAsync({resource:(O=i==null?void 0:i.name)!=null?O:"",values:A,successNotification:!1,errorNotification:!1,dataProviderName:s,meta:q(o,d),metaData:q(o,d)}),value:A}}),F=await Hr($,({response:A,value:O})=>(p(Q=>Q+1),{response:[A.data],type:"success",request:[O]}),(A,O)=>({response:[A],type:"error",request:[D[O]]}));w(F)}else{let $=(0,El.default)(D,n),F=$.map(O=>async()=>{var Q;return{response:await g.mutateAsync({resource:(Q=i==null?void 0:i.name)!=null?Q:"",values:O,successNotification:!1,errorNotification:!1,dataProviderName:s,meta:q(o,d),metaData:q(o,d)}),value:O,currentBatchLength:O.length}}),A=await Hr(F,({response:O,currentBatchLength:Q,value:k})=>(p(R=>R+Q),{response:O.data,type:"success",request:k}),(O,Q)=>({response:[O],type:"error",request:$[Q]}));w(A)}},...a})}).then(w=>(h(w),w)));return{inputProps:{type:"file",accept:".csv",onChange:S=>{S.target.files&&S.target.files.length>0&&E({file:S.target.files[0]})}},mutationResult:y,isLoading:m,handleChange:E}},er=C("react"),Ll=({defaultVisible:e=!1}={})=>{let[t,r]=(0,er.useState)(e),a=(0,er.useCallback)(()=>r(!0),[t]),n=(0,er.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:n}},wl=x(C("react")),wr=()=>{let e=G(),{resource:t,resources:r}=z(),a=be();return wl.default.useCallback(({resource:n,action:l,meta:o})=>{var d;let f=n||t;if(!f)return;let s=(d=me(f,r,e==="legacy").find(v=>v.action===l))==null?void 0:d.route;return s?ye(s,a,o):void 0},[r,t,a])},ql=({resource:e,action:t,meta:r,legacy:a})=>wr()({resource:e,action:t,meta:r,legacy:a}),ca=x(C("react")),It=()=>{let e=(0,ca.useContext)(Et);return e!=null&&e.Link?e.Link:({to:t,...r})=>ca.default.createElement("a",{href:t,...r})},Sl=C("react"),io=x(C("react")),Ue={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Ml=io.default.createContext(Ue),qr=Ml,Dl=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o})=>io.default.createElement(qr.Provider,{value:{useHistory:t!=null?t:Ue.useHistory,useLocation:r!=null?r:Ue.useLocation,useParams:a!=null?a:Ue.useParams,Prompt:n!=null?n:Ue.Prompt,Link:l!=null?l:Ue.Link,routes:o!=null?o:Ue.routes}},e),ne=()=>{let e=(0,Sl.useContext)(qr),{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o}=e!=null?e:Ue;return{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o}},xl=C("react"),kl=C("@tanstack/react-query"),uo=x(C("react")),Tt=uo.default.createContext({}),Nl=({can:e,children:t})=>uo.default.createElement(Tt.Provider,{value:{can:e}},t),$l=e=>{let{icon:t,list:r,edit:a,create:n,show:l,clone:o,children:d,meta:f,options:s,...v}=e,{icon:p,...b}=f!=null?f:{},{icon:c,...m}=s!=null?s:{};return{...v,...f?{meta:b}:{},...s?{options:m}:{}}},so=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:n}=(0,xl.useContext)(Tt),{resource:l,...o}=r!=null?r:{},d=$l(l!=null?l:{}),f=(0,kl.useQuery)(["useCan",{action:e,resource:t,params:{...o,resource:d},enabled:a==null?void 0:a.enabled}],()=>{var s;return(s=n==null?void 0:n({action:e,resource:t,params:r}))!=null?s:Promise.resolve({can:!0})},{enabled:typeof n<"u",...a,retry:!1});return typeof n>"u"?{data:{can:!0}}:f},Ol=C("react"),Al=()=>{let{can:e}=(0,Ol.useContext)(Tt);return{can:e}},Ze=C("react"),Rl=x(C("lodash/uniqBy")),Ql=x(C("lodash/debounce")),xt=x(C("lodash/get")),Ul=e=>{var t,r,a;let[n,l]=(0,Ze.useState)([]),[o,d]=(0,Ze.useState)([]),[f,s]=(0,Ze.useState)([]),{resource:v,sort:p,sorters:b,filters:c=[],optionLabel:m="title",optionValue:u="id",debounce:i=300,successNotification:g,errorNotification:P,defaultValueQueryOptions:y,queryOptions:L,fetchSize:h,pagination:E,hasPagination:S=!1,liveMode:w,defaultValue:M=[],onLiveEvent:D,onSearch:$,liveParams:F,meta:A,metaData:O,dataProviderName:Q}=e,{resources:k}=z(),R=J(v,k),U=(t=R==null?void 0:R.name)!=null?t:v,ee=Array.isArray(M)?M:[M],fe=(0,Ze.useCallback)(Z=>{s(Z.data.map(ae=>({label:(0,xt.default)(ae,m),value:(0,xt.default)(ae,u)})))},[m,u]),X=y!=null?y:L,j=Wa({resource:U,ids:ee,queryOptions:{...X,enabled:ee.length>0&&((r=y==null?void 0:y.enabled)!=null?r:!0),onSuccess:Z=>{var ae;fe(Z),(ae=X==null?void 0:X.onSuccess)==null||ae.call(X,Z)}},meta:q(A,O),metaData:q(A,O),liveMode:"off",dataProviderName:Q}),le=(0,Ze.useCallback)(Z=>{d(Z.data.map(ae=>({label:(0,xt.default)(ae,m),value:(0,xt.default)(ae,u)})))},[m,u]),Se=yr({resource:U,sorters:q(b,p),filters:c.concat(n),pagination:{current:E==null?void 0:E.current,pageSize:(a=E==null?void 0:E.pageSize)!=null?a:h,mode:E==null?void 0:E.mode},hasPagination:S,queryOptions:{...L,onSuccess:Z=>{var ae;le(Z),(ae=L==null?void 0:L.onSuccess)==null||ae.call(L,Z)}},successNotification:g,errorNotification:P,meta:q(A,O),metaData:q(A,O),liveMode:w,liveParams:F,onLiveEvent:D,dataProviderName:Q}),We=Z=>{if($){l($(Z));return}if(Z)l([{field:m,operator:"contains",value:Z}]);else{l([]);return}};return{queryResult:Se,defaultValueQueryResult:j,options:(0,Ze.useMemo)(()=>(0,Rl.default)([...o,...f],"value"),[o,f]),onSearch:(0,Ql.default)(We,i)}},_e=x(C("react")),ma=x(C("qs")),kt=x(C("lodash/differenceWith")),Nt=x(C("lodash/isEqual")),Fl=x(C("warn-once")),va=[],pa=[];function Il({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:n,permanentSorter:l=pa,defaultSetFilterBehavior:o,initialFilter:d,permanentFilter:f=va,filters:s,sorters:v,syncWithLocation:p,resource:b,successNotification:c,errorNotification:m,queryOptions:u,liveMode:i,onLiveEvent:g,liveParams:P,meta:y,metaData:L,dataProviderName:h}={}){var E,S,w,M,D,$,F,A,O,Q;let{syncWithLocation:k}=oo(),R=p!=null?p:k,U=_a(i),ee=G(),{useLocation:fe}=ne(),{search:X,pathname:j}=fe(),le=be(),Se=r===!1?"off":"server",We=((E=a==null?void 0:a.mode)!=null?E:Se)!=="off",Z=q(a==null?void 0:a.current,e),ae=q(a==null?void 0:a.pageSize,t),dt=q(y,L),{parsedCurrent:Ht,parsedPageSize:Ct,parsedSorter:ct,parsedFilters:mt}=pr(X!=null?X:"?"),Lt=q(s==null?void 0:s.initial,d),Me=(S=q(s==null?void 0:s.permanent,f))!=null?S:va,vt=q(v==null?void 0:v.initial,n),Re=(w=q(v==null?void 0:v.permanent,l))!=null?w:pa,jt=(M=q(s==null?void 0:s.defaultBehavior,o))!=null?M:"merge",Be,Qe,K,ie;R?(Be=((D=le==null?void 0:le.params)==null?void 0:D.current)||Ht||Z||1,Qe=(($=le==null?void 0:le.params)==null?void 0:$.pageSize)||Ct||ae||10,K=((F=le==null?void 0:le.params)==null?void 0:F.sorters)||(ct.length?ct:vt),ie=((A=le==null?void 0:le.params)==null?void 0:A.filters)||(mt.length?mt:Lt)):(Be=Z||1,Qe=ae||10,K=vt,ie=Lt);let{replace:De}=Ce(),ze=Ee(),{resource:Le}=z(b),xe=Le==null?void 0:Le.name;_e.default.useEffect(()=>{(0,Fl.default)(typeof xe>"u","useTable: `resource` is not defined.")},[xe]);let[ue,ke]=(0,_e.useState)(ur(Re,K!=null?K:[])),[He,wt]=(0,_e.useState)(ir(Me,ie!=null?ie:[])),[pt,Mr]=(0,_e.useState)(Be),[je,Dr]=(0,_e.useState)(Qe),Co=({pagination:{current:V,pageSize:ge},sorter:qt,filters:St})=>{var Mt;if(ee==="new")return(Mt=ze({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...We?{current:V,pageSize:ge}:{},sorters:qt,filters:St,...xr()}}))!=null?Mt:"";{let ft=ma.default.parse(X==null?void 0:X.substring(1)),$r=nr({pagination:{pageSize:ge,current:V},sorters:ue!=null?ue:qt,filters:St,...ft});return`${j!=null?j:""}?${$r!=null?$r:""}`}};(0,_e.useEffect)(()=>{X===""&&(Mr(Be),Dr(Qe),ke(ur(Re,K!=null?K:[])),wt(ir(Me,ie!=null?ie:[])))},[X]);let xr=()=>{var V;if(ee==="new"){let{sorters:ge,filters:qt,pageSize:St,current:Mt,...ft}=(V=le==null?void 0:le.params)!=null?V:{};return ft}else{let{sorter:ge,filters:qt,pageSize:St,current:Mt,...ft}=ma.default.parse(X,{ignoreQueryPrefix:!0});return ft}};(0,_e.useEffect)(()=>{if(R){let V=xr();if(ee==="new")ze({type:"replace",options:{keepQuery:!0},query:{...We?{pageSize:je,current:pt}:{},sorters:(0,kt.default)(ue,Re,Nt.default),filters:(0,kt.default)(He,Me,Nt.default)}});else{let ge=nr({...We?{pagination:{pageSize:je,current:pt}}:{},sorters:(0,kt.default)(ue,Re,Nt.default),filters:(0,kt.default)(He,Me,Nt.default),...V});return De==null?void 0:De(`${j}?${ge}`,void 0,{shallow:!0})}}},[R,pt,je,ue,He]);let kr=yr({resource:xe,hasPagination:r,pagination:{current:pt,pageSize:je,mode:a==null?void 0:a.mode},filters:yt(Me,He),sorters:lr(Re,ue),queryOptions:u,successNotification:c,errorNotification:m,meta:dt,metaData:dt,liveMode:U,liveParams:P,onLiveEvent:g,dataProviderName:h}),Lo=V=>{wt(ge=>yt(Me,V,ge))},wo=V=>{wt(yt(Me,V))},qo=V=>{wt(ge=>yt(Me,V(ge)))},So=(V,ge=jt)=>{typeof V=="function"?qo(V):ge==="replace"?wo(V):Lo(V)},Nr=V=>{ke(()=>lr(Re,V))};return{tableQueryResult:kr,sorters:ue,setSorters:Nr,sorter:ue,setSorter:Nr,filters:He,setFilters:So,current:pt,setCurrent:Mr,pageSize:je,setPageSize:Dr,pageCount:je?Math.ceil(((Q=(O=kr.data)==null?void 0:O.total)!=null?Q:0)/je):1,createLinkForSyncWithLocation:Co}}var fa=C("react"),tr=C("@tanstack/react-query"),co=x(C("react")),Wt=co.default.createContext({}),Tl=({create:e,get:t,update:r,children:a})=>co.default.createElement(Wt.Provider,{value:{create:e,get:t,update:r}},a),Je=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,tr.useQueryClient)(),a=(0,fa.useContext)(Wt),n=re(),{resources:l}=(0,fa.useContext)(bt),{data:o,refetch:d,isLoading:f}=La({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy),queryOptions:{enabled:!!a}}),s=(0,tr.useMutation)(async p=>{var b,c,m,u,i;let g=J(p.resource,l),P=q((b=g==null?void 0:g.meta)==null?void 0:b.audit,(c=g==null?void 0:g.options)==null?void 0:c.audit,(u=(m=g==null?void 0:g.options)==null?void 0:m.auditLog)==null?void 0:u.permissions);if(P&&!ln(P,p.action))return;let y;return f&&(y=await d()),await((i=a.create)==null?void 0:i.call(a,{...p,author:o!=null?o:y==null?void 0:y.data}))},e),v=(0,tr.useMutation)(async p=>{var b;return await((b=a.update)==null?void 0:b.call(a,p))},{onSuccess:p=>{if(p!=null&&p.resource){let b=Pe(p==null?void 0:p.resource);r.invalidateQueries(b.logList())}},...t});return{log:s,rename:v}},Wl=C("react"),Bl=C("@tanstack/react-query"),zl=({resource:e,action:t,meta:r,author:a,metaData:n,queryOptions:l})=>{let{get:o}=(0,Wl.useContext)(Wt),d=Pe(e,void 0,n);return(0,Bl.useQuery)(d.logList(r),()=>{var f;return(f=o==null?void 0:o({resource:e,action:t,author:a,meta:r,metaData:n}))!=null?f:Promise.resolve([])},{enabled:typeof o<"u",...l,retry:!1})},Hl=C("react"),jl=C("@tanstack/react-query"),Ge=()=>{let{resources:e}=z(),t=(0,jl.useQueryClient)();return(0,Hl.useCallback)(({resource:r,dataProviderName:a,invalidates:n,id:l})=>{if(n===!1)return;let o=Pe(r,T(r,a,e));n.forEach(d=>{switch(d){case"all":t.invalidateQueries(o.all);break;case"list":t.invalidateQueries(o.list());break;case"many":t.invalidateQueries(o.many());break;case"resourceAll":t.invalidateQueries(o.resourceAll);break;case"detail":t.invalidateQueries(o.detail(l||""));break;default:break}})},[])},Kl=C("react"),_l=x(C("warn-once")),Vl=({meta:e={}}={})=>{let t=G(),{i18nProvider:r}=(0,Kl.useContext)(lt),a=be(),n=_(),{resources:l,resource:o,action:d}=z(),f=[];if(!(o!=null&&o.name))return{breadcrumbs:f};let s=v=>{var p,b,c,m,u,i,g,P;let y=typeof v=="string"?(p=J(v,l,t==="legacy"))!=null?p:{name:v}:v;if(y){let L=q((b=y==null?void 0:y.meta)==null?void 0:b.parent,y==null?void 0:y.parentName);L&&s(L);let h=me(y,l,t==="legacy").find(w=>w.action==="list"),E=(c=h==null?void 0:h.resource)!=null&&c.list?h==null?void 0:h.route:void 0,S=E?t==="legacy"?E:ye(E,a,e):void 0;f.push({label:(i=q((m=y.meta)==null?void 0:m.label,(u=y.options)==null?void 0:u.label))!=null?i:n(`${y.name}.${y.name}`,$t(y.name)),href:S,icon:q((g=y.meta)==null?void 0:g.icon,(P=y.options)==null?void 0:P.icon,y.icon)})}};if(s(o),d&&d!=="list"){let v=`actions.${d}`,p=n(v);typeof r<"u"&&p===v?((0,_l.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${d}" action. Please add "actions.${d}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),f.push({label:n(`buttons.${d}`,$t(d))})):f.push({label:n(v,$t(d))})}return{breadcrumbs:f}},rr=x(C("react")),At=(e,t,r=!1)=>{let a=[],n=Fe(e,t);for(;n;)a.push(n),n=Fe(n,t);return a.reverse(),`/${[...a,e].map(l=>{var o,d;return Oe((d=(o=r?l.route:void 0)!=null?o:l.identifier)!=null?d:l.name)}).join("/").replace(/^\//,"")}`},Yl=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{var l,o;let d=[],f=Fe(n,e);for(;f;)d.push(f),f=Fe(f,e);d.reverse();let s=r;d.forEach(p=>{var b,c;let m=(c=(b=t?p.route:void 0)!=null?b:p.identifier)!=null?c:p.name;s.children[m]||(s.children[m]={item:p,children:{}}),s=s.children[m]});let v=(o=(l=t?n.route:void 0)!=null?l:n.identifier)!=null?o:n.name;s.children[v]||(s.children[v]={item:n,children:{}})});let a=n=>{let l=[];return Object.keys(n.children).forEach(o=>{let d=At(n.children[o].item,e,t),f={...n.children[o].item,key:d,children:a(n.children[o])};l.push(f)}),l};return a(r)},ga=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),Jl=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=_(),a=wr(),n=G(),{resource:l,resources:o}=z(),{pathname:d}=be(),{useLocation:f}=ne(),{pathname:s}=f(),v=n==="legacy"?ga(s):d?ga(d):void 0,p=`/${(v!=null?v:"").replace(/^\//,"")}`,b=l?At(l,o,n==="legacy"):p!=null?p:"",c=rr.default.useMemo(()=>{if(!l)return[];let i=Fe(l,o),g=[At(l,o)];for(;i;)g.push(At(i,o)),i=Fe(i,o);return g},[]),m=rr.default.useCallback(i=>{var g,P,y,L,h,E,S,w;if(((y=(g=i==null?void 0:i.meta)==null?void 0:g.hide)!=null?y:(P=i==null?void 0:i.options)==null?void 0:P.hide)||!(i!=null&&i.list)&&i.children.length===0)return;let M=i.list?a({resource:i,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&M&&M.match(/(\/|^):(.+?)(\/|$){1}/)))return{...i,route:M,icon:q((L=i.meta)==null?void 0:L.icon,(h=i.options)==null?void 0:h.icon,i.icon),label:(w=q((E=i==null?void 0:i.meta)==null?void 0:E.label,(S=i==null?void 0:i.options)==null?void 0:S.label))!=null?w:r(`${i.name}.${i.name}`,fr(i.name,"plural"))}},[n,e,r,t]),u=rr.default.useMemo(()=>{let i=Yl(o,n==="legacy"),g=P=>P.flatMap(y=>{let L=g(y.children),h=m({...y,children:L});return h?[h]:[]});return g(i)},[o,n,m]);return{defaultOpenKeys:c,selectedKey:b,menuItems:u}},Gl=()=>{let[e,t]=(0,Ke.useState)(),r=_(),{push:a}=Ce(),n=Ee(),l=G(),{resource:o,action:d}=z();return(0,Ke.useEffect)(()=>{o&&d&&t(r("pages.error.info",{action:d,resource:o==null?void 0:o.name},`You may have forgotten to add the "${d}" component to "${o==null?void 0:o.name}" resource.`))},[o,d]),Ke.default.createElement(Ke.default.Fragment,null,Ke.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Ke.default.createElement("p",null,e),Ke.default.createElement("button",{onClick:()=>{l==="legacy"?a("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},te=x(C("react")),mo=()=>{let[e,t]=(0,te.useState)(""),[r,a]=(0,te.useState)(""),n=_(),l=re(),{mutate:o}=cr({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)});return te.default.createElement(te.default.Fragment,null,te.default.createElement("h1",null,n("pages.login.title","Sign in your account")),te.default.createElement("form",{onSubmit:d=>{d.preventDefault(),o({username:e,password:r})}},te.default.createElement("table",null,te.default.createElement("tbody",null,te.default.createElement("tr",null,te.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),te.default.createElement("td",null,te.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:d=>t(d.target.value)}))),te.default.createElement("tr",null,te.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),te.default.createElement("td",null,te.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:d=>a(d.target.value)}))))),te.default.createElement("br",null),te.default.createElement("input",{type:"submit",value:"login"})))},et=x(C("react")),W=x(C("react")),Xl=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:n,wrapperProps:l,renderContent:o,formProps:d})=>{let f=G(),s=It(),{Link:v}=ne(),p=f==="legacy"?v:s,[b,c]=(0,W.useState)(""),[m,u]=(0,W.useState)(""),[i,g]=(0,W.useState)(!1),P=_(),y=re(),{mutate:L}=cr({v3LegacyAuthProviderCompatible:Boolean(y==null?void 0:y.isLegacy)}),h=(w,M)=>w?typeof w=="string"?W.default.createElement(p,{to:w},M):w:null,E=()=>e?e.map(w=>{var M;return W.default.createElement("div",{key:w.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},W.default.createElement("button",{onClick:()=>L({providerName:w.name}),style:{display:"flex",alignItems:"center"}},w==null?void 0:w.icon,(M=w.label)!=null?M:W.default.createElement("label",null,w.label)))}):null,S=W.default.createElement("div",{...n},W.default.createElement("h1",{style:{textAlign:"center"}},P("pages.login.title","Sign in to your account")),E(),W.default.createElement("hr",null),W.default.createElement("form",{onSubmit:w=>{w.preventDefault(),L({email:b,password:m,remember:i})},...d},W.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},W.default.createElement("label",null,P("pages.login.fields.email","Email")),W.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:b,onChange:w=>c(w.target.value)}),W.default.createElement("label",null,P("pages.login.fields.password","Password")),W.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:m,onChange:w=>u(w.target.value)}),a!=null?a:W.default.createElement(W.default.Fragment,null,W.default.createElement("label",null,P("pages.login.buttons.rememberMe","Remember me"),W.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:i,value:i.toString(),onChange:()=>{g(!i)}}))),W.default.createElement("br",null),r!=null?r:h("/forgot-password",P("pages.login.buttons.forgotPassword","Forgot password?")),W.default.createElement("input",{type:"submit",value:P("pages.login.signin","Sign in")}),t!=null?t:W.default.createElement("span",null,P("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",h("/register",P("pages.login.register","Sign up"))))));return W.default.createElement("div",{...l},o?o(S):S)},Y=x(C("react")),Zl=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:n,formProps:l})=>{let o=G(),d=It(),{Link:f}=ne(),s=o==="legacy"?f:d,[v,p]=(0,Y.useState)(""),[b,c]=(0,Y.useState)(""),m=_(),u=re(),{mutate:i,isLoading:g}=wa({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),P=(h,E)=>h?typeof h=="string"?Y.default.createElement(s,{to:h},E):h:null,y=()=>e?e.map(h=>{var E;return Y.default.createElement("div",{key:h.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},Y.default.createElement("button",{onClick:()=>i({providerName:h.name}),style:{display:"flex",alignItems:"center"}},h==null?void 0:h.icon,(E=h.label)!=null?E:Y.default.createElement("label",null,h.label)))}):null,L=Y.default.createElement("div",{...a},Y.default.createElement("h1",{style:{textAlign:"center"}},m("pages.register.title","Sign up for your account")),y(),Y.default.createElement("hr",null),Y.default.createElement("form",{onSubmit:h=>{h.preventDefault(),i({email:v,password:b})},...l},Y.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Y.default.createElement("label",null,m("pages.register.fields.email","Email")),Y.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:h=>p(h.target.value)}),Y.default.createElement("label",null,m("pages.register.fields.password","Password")),Y.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:b,onChange:h=>c(h.target.value)}),Y.default.createElement("input",{type:"submit",value:m("pages.register.buttons.submit","Sign up"),disabled:g}),t!=null?t:Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("span",null,m("pages.login.buttons.haveAccount","Have an account?")," ",P("/login",m("pages.login.signin","Sign in")))))));return Y.default.createElement("div",{...r},n?n(L):L)},de=x(C("react")),ei=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:n})=>{let l=_(),o=G(),d=It(),{Link:f}=ne(),s=o==="legacy"?f:d,[v,p]=(0,de.useState)(""),{mutate:b,isLoading:c}=qa(),m=(i,g)=>i?typeof i=="string"?de.default.createElement(s,{to:i},g):i:null,u=de.default.createElement("div",{...r},de.default.createElement("h1",{style:{textAlign:"center"}},l("pages.forgotPassword.title","Forgot your password?")),de.default.createElement("hr",null),de.default.createElement("form",{onSubmit:i=>{i.preventDefault(),b({email:v})},...n},de.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},de.default.createElement("label",null,l("pages.forgotPassword.fields.email","Email")),de.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:i=>p(i.target.value)}),de.default.createElement("input",{type:"submit",disabled:c,value:l("pages.forgotPassword.buttons.submit","Send reset instructions")}),de.default.createElement("br",null),e!=null?e:de.default.createElement("span",null,l("pages.register.buttons.haveAccount","Have an account? ")," ",m("/login",l("pages.login.signin","Sign in"))))));return de.default.createElement("div",{...t},a?a(u):u)},ce=x(C("react")),ti=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let n=_(),l=re(),{mutate:o,isLoading:d}=Sa({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)}),[f,s]=(0,ce.useState)(""),[v,p]=(0,ce.useState)(""),b=ce.default.createElement("div",{...t},ce.default.createElement("h1",{style:{textAlign:"center"}},n("pages.updatePassword.title","Update Password")),ce.default.createElement("hr",null),ce.default.createElement("form",{onSubmit:c=>{c.preventDefault(),o({password:f,confirmPassword:v})},...a},ce.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ce.default.createElement("label",null,n("pages.updatePassword.fields.password","New Password")),ce.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:f,onChange:c=>s(c.target.value)}),ce.default.createElement("label",null,n("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ce.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:v,onChange:c=>p(c.target.value)}),ce.default.createElement("input",{type:"submit",disabled:d,value:n("pages.updatePassword.buttons.submit","Update")}))));return ce.default.createElement("div",{...e},r?r(b):b)},ri=e=>{let{type:t}=e;return et.default.createElement(et.default.Fragment,null,(()=>{switch(t){case"register":return et.default.createElement(Zl,{...e});case"forgotPassword":return et.default.createElement(ei,{...e});case"updatePassword":return et.default.createElement(ti,{...e});default:return et.default.createElement(Xl,{...e})}})())},se=x(C("react")),vo=()=>se.default.createElement(se.default.Fragment,null,se.default.createElement("h1",null,"Welcome on board"),se.default.createElement("p",null,"Your configuration is completed."),se.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",se.default.createElement("code",null,"`resources`")," property of ",se.default.createElement("code",null,"`<Refine>`")),se.default.createElement("div",{style:{display:"flex",gap:8}},se.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Documentation")),se.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Examples")),se.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Community")))),we=x(C("react")),ai=()=>we.default.createElement(we.default.Fragment,null,we.default.createElement("h1",null,"Welcome on board"),we.default.createElement("p",null,"Your configuration is completed."),we.default.createElement("div",{style:{display:"flex",gap:8}},we.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},we.default.createElement("button",null,"Documentation")),we.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},we.default.createElement("button",null,"Examples")),we.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},we.default.createElement("button",null,"Community")))),B=x(C("react")),ar=C("@tanstack/react-query"),oi=C("@tanstack/react-query-devtools"),ni=C("react"),Ve=C("react"),li="4.1.0",ii=()=>{let e=Ma(),t=(0,Ve.useContext)(Wt),r=(0,Ve.useContext)(ht),a=(0,Ve.useContext)(qr),n=(0,Ve.useContext)(br),{i18nProvider:l}=(0,Ve.useContext)(lt),o=(0,Ve.useContext)(Er),d=(0,Ve.useContext)(Tt),{resources:f}=z(),s=!!t.create||!!t.get||!!t.update,v=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),p=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,b=!!n,c=!!(l!=null&&l.changeLocale)||!!(l!=null&&l.getLocale)||!!(l!=null&&l.translate),m=!!o.close||!!o.open,u=!!d.can;return{providers:{auth:e,auditLog:s,live:v,router:p,data:b,i18n:c,notification:m,accessControl:u},version:li,resourceCount:f.length}},ui=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},si=()=>{let e=ii();return(0,ni.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ui(e)}`},[]),null},di=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},ya=x(C("react")),ci=e=>{let t=ya.default.useRef(!1);ya.default.useEffect(()=>{t.current===!1&&e&&di(e)&&(t.current=!0)},[e])},mi=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:n,notificationProvider:l,accessControlProvider:o,auditLogProvider:d,resources:f,DashboardPage:s,ReadyPage:v,LoginPage:p,catchAll:b,children:c,liveProvider:m,i18nProvider:u,Title:i,Layout:g,Sider:P,Header:y,Footer:L,OffLayoutArea:h,onLiveEvent:E,options:S})=>{let{optionsWithDefaults:w,disableTelemetryWithDefault:M,reactQueryWithDefaults:D}=gn({options:S}),$=Ya(()=>{var O;return D.clientConfig instanceof ar.QueryClient?D.clientConfig:new ar.QueryClient({...D.clientConfig,defaultOptions:{...D.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(O=D.clientConfig.defaultOptions)==null?void 0:O.queries}}})},[D.clientConfig]),F=B.default.useMemo(()=>typeof l=="function"?l:()=>l!=null?l:{},[l])();if(ci(n),a&&!n&&(f!=null?f:[]).length===0)return v?B.default.createElement(v,null):B.default.createElement(vo,null);let{RouterComponent:A=B.default.Fragment}=n?{}:a!=null?a:{};return B.default.createElement(ar.QueryClientProvider,{client:$},B.default.createElement(al,{...F},B.default.createElement(Wo,{...e!=null?e:{},isProvided:Boolean(e)},B.default.createElement(Bo,{...t!=null?t:{},isProvided:Boolean(t)},B.default.createElement(Fn,{...r},B.default.createElement(Bn,{liveProvider:m},B.default.createElement(Xn,{value:a&&!n?"legacy":"new"},B.default.createElement(el,{router:n},B.default.createElement(Dl,{...a},B.default.createElement(Gn,{resources:f!=null?f:[]},B.default.createElement(nl,{i18nProvider:u},B.default.createElement(Nl,{...o!=null?o:{}},B.default.createElement(Tl,{...d!=null?d:{}},B.default.createElement(wn,null,B.default.createElement(fn,{mutationMode:w.mutationMode,warnWhenUnsavedChanges:w.warnWhenUnsavedChanges,syncWithLocation:w.syncWithLocation,Title:i,undoableTimeout:w.undoableTimeout,catchAll:b,DashboardPage:s,LoginPage:p,Layout:g,Sider:P,Footer:L,Header:y,OffLayoutArea:h,hasDashboard:!!s,liveMode:w.liveMode,onLiveEvent:E,options:w},B.default.createElement(sl,null,B.default.createElement(A,null,c,!M&&B.default.createElement(si,null),B.default.createElement(fo,null))))))))))))))))),D.devtoolConfig===!1?null:B.default.createElement(oi.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...D.devtoolConfig}))},ha=C("react"),po=({notification:e})=>{let t=_(),{notificationDispatch:r}=nt(),{open:a}=Te(),[n,l]=(0,ha.useState)(),o=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Gt(e.seconds)},`You have ${Gt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Gt(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let d=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);l(d)}};return(0,ha.useEffect)(()=>{o()},[e]),null},Rt=x(C("react")),vi=({children:e,Layout:t,Sider:r,Header:a,Title:n,Footer:l,OffLayoutArea:o})=>{let{Layout:d,Footer:f,Header:s,Sider:v,Title:p,OffLayoutArea:b}=Lr(),c=t!=null?t:d;return Rt.default.createElement(c,{Sider:r!=null?r:v,Header:a!=null?a:s,Footer:l!=null?l:f,Title:n!=null?n:p,OffLayoutArea:o!=null?o:b},e,Rt.default.createElement(pi,null))},pi=()=>{let{Prompt:e}=ne(),t=_(),{warnWhen:r,setWarnWhen:a}=Cr(),n=l=>(l.preventDefault(),l.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),l.returnValue);return(0,Rt.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),Rt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},$e=x(C("react")),fi=()=>{let e=Ee(),[t,r]=$e.default.useState(void 0);return $e.default.useEffect(()=>{t&&e(t)},[t]),$e.default.useCallback(a=>{t||r(a)},[t])};function gi({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:n}){var l,o,d,f,s;let v=re(),p=Boolean(v==null?void 0:v.isLegacy),b=mr({v3LegacyAuthProviderCompatible:Boolean(v==null?void 0:v.isLegacy)}),c=G(),m=be(),u=Ee(),i=fi(),{replace:g}=Ce(),{useLocation:P}=ne(),{pathname:y,search:L}=P(),h=b.isLoading,E=v!=null&&v.isProvided?p?b.isSuccess:(l=b.data)==null?void 0:l.authenticated:!0,S=p?typeof e=="string"?e:"/login":typeof e=="string"?e:(o=b.data)==null?void 0:o.redirectTo;if(h)return n?$e.default.createElement($e.default.Fragment,null,n):null;if(E)return $e.default.createElement($e.default.Fragment,null,r!=null?r:null);if(typeof a>"u"){if(c==="legacy"){let w=t&&y?`?to=${encodeURIComponent(`${y}${L!=null?L:""}`)}`:"",M=y==null?void 0:y.split(/[?#]/)[0];!(M!=null&&M.includes("/login"))&&M!==e&&g(`/${(S!=null?S:"/login").replace(/^\//,"")}${w}`)}else{if(((d=m.pathname)==null?void 0:d.split(/[?#]/)[0])===S)return null;let w=(f=m.params)!=null&&f.to?(s=m.params)==null?void 0:s.to:u({to:m.pathname||"/",options:{keepQuery:!0},type:"path"});S&&i({to:`/${S.replace(/^\//,"")}`,query:w&&typeof w=="string"&&w.length>1?{to:w}:{}})}return null}return $e.default.createElement($e.default.Fragment,null,a)}var yi=C("react"),fo=()=>{let{useLocation:e}=ne(),{checkAuth:t}=he(),r=e();return(0,yi.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},tt=x(C("react")),hi=({resource:e,action:t,params:r,fallback:a,children:n,...l})=>{let{data:o}=so({resource:e,action:t,params:r});return o!=null&&o.can?tt.default.isValidElement(n)?tt.default.cloneElement(n,l):tt.default.createElement(tt.default.Fragment,null,n):(o==null?void 0:o.can)===!1?tt.default.createElement(tt.default.Fragment,null,a!=null?a:null):null},rt=x(C("react")),Pi=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],bi=()=>((0,rt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),Pi.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),rt.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},rt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},rt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},rt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),rt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var Eo=gt(Sr()),Ae=C("react-router-dom");var Xe=gt(C("react")),ut=C("react-router-dom");var N=gt(C("react")),H=C("react-router-dom"),I=gt(Sr()),Bt=({route:e})=>{var d,f,s,v;let{catchAll:t}=(0,I.useRefineContext)(),{useParams:r}=(0,I.useRouterContext)(),{resources:a}=(0,I.useResource)(),{action:n,id:l}=r(),o=a.find(p=>p.route===e);if(o){let{list:p,create:b,edit:c,show:m,name:u,canCreate:i,canEdit:g,canShow:P,canDelete:y,options:L}=o,h=()=>console.error("`string` resource routes are not supported in legacy router. Please switch to the new router or assign Components to the resource routes."),E=()=>console.error("`Object` resource routes are not supported in legacy router. Please switch to the new router or assign Components to the resource routes."),S=(d=typeof p=="string"?h():typeof p=="object"?E():p)!=null?d:()=>null,w=(f=typeof b=="string"?h():typeof b=="object"?E():b)!=null?f:()=>null,M=(s=typeof c=="string"?h():typeof c=="object"?E():c)!=null?s:()=>null,D=(v=typeof m=="string"?h():typeof m=="object"?E():m)!=null?v:()=>null;return(()=>{switch(n){case void 0:return N.default.createElement(I.CanAccess,{resource:u,action:"list",fallback:t!=null?t:N.default.createElement(I.ErrorComponent,null),params:{resource:o}},p?N.default.createElement(S,{name:u,canCreate:i,canEdit:g,canDelete:y,canShow:P,options:L}):t!=null?t:N.default.createElement(I.ErrorComponent,null));case"create":case"clone":return N.default.createElement(I.CanAccess,{resource:u,action:"create",fallback:t!=null?t:N.default.createElement(I.ErrorComponent,null),params:{id:l?decodeURIComponent(l):void 0,resource:o}},b?N.default.createElement(w,{name:u,canCreate:i,canEdit:g,canDelete:y,canShow:P,options:L}):t!=null?t:N.default.createElement(I.ErrorComponent,null));case"edit":return N.default.createElement(I.CanAccess,{resource:u,action:"edit",params:{id:l?decodeURIComponent(l):void 0,resource:o},fallback:t!=null?t:N.default.createElement(I.ErrorComponent,null)},c?N.default.createElement(M,{name:u,canCreate:i,canEdit:g,canDelete:y,canShow:P,options:L}):t!=null?t:N.default.createElement(I.ErrorComponent,null));case"show":return N.default.createElement(I.CanAccess,{resource:u,action:"show",params:{id:l?decodeURIComponent(l):void 0,resource:o},fallback:t!=null?t:N.default.createElement(I.ErrorComponent,null)},m?N.default.createElement(D,{name:u,canCreate:i,canEdit:g,canDelete:y,canShow:P,options:L}):t!=null?t:N.default.createElement(I.ErrorComponent,null));default:return N.default.createElement(N.default.Fragment,null,t!=null?t:N.default.createElement(I.ErrorComponent,null))}})()}return N.default.createElement(N.default.Fragment,null,t!=null?t:N.default.createElement(I.ErrorComponent,null))},zt=({initialRoute:e})=>{let{resources:t}=(0,I.useResource)(),{catchAll:r,DashboardPage:a,LoginPage:n}=(0,I.useRefineContext)(),{routes:l}=(0,I.useRouterContext)(),o=(0,I.useActiveAuthProvider)(),{isFetching:d,isError:f,data:s}=(0,I.useIsAuthenticated)({v3LegacyAuthProviderCompatible:Boolean(o==null?void 0:o.isLegacy),params:{type:"routeProvider"}}),v=(0,N.useMemo)(()=>o!=null&&o.isProvided?o!=null&&o.isLegacy?!(f||(s==null?void 0:s.error)):s==null?void 0:s.authenticated:!0,[s,f,o==null?void 0:o.isLegacy]);if(d)return N.default.createElement(H.Routes,null,N.default.createElement(H.Route,{path:"*",element:null}));let p=()=>{let{pathname:i,search:g}=location,P=`${i}${g}`;return N.default.createElement(H.Navigate,{to:`/login?to=${encodeURIComponent(P)}`})},b=[];t.map(i=>{let g=N.default.createElement(H.Route,{key:`${i.route}`,path:`${i.route}`,element:N.default.createElement(Bt,{route:i.route})},N.default.createElement(H.Route,{path:":action",element:N.default.createElement(Bt,{route:i.route})},N.default.createElement(H.Route,{path:":id",element:N.default.createElement(Bt,{route:i.route})})));b.push(g)});let c=()=>{var i,g;return N.default.createElement(H.Routes,null,[...l||[]].filter(P=>!P.layout).map((P,y)=>N.default.createElement(H.Route,{key:`custom-route-${y}`,...P,element:P.element})),N.default.createElement(H.Route,{path:"/",element:N.default.createElement(I.LayoutWrapper,null,N.default.createElement(H.Outlet,null))},[...l||[]].filter(P=>P.layout).map((P,y)=>N.default.createElement(H.Route,{key:`custom-route-${y}`,...P,element:P.element})),a?N.default.createElement(H.Route,{index:!0,element:N.default.createElement(I.CanAccess,{resource:"dashboard",action:"list",fallback:r!=null?r:N.default.createElement(I.ErrorComponent,null)},N.default.createElement(a,null))}):N.default.createElement(H.Route,{index:!0,element:N.default.createElement(H.Navigate,{to:e!=null?e:`/${(g=(i=t.find(P=>P.list))==null?void 0:i.route)==null?void 0:g.replace(/^\//,"")}`})}),...[...b||[]],N.default.createElement(H.Route,{path:"*",element:N.default.createElement(Bt,{route:""})})))},m=()=>n?N.default.createElement(n,null):N.default.createElement(I.LoginPage,null);return v?c():(()=>N.default.createElement(H.Routes,null,[...l||[]].map((i,g)=>N.default.createElement(H.Route,{key:`custom-route-${g}`,...i})),N.default.createElement(H.Route,{path:"/",element:m()}),N.default.createElement(H.Route,{path:"/login",element:m()}),N.default.createElement(H.Route,{path:"*",element:N.default.createElement(p,null)})))()};function yo({children:e,...t}){return Xe.default.createElement(ut.BrowserRouter,{...t},Xe.default.createElement(zt,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}function Ei({children:e,...t}){return Xe.default.createElement(ut.MemoryRouter,{...t},Xe.default.createElement(zt,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}function Ci({children:e,...t}){return Xe.default.createElement(ut.HashRouter,{...t},Xe.default.createElement(zt,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}var st=gt(C("react")),ho=C("react-router-dom");function Li(e,t=!0){let{navigator:r}=st.default.useContext(ho.UNSAFE_NavigationContext);st.default.useEffect(()=>{if(!t)return;let a=r.go,n=r.push;return r.push=(...l)=>{e()!==!1&&n(...l)},r.go=(...l)=>{e()!==!1&&a(...l)},()=>{r.push=n,r.go=a}},[r,e,t])}function Po(e,t=!0,r,a=!1){let n=st.default.useCallback(o=>(o.preventDefault(),o.returnValue=e,o.returnValue),[e]);st.default.useEffect(()=>(t&&!a&&window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}),[n,t,a]);let l=st.default.useCallback(()=>{let o=window.confirm(e);return o&&r&&r(),o},[e]);Li(l,t)}var bo=({message:e,when:t,setWarnWhen:r})=>(Po(e,t,()=>{r==null||r(!1)},!0),null);var wi={useHistory:()=>{let e=(0,Ae.useNavigate)();return{push:e,replace:t=>{e(t,{replace:!0})},goBack:()=>{e(-1)}}},useLocation:Ae.useLocation,useParams:()=>{let e=(0,Ae.useParams)(),{pathname:t}=(0,Ae.useLocation)(),r=`/${Object.values(e).join("/")}`;return(0,Eo.handleUseParams)({...e,resource:Object.keys(e).length===0?t.substring(1):decodeURIComponent(t.substring(1)).replace(r,"")})},Prompt:bo,Link:Ae.Link,RouterComponent:yo},Bi=wi;})();
//# sourceMappingURL=legacy.js.map